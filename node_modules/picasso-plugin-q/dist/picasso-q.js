/*!
 * picasso-plugin-q v0.11.0
 * Copyright (c) 2018 QlikTech International AB
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.picassoQ=t():e.picassoQ=t()}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,a=Object.prototype.toString,i=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===a.call(e)},o=function(e){if(!e||"[object Object]"!==a.call(e))return!1;var t,r=n.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&n.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!i)return!1;for(t in e);return void 0===t||n.call(e,t)};e.exports=function e(){var t,r,n,a,u,c,l=arguments[0],f=1,s=arguments.length,p=!1;for("boolean"==typeof l&&(p=l,l=arguments[1]||{},f=2),(null==l||"object"!=typeof l&&"function"!=typeof l)&&(l={});f<s;++f)if(null!=(t=arguments[f]))for(r in t)n=l[r],l!==(a=t[r])&&(p&&a&&(o(a)||(u=i(a)))?(u?(u=!1,c=n&&i(n)?n:[]):c=n&&o(n)?n:{},l[r]=e(p,c,a)):void 0!==a&&(l[r]=a));return l}},function(e,t,r){var n,a,i;/*! javascript-number-formatter - v1.1.11 - http://mottie.github.com/javascript-number-formatter/ * © ecava */a=[],void 0===(i="function"==typeof(n=function(){return function(e,t){"use strict";if(!e||isNaN(+t))return t;var r,n,a,i,o,u,c,l,f,s,p=e.length,h=e.search(/[0-9\-\+#]/),d=h>0?e.substring(0,h):"",v=e.split("").reverse().join(""),m=v.search(/[0-9\-\+#]/),y=p-m,g=e.substring(y,y+1),b=y+("."===g||","===g?1:0),q=m>0?e.substring(b,p):"";if(e=e.substring(h,b),t="-"===e.charAt(0)?-t:+t,r=t<0?t=-t:0,n=e.match(/[^\d\-\+#]/g),a=n&&n[n.length-1]||".",i=n&&n[1]&&n[0]||",",e=e.split(a),t=+(t=t.toFixed(e[1]&&e[1].length))+"",u=e[1]&&e[1].lastIndexOf("0"),(!(l=t.split("."))[1]||l[1]&&l[1].length<=u)&&(t=(+t).toFixed(u+1)),f=e[0].split(i),e[0]=f.join(""),(o=e[0]&&e[0].indexOf("0"))>-1)for(;l[0].length<e[0].length-o;)l[0]="0"+l[0];else 0==+l[0]&&(l[0]="");if((t=t.split("."))[0]=l[0],c=f[1]&&f[f.length-1].length){for(s=t[0],v="",y=s.length%c,p=s.length,b=0;b<p;b++)v+=s.charAt(b),!((b-y+1)%c)&&b<p-c&&(v+=i);t[0]=v}return t[1]=e[1]&&t[1]?a+t[1]:"","0"!==(n=t.join(""))&&""!==n||(r=!1),d+(r?"-":"")+n+q}})?n.apply(t,a):n)||(e.exports=i)},function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n);function i(e){var t=0,r=e.children,n=r&&r.length;if(n)for(;--n>=0;)t+=r[n].value;else t=1;e.value=t}function o(e,t){var r,n,a,i,o,c=new f(e),s=+e.value&&(c.value=e.value),p=[c];for(null==t&&(t=u);r=p.pop();)if(s&&(r.value=+r.data.value),(a=t(r.data))&&(o=a.length))for(r.children=new Array(o),i=o-1;i>=0;--i)p.push(n=r.children[i]=new f(a[i])),n.parent=r,n.depth=r.depth+1;return c.eachBefore(l)}function u(e){return e.children}function c(e){e.data=e.data.data}function l(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function f(e){this.data=e,this.depth=this.height=0,this.parent=null}f.prototype=o.prototype={constructor:f,count:function(){return this.eachAfter(i)},each:function(e){var t,r,n,a,i=this,o=[i];do{for(t=o.reverse(),o=[];i=t.pop();)if(e(i),r=i.children)for(n=0,a=r.length;n<a;++n)o.push(r[n])}while(o.length);return this},eachAfter:function(e){for(var t,r,n,a=this,i=[a],o=[];a=i.pop();)if(o.push(a),t=a.children)for(r=0,n=t.length;r<n;++r)i.push(t[r]);for(;a=o.pop();)e(a);return this},eachBefore:function(e){for(var t,r,n=this,a=[n];n=a.pop();)if(e(n),t=n.children)for(r=t.length-1;r>=0;--r)a.push(t[r]);return this},sum:function(e){return this.eachAfter(function(t){for(var r=+e(t.data)||0,n=t.children,a=n&&n.length;--a>=0;)r+=n[a].value;t.value=r})},sort:function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function(e){for(var t=this,r=function(e,t){if(e===t)return e;var r=e.ancestors(),n=t.ancestors(),a=null;for(e=r.pop(),t=n.pop();e===t;)a=e,e=r.pop(),t=n.pop();return a}(t,e),n=[t];t!==r;)t=t.parent,n.push(t);for(var a=n.length;e!==r;)n.splice(a,0,e),e=e.parent;return n},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var e=[];return this.each(function(t){e.push(t)}),e},leaves:function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function(){var e=this,t=[];return e.each(function(r){r!==e&&t.push({source:r.parent,target:r})}),t},copy:function(){return o(this).eachBefore(c)}};Array.prototype.slice;var s=function(e,t,r,n,a){for(var i,o=e.children,u=-1,c=o.length,l=e.value&&(n-t)/e.value;++u<c;)(i=o[u]).y0=r,i.y1=a,i.x0=t,i.x1=t+=i.value*l};function p(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}p.prototype=Object.create(f.prototype);var h=function(e,t,r,n,a){for(var i,o=e.children,u=-1,c=o.length,l=e.value&&(a-r)/e.value;++u<c;)(i=o[u]).x0=t,i.x1=n,i.y0=r,i.y1=r+=i.value*l},d=(1+Math.sqrt(5))/2;function v(e,t,r,n,a,i){for(var o,u,c,l,f,p,d,v,m,y,g,b=[],q=t.children,x=0,M=0,A=q.length,D=t.value;x<A;){c=a-r,l=i-n;do{f=q[M++].value}while(!f&&M<A);for(p=d=f,g=f*f*(y=Math.max(l/c,c/l)/(D*e)),m=Math.max(d/g,g/p);M<A;++M){if(f+=u=q[M].value,u<p&&(p=u),u>d&&(d=u),g=f*f*y,(v=Math.max(d/g,g/p))>m){f-=u;break}m=v}b.push(o={value:f,dice:c<l,children:q.slice(x,M)}),o.dice?s(o,r,n,a,D?n+=l*f/D:i):h(o,r,n,D?r+=c*f/D:a,i),D-=f,x=M}return b}(function e(t){function r(e,r,n,a,i){v(t,e,r,n,a,i)}return r.ratio=function(t){return e((t=+t)>1?t:1)},r})(d),function e(t){function r(e,r,n,a,i){if((o=e._squarify)&&o.ratio===t)for(var o,u,c,l,f,p=-1,d=o.length,m=e.value;++p<d;){for(c=(u=o[p]).children,l=u.value=0,f=c.length;l<f;++l)u.value+=c[l].value;u.dice?s(u,r,n,a,n+=(i-n)*u.value/m):h(u,r,n,r+=(a-r)*u.value/m,i),m-=u.value}else e._squarify=o=v(t,e,r,n,a,i),o.ratio=t}return r.ratio=function(t){return e((t=+t)>1?t:1)},r}(d);function m(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function y(e,t){"/"===e.charAt(0)&&(e=e.substring(1));for(var r,n=e.split("/"),a=t,i=0;i<n.length;i++){if("*"===n[i]&&Array.isArray(a)){var o=[];r=n.slice(i+1).join("/");for(var u=0;u<a.length;u++){var c=y(r,a[u]);Array.isArray(c)?o.push.apply(o,m(c)):o.push(c)}return o}if(!n[i]&&Array.isArray(a)){var l=new Array(a.length);r=n.slice(i+1).join("/");for(var f=0;f<a.length;f++)l[f]=y(r,a[f]);return l}n[i]in a&&(a=a[n[i]])}return a}function g(e,t){var r=t.cache,n=t.cube;if(!e)return"";var a,i,o=r.fields.indexOf(e);if(-1===o)for(var u=0;u<r.attributeDimensionFields.length;u++)if(-1!==(i=r.attributeDimensionFields[u]?r.attributeDimensionFields[u].indexOf(e):-1)){o=u;break}if(-1===o)for(var c=0;c<r.attributeExpressionFields.length;c++)if(-1!==(a=r.attributeExpressionFields[c]?r.attributeExpressionFields[c].indexOf(e):-1)){o=c;break}return function(e,t,r){return"number"==typeof t?"".concat(e,"/*/qAttrExps/qValues/").concat(t):"number"==typeof r?"".concat(e,"/*/qAttrDims/qValues/").concat(r):e}(function(e,t){var r=e,n=t.qDimensionInfo.length,a=t.qMeasureInfo.length,i=t.qEffectiveInterColumnSortOrder;r<n&&i?r=i.indexOf(r):r>=n&&i&&a>1&&-1!==i.indexOf(-1)&&(r=i.indexOf(-1));for(var o="/qData/*/qSubNodes",u=Math.max(0,Math.min(r,n)),c=0;c<u;c++)o+="/*/qSubNodes";if(e>=n)if(a>1)for(o+="/".concat(e-n,"/qSubNodes"),++c;c<=n;c++)o+="/*/qSubNodes";else o+="/".concat(e-n);return o}(o,n),a>=0?a:void 0,i>=0?i:void 0)}function b(e,t){return g(e,{cache:t.cache,cube:t.cube}).replace(/qSubNodes/g,"children").replace(/children$/g,"children/*").replace(/qData\/\*/,"")}function q(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t,r){if(!e)return-1;var n=r.cache,a=n.fields.indexOf(e),i=-1,o=-1;if(-1===a)for(var u=0;u<n.wrappedFields.length;u++)if(o=n.wrappedFields[u].attrDims.map(function(e){return e.instance}).indexOf(e),i=n.wrappedFields[u].attrExps.map(function(e){return e.instance}).indexOf(e),-1!==o||-1!==i){a=u;break}if((a-=t.qArea.qLeft)<0||a>=t.qArea.qWidth)return-1;var c="row[".concat(a,"]");return o>=0?Function("row","return ".concat(c,".qAttrDims.qValues[").concat(o,"];")):i>=0?Function("row","return ".concat(c,".qAttrExps.qValues[").concat(i,"];")):Function("row","return ".concat(c,";"))}function A(e,t,r){var n=r.key,a={value:"function"==typeof e.value?e.value(t):void 0!==e.value?e.value:t};return a.label="function"==typeof e.label?e.label(t):void 0!==e.label?String(e.label):String(a.value),e.field&&(a.source={key:n,field:e.field.key()}),a}function D(e,t,r,n){var i=[];return(Array.isArray(e)?e:[e]).forEach(function(e){if(void 0!==e.field){var o=t.raw(),u=t.key(),c="object"===x(e.field)?e.field:t.field(e.field),l=n.normalizeConfig(e,t),f=l.props,s=l.main,p=Object.keys(f),h=!!e.trackBy,d=x(e.trackBy),v={},m=[],y=[];o.qDataPages.forEach(function(t){var i=M(c,t,{cache:r});-1!==i&&t.qMatrix.forEach(function(o,l){var g=t.qArea.qTop+l,b=a()({qRow:g},i(o)),q=A(s,b,{key:u});s.filter&&!s.filter(b)||(p.forEach(function(e){var n=f[e],i=n.fields||[n];if(n.fields&&(q[e]=[]),i.forEach(function(i,l){!function(e){var t=e.cache,r=e.f,n=e.mainCell,i=e.p,o=(e.prop,e.page),u=e.rowIdx,c=e.row,l=e.sourceKey,f=e.target,s=e.targetProp,p=n;if(i.field&&i.field!==r){var h=M(i.field,o,{cache:t});if(-1===h)return;p=a()({qRow:u},h(c))}f[s]=A(i,p,{key:l})}({cache:r,f:c,mainCell:b,p:i,prop:e,props:f,page:t,rowIdx:g,row:o,sourceKey:u,target:n.fields?q[e]:q,targetProp:n.fields?l:e})}),n.fields){var l=q[e].map(function(e){return e.value}),s=q[e].map(function(e){return e.label});q[e]={value:"function"==typeof n.value?n.value(l):void 0!==n.value?n.value:l},q[e].label="function"==typeof n.label?n.label(s):void 0!==n.label?String(n.label):String(q[e].value)}}),h&&n.track({cfg:e,itemData:b,obj:q,target:m,tracker:v,trackType:d}),y.push(q))})}),h?i.push.apply(i,q(n.collect(m,{main:s,propsArr:p,props:f}))):i.push.apply(i,y)}}),i}function S(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function I(e,t,r){if(e===t)return function(e){return e};if(e>t){var n=Math.max(0,Math.min(100,e-t)),a=S(Array(n)).map(String.prototype.valueOf,"parent").join(".");return Function("node","return node.".concat(a,";"))}if(t>e){var i=Math.max(0,Math.min(100,t-e));return function(e){return function e(t,r,n){var a=[];if(!t||!t.length)return a;if(r<=0){var i=n>=0?[t[n]]:t;a.push.apply(a,S(i))}else for(var o=0;o<t.length;o++)t[o].children&&t[o].children.length&&a.push.apply(a,S(e(t[o].children,r-1,n)));return a}(e.children,i-1,r)}}return!1}function E(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var C=/^qDimensionInfo(?:\/(\d+))?/,O=/^\/?qMeasureInfo\/(\d+)/,F=/\/qAttrExprInfo\/(\d+)/,T=/\/qAttrDimInfo\/(\d+)/;function N(e,t){var r=t.cube;if(!e)return-1;var n=e.key(),a=!1,i=-1,o=-1,u=-1,c=-1,l=-1,f=n,s=r.qEffectiveInterColumnSortOrder;return C.test(f)&&(a=!0,i=+C.exec(f)[1],f=n.replace(C,"")),O.test(f)&&("K"===r.qMode?c=+O.exec(f)[1]:s&&-1!==s.indexOf(-1)?(c=+O.exec(f)[1],l=0):l=+O.exec(f)[1],f=f.replace(O,"")),f&&(T.exec(f)?u=+T.exec(f)[1]:F.exec(f)&&(o=+F.exec(f)[1])),{fieldDepth:(a?s?s.indexOf(i):i:s&&-1!==s.indexOf(-1)?s.indexOf(-1):r.qDimensionInfo.length-("K"===r.qMode?0:1))+1,pseudoMeasureIndex:c,measureIdx:l,attrDimIdx:u,attrIdx:o}}function j(e,t){var r,n,a=I(e.fieldDepth,t.fieldDepth,t.pseudoMeasureIndex);return r=t.measureIdx>=0?function(e){return e.data.qValues[t.measureIdx]}:function(e){return e.data},t.attrDimIdx>=0?n=function(e){return e.qAttrDims.qValues[t.attrDimIdx]}:t.attrIdx>=0&&(n=function(e){return e.qAttrExps.qValues[t.attrIdx]}),{nodeFn:a,attrFn:n,valueFn:r}}function k(e,t,r,n){var a=[];return(Array.isArray(e)?e:[e]).forEach(function(e){if(void 0!==e.field){var i=function(){var i=t.raw(),u="K"===i.qMode?"/qStackedDataPages/*/qData":"/qTreeDataPages/*",c="K"===i.qMode?"qSubNodes":"qNodes",l=y(u,i);if(!l||!l[0])return{v:void 0};var f=t.key(),s="object"===w(e.field)?e.field:t.field(e.field),p=n.normalizeConfig(e,t),h=p.props,d=p.main,v=Object.keys(h);r.tree||(r.tree=o(l[0],function(e){return e[c]}));var m=N(s,{cube:i,cache:r}),g=j({fieldDepth:0},m),b=g.nodeFn,q=g.attrFn,x=g.valueFn;v.forEach(function(e){var t=h[e];(t.fields?t.fields:[t]).forEach(function(e){if(e.field)if(e.field===s)e.isSame=!0;else{var t=N(e.field,{cube:i,cache:r}),n=j(m,t);e.accessor=n.nodeFn,e.valueAccessor=n.valueFn,e.attrAccessor=n.attrFn}})});for(var M=!!e.trackBy,A=w(e.trackBy),D={},S=[],I=b(r.tree),C=[],O=function(t){var r=I[t],a=q?q(x(r)):x(r);if(d.filter&&!d.filter(a))return"continue";var i=function(e,t,r){var n=r.key,a={value:"function"==typeof e.value?e.value(t):void 0!==e.value?e.value:t};return a.label="function"==typeof e.label?e.label(t):void 0!==e.label?String(e.label):String(a.value),e.field&&(a.source={key:n,field:e.field.key()}),a}(d,a,{key:f});v.forEach(function(e){var t,n=h[e],o=n.fields||[n];n.fields&&(t=[]),o.forEach(function(o){var u,c;"primitive"===o.type?c=o.value:("function"==typeof o.value&&(u=o.value),o.accessor?(c=o.accessor(r),Array.isArray(c)?(c=c.map(o.valueAccessor),o.attrAccessor&&(c=c.map(o.attrAccessor)),u&&(c=c.map(u),u=null),c=o.reduce?o.reduce(c):c):c=o.attrAccessor?o.attrAccessor(o.valueAccessor(c)):o.valueAccessor(c)):c=a),n.fields?t.push(u?u(c):c):(i[e]={value:u?u(c):c},i[e].label=String(i[e].value),o.field&&(i[e].source={field:o.field.key(),key:f}))}),t&&(i[e]={value:"function"==typeof n.value?n.value(t):t},i[e].label=String(i[e].value))}),M&&n.track({cfg:e,itemData:a,obj:i,target:S,tracker:D,trackType:A}),C.push(i)},F=0;F<I.length;F++)O(F);M?a.push.apply(a,E(n.collect(S,{main:d,propsArr:v,props:h}))):a.push.apply(a,C)}();if("object"===w(i))return i.v}}),a}var R=r(1),_=r.n(R);function H(e,t,r){return(H=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&V(a,r.prototype),a}).apply(null,arguments)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Y(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}var z={3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",24:"Y","-3":"m","-6":"μ","-9":"n","-12":"p","-15":"f","-18":"a","-21":"z","-24":"y"},L=/%$/,B=/^\(r(0[2-9]|[12]\d|3[0-6])\)/i,U=/^\(oct\)/i,W=/^\(dec\)/i,K=/^\(hex\)/i,$=/^\(bin\)/i,J=/^\(rom\)/i,X=/^(\(rom\)|\(bin\)|\(hex\)|\(dec\)|\(oct\)|\(r(0[2-9]|[12]\d|3[0-6])\))/i,G=/#|0/g;function Q(e,t,r,n){return e=e.toString(t),r[1]===r[1].toUpperCase()&&(e=e.toUpperCase()),e.length-e.indexOf(".")>10&&(e=e.slice(0,e.indexOf(".")+11)),e.replace(".",n||".")}function Z(e,t,r){var n;return B.test(t)?e=Q(e,Number(/\d{2}/.exec(t)[0]),t,r):U.test(t)?e=Q(e,8,t,r):W.test(t)?e=Q(e,10,t,r):K.test(t)?e=Q(e,16,t,r):$.test(t)?e=Q(e,2,t,r):J.test(t)&&(n="",e<0&&(n="-",e=-e),e=0===(e=Math.floor(e))?"0":e<=5e5?n+(e=function(e,t){for(var r,n="",a=Number(String(e).slice(-3)),i=(e-a)/1e3,o=[0,1,4,5,9,10,40,50,90,100,400,500,900].reverse(),u=["0","I","IV","V","IX","X","XL","L","XC","C","CD","D","CM"].reverse();a>0;)for(r=0;r<o.length;r++)if(o[r]<=a){n+=u[r],a-=o[r];break}for(r=0;r<i;r++)n="M".concat(n);return t[1]!==t[1].toUpperCase()&&(n=n.toLowerCase()),n}(e,t)):t+n+e.toExponential(0)),e}function ee(e,t,r){var n=Y(e);return r?n:new RegExp(n||"",t)}function te(e,t,r){var n,a,i,o,u,c,l,f,s,p=e.pattern;p.indexOf("A")>=0&&(p=p.replace("A",""),e.abbreviate=!0),s=function(e,t){return t&&(t=Y(t)),e&&(e=Y(e)),new RegExp("(?:[#0]+".concat(e,")?[#0]+(?:").concat(t,"[#0]+)?"))}(t,r),o=(i=(i=p.match(s))?i[0]:"")?p.substr(0,p.indexOf(i)):p,u=i?p.substring(p.indexOf(i)+i.length):"",i||(i=p?"#":"##########"),t&&t===r&&(a=(n=i.split(r)).pop(),i=n.join("")+r+a,t=""),c=t,t=/,/.test(r)?"¤":",",c&&(i=i.replace(ee(c,"g"),t)),l=r,r=".",l&&(i=i.replace(ee(l,"g"),r)),f=(f=i.match(/#/g))?f.length:0;var h,d=p.split(l);d[1]&&(h=d[1].match(G)),e.prefix=o||"",e.postfix=u||"",e.pattern=p,e.maxPrecision=h?h.length:2,e.percentage=L.test(p),e.numericPattern=i||"",e.numericRegex=new RegExp("".concat(ee(t,null,!0),"|").concat(ee(r,null,!0)),"g"),e.groupTemp=c,e.decTemp=l,e.t=t,e.d=r,e.temp=f}var re=function(){function e(t,r,n,a,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.localeInfo=t,this.pattern=r,this.thousandDelimiter=n||",",this.decimalDelimiter=a||".",this.type=i||"numeric",this.patternSeparator=";",this.abbreviations=function(e,t){if(!e||!e.qNumericalAbbreviation)return z;var r={};return e.qNumericalAbbreviation.split(t).forEach(function(e){var t=e.split(":");2===t.length&&(r[t[0]]=t[1])}),r}(t,this.patternSeparator),this.prepare()}return function(e,t,r){t&&P(e.prototype,t),r&&P(e,r)}(e,[{key:"clone",value:function(){var t=new e(this.localeInfo,this.pattern,this.thousandDelimiter,this.decimalDelimiter,this.type);return t.subtype=this.subtype,t}},{key:"format",value:function(e,t,r,n){return this.prepare(t,r,n),this.formatValue(e)}},{key:"prepare",value:function(e,t,r){var n;void 0===e&&(e=this.pattern),void 0===t&&(t=this.thousandDelimiter),void 0===r&&(r=this.decimalDelimiter),e?(this._prepared={positive:{d:r,t:t,abbreviate:!1,isFunctional:!1,prefix:"",postfix:""},negative:{d:r,t:t,abbreviate:!1,isFunctional:!1,prefix:"",postfix:""},zero:{d:r,t:t,abbreviate:!1,isFunctional:!1,prefix:"",postfix:""}},n=this._prepared,e=e.split(this.patternSeparator),n.positive.pattern=e[0],n.negative.pattern=e[1],n.zero.pattern=e[2],X.test(e[0])&&(n.positive.isFunctional=!0),e[1]?X.test(e[1])&&(n.negative.isFunctional=!0):n.negative=!1,e[2]?X.test(e[2])&&(n.zero.isFunctional=!0):n.zero=!1,n.positive.isFunctional||te(n.positive,t,r),n.negative&&!n.negative.isFunctional&&te(n.negative,t,r),n.zero&&!n.zero.isFunctional&&te(n.zero,t,r)):this._prepared={pattern:!1}}},{key:"formatValue",value:function(e){var t,r,n,a,i,o,u,c,l,f=this._prepared,s="",p="",h=e;if(isNaN(e))return"".concat(h);if(e=+e,!1===f.pattern)return e.toString();if(0===e&&f.zero)return(f=f.zero).pattern;if(e<0&&f.negative?(f=f.negative,e=-e):f=f.positive,i=f.d,o=f.t,f.isFunctional)e=Z(e,f.pattern,i);else{if(f.percentage&&(e*=100),f.abbreviate){var d,v,m=Object.keys(this.abbreviations).map(function(e){return parseInt(e,10)}).sort(function(e,t){return e-t}),y=m[0];for(u=0,r=Number(Number(e).toExponential().split("e")[1]);y<=r&&u<m.length;)y=m[++u];u>0&&(d=m[u-1]),d&&r>0&&d>0?v=d:(r<0&&d<0||!d)&&(y<0&&y-r<=f.maxPrecision?v=y:d<=r&&!(y>0&&-r<=f.maxPrecision)&&(v=d)),v&&(s=this.abbreviations[v],e/=Math.pow(10,v))}if(n=Math.abs(e),t=f.temp,l=(c=f.numericPattern).split(i)[1],"I"===this.type&&(e=Math.round(e)),a=e,l||"#"!==c.slice(-1)[0])if(n>=1e15||n>0&&n<=1e-14)e=n?n.toExponential(15).replace(/\.?0+(?=e)/,""):"0";else{var g=Number(e.toFixed(Math.min(20,l?l.length:0)).split(".")[0]),b=c.split(i)[0];if(b+=i,e=_()(b,g)||"0",l){var q=Math.max(0,Math.min(14,l.length)),x=l.replace(/#+$/,"").length,M=("I"===this.type?0:n%1).toFixed(q).slice(2).replace(/0+$/,"");for(u=M.length;u<x;u++)M+="0";M&&(e+=i+M)}else 0===g&&(a=0)}else if(n>=Math.pow(10,t)||n<1||n<1e-4)0===e?e="0":n<1e-4||n>=1e20?(e=(e=a.toExponential(Math.max(1,Math.min(14,t))-1)).replace(/\.?0+(?=e)/,""),p=""):(e=e.toPrecision(Math.max(1,Math.min(14,t)))).indexOf(".")>=0&&(e=(e=e.replace(e.indexOf("e")<0?/0+$/:/\.?0+(?=e)/,"")).replace(".",i));else{for(c+=i,t=Math.max(0,Math.min(20,t-Math.ceil(Math.log(n)/Math.log(10)))),u=0;u<t;u++)c+="#";e=_()(c,e)}e=e.replace(f.numericRegex,function(e){return e===o?f.groupTemp:e===i?f.decTemp:""}),a<0&&!/^-/.test(e)&&(e="-".concat(e))}return f.prefix+e+p+s+f.postfix}}],[{key:"getStaticFormatter",value:function(){return{prepare:function(){},formatValue:function(e){return"".concat(e)}}}}]),e}();function ne(e,t,r,n,a){var i=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return H(re,t)}(a,e,t,r,n);function o(e){return i.formatValue(e)}return o.format=function(e,t,r,n){return i.format(t,e,r,n)},o.pattern=function(e){return e&&(i.pattern=e,i.prepare()),i.pattern},o}function ae(e,t,r){return(ae=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&ie(a,r.prototype),a}).apply(null,arguments)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ce=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],le=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],fe=["January","February","March","April","May","June","July","August","September","October","November","December"],se=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function pe(e,t){for(var r=e.length;r<t;r++)e="0".concat(e);return e}function he(e){var t=e.toString().split(".");return t[1]?t=Number("0.".concat(t[1])):0}function de(e,t){var r,n=function(e){var t=e,r=24*he(t),n=60*he(r),a=60*he(n),i=1e3*he(a);return{d:Math.floor(t),h:Math.floor(r),m:Math.floor(n),s:Math.floor(a),f:Math.round(i)}}(e),a=n.d,i=n.h,o=n.m,u=n.s,c=n.f,l=0;/w+|t+/gi.test(t)&&(r=new Date(1899,11,30+Math.floor(e),0,0,86400*(e-Math.floor(e))),isNaN(r.getTime())&&(r=null)),/D+/gi.test(t)||(i+=24*a),/h+/gi.test(t)||(o+=60*i),/m+/gi.test(t)||(u+=60*o),/w+/gi.test(t)&&(l=r?r.getDay()-1:0)<0&&(l=6);var f="";return r&&(f=r.getHours()>=12?"pm":"am"),{year:0,month:0,day:l,date:a,h:i,m:o,s:u,f:c,t:f}}var ve=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var a,i=t||{};(i.qCalendarStrings||(i.qCalendarStrings={qLongDayNames:ce,qDayNames:le,qLongMonthNames:fe,qMonthNames:se}),this.localeInfo=i,this.locale_days=i.qCalendarStrings.qLongDayNames.slice(),this.locale_days_abbr=i.qCalendarStrings.qDayNames.slice(),this.locale_months=i.qCalendarStrings.qLongMonthNames.slice(),this.locale_months_abbr=i.qCalendarStrings.qMonthNames.slice(),r)||(r=(oe(a={},ye.TIME,i.qTimeFmt||"hh:mm:ss"),oe(a,ye.DATE,i.qDateFmt||"YYYY-MM-DD"),oe(a,ye.DATE_TIME,i.qTimestampFmt||"YYYY-MM-DD hh:mm:ss"),a)[n]);this.pattern=r}return function(e,t,r){t&&ue(e.prototype,t),r&&ue(e,r)}(e,[{key:"clone",value:function(){var t=new e(this.localeInfo,this.pattern);return t.subtype=this.subtype,t}},{key:"format",value:function(e,t){t||(t=this.pattern?this.pattern:"YYYY-MM-DD hh:mm:ss"),t=t.replace(/\[.+]|\[|]/g,"");var r,n=/t+/gi.test(t);e instanceof Date?r=function(e,t){var r=e.getHours(),n=e.getDay()-1;return t&&((r%=12)||(r=12)),n<0&&(n=6),{year:e.getFullYear(),month:e.getMonth(),day:n,date:e.getDate(),h:r,m:e.getMinutes(),s:e.getSeconds(),f:e.getMilliseconds(),t:e.getHours()>=12?"pm":"am"}}(e,n):(e<0&&(e=-e,t="-".concat(t)),r=de(e,t));var a=function(e,t){return{"Y+|y+":{Y:"".concat(Number("".concat(t.year).slice(-2))),YY:pe("".concat(t.year).slice(-2),2),YYY:pe("".concat(t.year).slice(-3),3),def:function(e){return pe("".concat(t.year),e.length)}},"M+":{M:t.month+1,MM:pe("".concat(t.month+1),2),MMM:e.locale_months_abbr[t.month],def:e.locale_months[t.month]},"W+|w+":{W:t.day,WW:pe("".concat(t.day),2),WWW:e.locale_days_abbr[t.day],def:e.locale_days[t.day]},"D+|d+":{D:t.date,def:function(e){return pe("".concat(t.date),e.length)}},"h+|H+":{h:t.h,def:function(e){return pe("".concat(t.h),e.length)}},"m+":{m:t.m,def:function(e){return pe("".concat(t.m),e.length)}},"s+|S+":{s:t.s,def:function(e){return pe("".concat(t.s),e.length)}},"f+|F+":{def:function(e){var r="".concat(t.f),n=e.length-r.length;if(n>0)for(var a=0;a<n;a++)r+="0";else n<0&&(r=r.slice(0,e.length));return r}},"t{1,2}|T{1,2}":{def:function(e){var r=t.t;return e[0].toUpperCase()===e[0]&&(r=r.toUpperCase()),r=r.slice(0,e.length)}}}}(this,r),i=[];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);var u=new RegExp(i.join("|"),"g");return t.replace(u,function(e){var t,r,n;for(r in a)if(Object.prototype.hasOwnProperty.call(a,r)&&(t=new RegExp(r)).test(e))break;if(!t)return"";for(var i in a[r])if(i===e||i.toLowerCase()===e){void 0===(n=a[r][i])&&(n=a[r][i.toLowerCase()]);break}return void 0===n&&(n=a[r].def),"function"==typeof n&&(n=n(e)),n})}}]),e}();function me(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return ae(ve,t)}var ye={AUTO:"U",INTEGER:"I",NUMBER:"R",FIXED_TO:"F",MONEY:"M",DATE:"D",TIME:"T",DATE_TIME:"TS",INTERVAL:"IV"};function ge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"TS",r=me(arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,e,t);function n(e){return t!==ye.INTERVAL?function(e){return new Date(1899,11,30+Math.floor(e),0,0,0,864e5*(e-Math.floor(e)))}(e):e}function a(e){return e=n(e),r.format(e)}return a.format=function(e,t){return t=n(t),r.format(t,e)},a.locale=function(n){return r=me(n,e,t),this},a.qtype=function(e){return void 0!==e&&(t=e),t},a}function be(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.meta,n=t.id,a=t.key,i=t.localeInfo,o=t.fieldExtractor,u=t.value,c=t.type,l=u||("dimension"===c?function(e){return e.qElemNo}:function(e){return e.qValue}),f="dimension"===c?"first":"avg",s=function(e,t){if(e&&e.qNumFormat&&-1!==["D","T","TS","IV"].indexOf(e.qNumFormat.qType))return ge(e.qNumFormat.qFmt,e.qNumFormat.qType,t);var r="#",n=t&&void 0!==t.qThousandSep?t.qThousandSep:",",a=t&&void 0!==t.qDecimalSep?t.qDecimalSep:".",i="U",o=e&&!!e.qIsAutoFormat;return e&&e.qNumFormat?(r=e.qNumFormat.qFmt||r,n=e.qNumFormat.qThou||n,a=e.qNumFormat.qDec||a,i=e.qNumFormat.qType||i,o=o&&-1===["M"].indexOf(e.qNumFormat.qType)):o=!0,(o||"U"===i)&&(r="#".concat(a,"##A"),i="U"),ne(r,n,a,i,t)}(r,i),p={id:function(){return n},key:function(){return a},raw:function(){return r},title:function(){return r.qFallbackTitle||r.label},type:function(){return c},items:function(){return e||(e=o(p)),e},min:function(){return r.qMin},max:function(){return r.qMax},value:l,label:function(e){return e.qText||""},reduce:f,formatter:function(){return s},tags:function(){return r.qTags}};return p}function qe(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function xe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return"K"!==t.raw().qMode?null:function(e,t,r,n){var a="/qStackedDataPages/*/qData",i=t.raw(),u=y(a,i);if(!u||!u[0])return null;for(var c=o(u[0],e.children||function(e){return e.qSubNodes}),l=c.height,f=[],s=function(o){var u=n.normalizeConfig(e,t),c=u.props,l=u.main,s=Object.keys(c);f[o]={propsArr:s,props:c,main:l};var p=null,h=0===o;if(o>0){var d=i.qEffectiveInterColumnSortOrder[o-1];o>i.qEffectiveInterColumnSortOrder.length&&(d=i.qDimensionInfo.length),p=r.fields[d]}var v=p?b(p,{cube:i,cache:r}):a;s.forEach(function(e){var t=c[e];(t.fields?t.fields:[t]).forEach(function(e){if(e.field){var t=b(e.field,{cube:i,cache:r});if(t===v)e.isSame=!0;else if(h)e.isDescendant=!0,e.path="".concat(t,"/data");else{var n=t.match(/\//g).length>v.match(/\//g).length,a="";a=n?"".concat(t.replace(v,"").replace(/^\/\*/,""),"/data"):Math.ceil((v.match(/\//g).length-t.match(/\//g).length)/2),e.isDescendant=n,e.path=a}}})})},p=0;p<=l;p++)s(p);var h=[],d=0;return c.each(function(e){var t=h[d++]=e.data,r=f[e.depth].propsArr,n=f[e.depth].props,a=f[e.depth].main;e.data={value:"function"==typeof a.value?a.value(t):t},r.forEach(function(r){var a,i=n[r],o=i.fields?i.fields:[i];i.fields&&(a=[]),o.forEach(function(n){var o,u=function(e){return e};if("primitive"===n.type)o=n.value;else if("function"==typeof n.value&&(u=function(e,t){return n.value(e,t)}),n.field){if(n.isSame)o=t;else if(n.isDescendant)o=y(n.path,e),Array.isArray(o)&&(o=o.map(u),u=n.reduce||function(e){return e.join(", ")});else if(n.path){for(var c=n.path||0,l=e,f=0;f<c;f++)l=l.parent;o=l.data.value}}else o=t;i.fields?a.push(u(o,e)):(e.data[r]={value:u(o,e)},n.source&&(e.data[r].source={field:n.source}))}),a&&(e.data[r]={value:"function"==typeof i.value?i.value(a,e):a})})}),c}(e,t,r,n)}function Me(e,t,r,n,i){return(t[e]||[]).map(function(t,o){var u="".concat(n?"".concat(n,"/"):"").concat(e,"/").concat(o),c={instance:be(a()({id:"".concat(r?"".concat(r,"/"):"").concat(u),key:u,meta:t},i))};return c.attrDims=Me("qAttrDimInfo",t,r,u,a()({},i,{value:function(e){return e.qElemNo},type:"dimension"})),c.attrExps=Me("qAttrExprInfo",t,r,u,a()({},i,{value:function(e){return e.qNum},type:"measure"})),c.measures=Me("qMeasureInfo",t,r,u,a()({},i,{value:function(e){return e.qValue},type:"measure"})),c})}function Ae(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.key,i=r.data,o=r.config,u=void 0===o?{}:o,c={fields:[],wrappedFields:[],allFields:[]},l=i;if(!l)throw new Error('Missing "data" input');if(!l.qDimensionInfo)throw new Error('The "data" input is not recognized as a hypercube');var f=Ae.util,s={cache:c,cube:l,localeInfo:u.localeInfo,fieldExtractor:null,pages:null},p={key:function(){return n},raw:function(){return l},field:function(e){return function(e,t){var r=t.cache;if("number"==typeof e)return r.fields[e];var n=r.allFields;if("function"==typeof e){for(var a=0;a<n.length;a++)if(e(n[a]))return n[a];return!1}if("string"==typeof e){for(var i=0;i<n.length;i++)if(n[i].key()===e||n[i].title()===e)return n[i]}else if(e&&-1!==n.indexOf(e))return e;throw Error("Field not found: ".concat(e))}(e,s)},fields:function(){return c.fields.slice()},extract:function(e){return s.extractor(e,p,c,f)},hierarchy:function(e){return xe(e,p,c,f)},_cache:function(){return c}};"K"===l.qMode||"T"===l.qMode||!l.qMode&&l.qNodesOnDim?(s.extractor=k,s.pages="K"===l.qMode?l.qStackedDataPages:l.qTreeDataPages):"S"===l.qMode?(s.extractor=D,s.pages=l.qDataPages):s.ectractor=function(){return[]},s.fieldExtractor=function(e){return s.extractor({field:e},p,c,f)};var h="S"===l.qMode?function(e){return e.qElemNumber}:void 0,d="S"===l.qMode?function(e){return e.qNum}:void 0;(e=c.wrappedFields).push.apply(e,qe(Me("qDimensionInfo",l,n,"",a()({},s,{value:h,type:"dimension"})))),(t=c.wrappedFields).push.apply(t,qe(Me("qMeasureInfo",l,n,"",a()({},s,{value:d,type:"measure"})))),c.fields=c.wrappedFields.map(function(e){return e.instance});return function e(t){t.forEach(function(t){c.allFields.push(t.instance),e(t.measures),e(t.attrDims),e(t.attrExps)})}(c.wrappedFields),p}function De(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Se=[["qHyperCube","qHyperCubeDef"],["qTreeData","qTreeDataDef"],["qDimensionInfo","qDimensions"],["qMeasureInfo","qMeasures"],["qAttrDimInfo","qAttributeDimensions"],["qAttrExprInfo","qAttributeExpressions"]],Ie=/\/qDimensionInfo(?:\/(\d+))?/,Ee=/\/qMeasureInfo\/(\d+)/,we=/\/qAttrDimInfo\/(\d+)(?:\/(\d+))?/,Ce=/\/qAttrExprInfo\/(\d+)/,Oe=/\/?qHyperCube/,Fe=/\/?qTreeData/,Te=function(e){return"".concat(e.substr(0,e.indexOf("/qHyperCubeDef")+14))},Ne=function(e){return"".concat(e.substr(0,e.indexOf("/qTreeDataDef")+13))};function je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=t.byCells,a=t.primarySource,i=[],o={},u=e.isActive(),c=!1;return e.brushes().forEach(function(e){var t=function(e,t){var r=e,n=-1,a=-1,i="",o=function(e){return e};Oe.test(e)?(i="".concat(r.substr(0,r.indexOf("qHyperCube")+10)),o=Te):Fe.test(e)&&(i="".concat(r.substr(0,r.indexOf("qTreeData")+9)),o=Ne);var u=!0;if(Ie.test(e)&&(n=+Ie.exec(e)[1]),Ee.test(e)&&(a=+Ee.exec(e)[1]),we.test(e)){a=-1,n=0;var c=+we.exec(r)[2];isNaN(c)||(n=c,r=r.replace(/\/\d+$/,"")),u=!1}if(Ce.test(e)){var l=a;if(t){a=0;var f=y(i,t);a+=(f.qMeasureInfo||[]).length,n>-1?(a=f.qDimensionInfo.slice(0,n).reduce(function(e,t){return e+t.qAttrExprInfo.length},a),n=-1):(a=f.qDimensionInfo.reduce(function(e,t){return e+t.qAttrExprInfo.length},a),a=f.qMeasureInfo.slice(0,l).reduce(function(e,t){return e+t.qAttrExprInfo.length},a)),a+=+Ce.exec(r)[1]}else n>-1?(n=-1,a=+Ce.exec(r)[1]):a+=+Ce.exec(r)[1]+1}return Se.forEach(function(e){var t=De(e,2),n=t[0],a=t[1];r=r.replace(n,a)}),u&&(r=o(r)),r&&"/"!==r[0]&&(r="/".concat(r)),{measureIdx:a,dimensionIdx:n,path:r}}(e.id,r);if("range"===e.type&&t.measureIdx>-1&&t.dimensionIdx>-1){var u=e.brush.ranges();u.length&&(c=!0,o.multiRangeSelectTreeDataValues||(o.multiRangeSelectTreeDataValues={path:t.path,ranges:[]}),u.forEach(function(e){return o.multiRangeSelectTreeDataValues.ranges.push({qMeasureIx:t.measureIdx,qDimensionIx:t.dimensionIdx,qRange:{qMin:e.min,qMax:e.max,qMinInclEq:!0,qMaxInclEq:!0}})}))}else{if("range"===e.type&&t.measureIdx>-1){var l=e.brush.ranges();l.length&&(c=!0,o.rangeSelectHyperCubeValues||(o.rangeSelectHyperCubeValues={path:t.path,ranges:[]}),l.forEach(function(e){return o.rangeSelectHyperCubeValues.ranges.push({qMeasureIx:t.measureIdx,qRange:{qMin:e.min,qMax:e.max,qMinInclEq:!0,qMaxInclEq:!0}})}))}if("range"===e.type&&t.dimensionIdx>-1){var f=e.brush.ranges();f.length&&(c=!0,o.selectHyperCubeContinuousRange||(o.selectHyperCubeContinuousRange={path:t.path,ranges:[]}),f.forEach(function(e){return o.selectHyperCubeContinuousRange.ranges.push({qDimIx:t.dimensionIdx,qRange:{qMin:e.min,qMax:e.max,qMinInclEq:!0,qMaxInclEq:!1}})}))}if("value"===e.type&&t.dimensionIdx>-1)if(n)o.selectHyperCubeCells||(o.selectHyperCubeCells={path:t.path,cols:[]}),o.selectHyperCubeCells.cols.push(t.dimensionIdx),e.id!==a&&(a||o.selectHyperCubeCells.values)||(o.selectHyperCubeCells.values=e.brush.values().map(function(e){return+e}).filter(function(e){return!isNaN(e)}),c=!!o.selectHyperCubeCells.values.length);else{var s=e.brush.values().map(function(e){return+e}).filter(function(e){return!isNaN(e)});c=!!s.length,i.push({params:[t.path,t.dimensionIdx,s,!1],method:"selectHyperCubeValues"})}}}),!c&&u?[{method:"resetMadeSelections",params:[]}]:(o.rangeSelectHyperCubeValues&&i.push({method:"rangeSelectHyperCubeValues",params:[o.rangeSelectHyperCubeValues.path,o.rangeSelectHyperCubeValues.ranges,[],!0]}),o.selectHyperCubeContinuousRange&&i.push({method:"selectHyperCubeContinuousRange",params:[o.selectHyperCubeContinuousRange.path,o.selectHyperCubeContinuousRange.ranges]}),o.selectHyperCubeCells&&i.push({method:"selectHyperCubeCells",params:[o.selectHyperCubeCells.path,o.selectHyperCubeCells.values,o.selectHyperCubeCells.cols]}),o.multiRangeSelectTreeDataValues&&i.push({method:"multiRangeSelectTreeDataValues",params:[o.multiRangeSelectTreeDataValues.path,o.multiRangeSelectTreeDataValues.ranges]}),i)}function ke(e){Ae.util=e.data("matrix").util,e.data("q",Ae),e.formatter("q-number",ne),e.formatter("q-time",ge)}r.d(t,"default",function(){return ke}),ke.qBrushHelper=je,ke.selections=je}]).default});
//# sourceMappingURL=picasso-q.js.map