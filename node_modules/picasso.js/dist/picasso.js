/*!
 * picasso.js v0.11.0
 * Copyright (c) 2018 QlikTech International AB
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.picasso=e():t.picasso=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===i.call(t)},a=function(t){if(!t||"[object Object]"!==i.call(t))return!1;var e,n=r.call(t,"constructor"),o=t.constructor&&t.constructor.prototype&&r.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!o)return!1;for(e in t);return void 0===e||r.call(t,e)};t.exports=function t(){var e,n,r,i,s,c,u=arguments[0],l=1,h=arguments.length,f=!1;for("boolean"==typeof u&&(f=u,u=arguments[1]||{},l=2),(null==u||"object"!=typeof u&&"function"!=typeof u)&&(u={});l<h;++l)if(null!=(e=arguments[l]))for(n in e)r=u[n],u!==(i=e[n])&&(f&&i&&(a(i)||(s=o(i)))?(s?(s=!1,c=r&&o(r)?r:[]):c=r&&a(r)?r:{},u[n]=t(f,c,i)):void 0!==i&&(u[n]=i));return u}},function(t,e){var n={};function r(){r.init.call(this)}n.isObject=function(t){return"object"==typeof t&&null!==t},n.isNumber=function(t){return"number"==typeof t},n.isUndefined=function(t){return void 0===t},n.isFunction=function(t){return"function"==typeof t},t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.init=function(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(t){if(!n.isNumber(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,i,o,a,s;if(this._events||(this._events={}),"error"===t&&!this._events.error)throw(e=arguments[1])instanceof Error?e:Error('Uncaught, unspecified "error" event.');if(r=this._events[t],n.isUndefined(r))return!1;if(n.isFunction(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,o=new Array(i-1),a=1;a<i;a++)o[a-1]=arguments[a];r.apply(this,o)}else if(n.isObject(r)){for(i=arguments.length,o=new Array(i-1),a=1;a<i;a++)o[a-1]=arguments[a];for(i=(s=r.slice()).length,a=0;a<i;a++)s[a].apply(this,o)}return!0},r.prototype.addListener=function(t,e){var i;if(!n.isFunction(e))throw TypeError("listener must be a function");(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n.isFunction(e.listener)?e.listener:e),this._events[t]?n.isObject(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,n.isObject(this._events[t])&&!this._events[t].warned)&&((i=n.isUndefined(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,n.isFunction(console.error)&&console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),n.isFunction(console.trace)&&console.trace()));return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){if(!n.isFunction(e))throw TypeError("listener must be a function");var r=!1;function i(){this.removeListener(t,i),r||(r=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},r.prototype.removeListener=function(t,e){var r,i,o,a;if(!n.isFunction(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(o=(r=this._events[t]).length,i=-1,r===e||n.isFunction(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(n.isObject(r)){for(a=o;a-- >0;)if(r[a]===e||r[a].listener&&r[a].listener===e){i=a;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],n.isFunction(r))this.removeListener(t,r);else if(Array.isArray(r))for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?n.isFunction(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.listenerCount=function(t,e){return t._events&&t._events[e]?n.isFunction(t._events[e])?1:t._events[e].length:0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),i=n(8);function o(t,e,n){var o,a,s,c={};if(void 0!==n?(c=e,i.array(n)?o=n:i.primitive(n)?a=n:n&&n.sel&&(o=[n])):void 0!==e&&(i.array(e)?o=e:i.primitive(e)?a=e:e&&e.sel?o=[e]:c=e),i.array(o))for(s=0;s<o.length;++s)i.primitive(o[s])&&(o[s]=r.vnode(void 0,void 0,void 0,o[s],void 0));return"s"!==t[0]||"v"!==t[1]||"g"!==t[2]||3!==t.length&&"."!==t[3]&&"#"!==t[3]||function t(e,n,r){if(e.ns="http://www.w3.org/2000/svg","foreignObject"!==r&&void 0!==n)for(var i=0;i<n.length;++i){var o=n[i].data;void 0!==o&&t(o,n[i].children,n[i].sel)}}(c,o,t),r.vnode(t,c,o,a,void 0)}e.h=o,e.default=o},function(t,e,n){"use strict";function r(t,e){var n=t.type,r=e.data.on;r&&r[n]&&function t(e,n,r){if("function"==typeof e)e.call(n,r,n);else if("object"==typeof e)if("function"==typeof e[0])if(2===e.length)e[0].call(n,e[1],r,n);else{var i=e.slice(1);i.push(r),i.push(n),e[0].apply(n,i)}else for(var o=0;o<e.length;o++)t(e[o])}(r[n],e,t)}function i(t,e){var n,i=t.data.on,o=t.listener,a=t.elm,s=e&&e.data.on,c=e&&e.elm;if(i!==s){if(i&&o)if(s)for(n in i)s[n]||a.removeEventListener(n,o,!1);else for(n in i)a.removeEventListener(n,o,!1);if(s){var u=e.listener=t.listener||function t(e){r(e,t.vnode)};if(u.vnode=e,i)for(n in s)i[n]||c.addEventListener(n,u,!1);else for(n in s)c.addEventListener(n,u,!1)}}}Object.defineProperty(e,"__esModule",{value:!0}),e.eventListenersModule={create:i,update:i,destroy:i},e.default=e.eventListenersModule},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="undefined"!=typeof window&&window.requestAnimationFrame||setTimeout,i=function(t){r(function(){r(t)})};function o(t,e,n){i(function(){t[e]=n})}function a(t,e){var n,r,i=e.elm,a=t.data.style,s=e.data.style;if((a||s)&&a!==s){a=a||{},s=s||{};var c="delayed"in a;for(r in a)s[r]||("-"===r[0]&&"-"===r[1]?i.style.removeProperty(r):i.style[r]="");for(r in s)if(n=s[r],"delayed"===r&&s.delayed)for(var u in s.delayed)n=s.delayed[u],c&&n===a.delayed[u]||o(i.style,u,n);else"remove"!==r&&n!==a[r]&&("-"===r[0]&&"-"===r[1]?i.style.setProperty(r,n):i.style[r]=n)}}e.styleModule={create:a,update:a,destroy:function(t){var e,n,r=t.elm,i=t.data.style;if(i&&(e=i.destroy))for(n in e)r.style[n]=e[n]},remove:function(t,e){var n=t.data.style;if(n&&n.remove){var r,i=t.elm,o=0,a=n.remove,s=0,c=[];for(r in a)c.push(r),i.style[r]=a[r];for(var u=getComputedStyle(i)["transition-property"].split(", ");o<u.length;++o)-1!==c.indexOf(u[o])&&s++;i.addEventListener("transitionend",function(t){t.target===i&&--s,0===s&&e()})}else e()}},e.default=e.styleModule},function(t,e,n){"use strict";function r(t,e){var n,r,i=e.elm,o=t.data.class,a=e.data.class;if((o||a)&&o!==a){for(r in o=o||{},a=a||{},o)a[r]||i.classList.remove(r);for(r in a)(n=a[r])!==o[r]&&i.classList[n?"add":"remove"](r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.classModule={create:r,update:r},e.default=e.classModule},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="http://www.w3.org/1999/xlink",i="http://www.w3.org/XML/1998/namespace",o=58,a=120;function s(t,e){var n,s=e.elm,c=t.data.attrs,u=e.data.attrs;if((c||u)&&c!==u){for(n in c=c||{},u=u||{}){var l=u[n];c[n]!==l&&(!0===l?s.setAttribute(n,""):!1===l?s.removeAttribute(n):n.charCodeAt(0)!==a?s.setAttribute(n,l):n.charCodeAt(3)===o?s.setAttributeNS(i,n,l):n.charCodeAt(5)===o?s.setAttributeNS(r,n,l):s.setAttribute(n,l))}for(n in c)n in u||s.removeAttribute(n)}}e.attributesModule={create:s,update:s},e.default=e.attributesModule},function(t,e,n){"use strict";n.r(e);var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=/([astvzqmhlc])([^astvzqmhlc]*)/gi,o=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function a(t){var e=[],n="".concat(t).trim();return"M"!==n[0]&&"m"!==n[0]?e:(n.replace(i,function(t,n,i){var a=n.toLowerCase();if(i=function(t){var e=t.match(o);return e?e.map(Number):[]}(i),"m"===a&&i.length>2&&(e.push([n].concat(i.splice(0,2))),a="l",n="m"===n?"l":"L"),i.length<r[a])return"";for(e.push([n].concat(i.splice(0,r[a])));i.length>=r[a]&&i.length&&r[a];)e.push([n].concat(i.splice(0,r[a])));return""}),e)}function s(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){var n=t.x*Math.cos(e)-t.y*Math.sin(e),r=t.y*Math.cos(e)+t.x*Math.sin(e);t.x=n,t.y=r}function l(t,e,n){t.x+=e,t.y+=n}var h=function(t){if(t&&(!t.Path2D||!function(t){var e=t.document.createElement("canvas").getContext("2d"),n=new t.Path2D("M0 0 L1 1");return e.strokeStyle="red",e.lineWidth=1,e.stroke(n),255===e.getImageData(0,0,1,1).data[0]}(t))){var e=function(){function t(e){var n;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.segments=[],e&&e instanceof t?(n=this.segments).push.apply(n,s(e.segments)):e&&(this.segments=a(e))}return function(t,e,n){e&&c(t.prototype,e),n&&c(t,n)}(t,[{key:"addPath",value:function(e){var n;e&&e instanceof t&&(n=this.segments).push.apply(n,s(e.segments))}},{key:"moveTo",value:function(t,e){this.segments.push(["M",t,e])}},{key:"lineTo",value:function(t,e){this.segments.push(["L",t,e])}},{key:"arc",value:function(t,e,n,r,i,o){this.segments.push(["AC",t,e,n,r,i,!!o])}},{key:"arcTo",value:function(t,e,n,r,i){this.segments.push(["AT",t,e,n,r,i])}},{key:"closePath",value:function(){this.segments.push(["Z"])}},{key:"bezierCurveTo",value:function(t,e,n,r,i,o){this.segments.push(["C",t,e,n,r,i,o])}},{key:"quadraticCurveTo",value:function(t,e,n,r){this.segments.push(["Q",t,e,n,r])}},{key:"rect",value:function(t,e,n,r){this.segments.push(["R",t,e,n,r])}}]),t}(),n=t.CanvasRenderingContext2D.prototype.fill,r=t.CanvasRenderingContext2D.prototype.stroke;t.CanvasRenderingContext2D.prototype.fill=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var o="nonzero";0===e.length||1===e.length&&"string"==typeof e[0]?n.apply(this,e):(2===arguments.length&&(o=e[1]),i(this,e[0].segments),n.call(this,o))},t.CanvasRenderingContext2D.prototype.stroke=function(t){t?(i(this,t.segments),r.call(this)):r.call(this)},t.Path2D=e}function i(t,e){var n,r,i,o,a,s,c,h,f,d,y,p,g,v,m,x,b,w,_,k,M,S={x:0,y:0};"S"!==m&&"s"!==m&&"C"!==m&&"c"!==m&&(b=null,w=null),"T"!==m&&"t"!==m&&"Q"!==m&&"q"!==m&&(_=null,k=null),t.beginPath();for(var R=0;R<e.length;++R){var A=e[R];switch(m=A[0]){case"m":c+=A[1],f+=A[2],t.moveTo(c,f);break;case"M":c=A[1],f=A[2],t.moveTo(c,f);break;case"l":c+=A[1],f+=A[2],t.lineTo(c,f);break;case"L":c=A[1],f=A[2],t.lineTo(c,f);break;case"H":c=A[1],t.lineTo(c,f);break;case"h":c+=A[1],t.lineTo(c,f);break;case"V":f=A[1],t.lineTo(c,f);break;case"v":f+=A[1],t.lineTo(c,f);break;case"a":case"A":"a"===m?(c+=A[6],f+=A[7]):(c=A[6],f=A[7]),y=A[1],i=A[4],o=A[5],l(a={x:c,y:f},-S.x,-S.y),u(a,-(s=Math.atan2(a.y,a.x))),p=a.x/2,(x={x:0,y:0}).x=a.x/2,x.y=o&&!i||!o&&i?Math.sqrt(y*y-p*p):-Math.sqrt(y*y-p*p),r=Math.atan2(-x.y,-x.x),n=Math.atan2(a.y-x.y,a.x-x.x),r+=s,n+=s,u(a,s),u(x,s),l(a,S.x,S.y),l(x,S.x,S.y),t.arc(x.x,x.y,y,r,n,!o);break;case"C":b=A[3],w=A[4],c=A[5],f=A[6],t.bezierCurveTo(A[1],A[2],b,w,c,f);break;case"c":t.bezierCurveTo(A[1]+c,A[2]+f,A[3]+c,A[4]+f,A[5]+c,A[6]+f),b=A[3]+c,w=A[4]+f,c+=A[5],f+=A[6];break;case"S":null!==b&&null!==b||(b=c,w=f),t.bezierCurveTo(2*c-b,2*f-w,A[1],A[2],A[3],A[4]),b=A[1],w=A[2],c=A[3],f=A[4];break;case"s":null!==b&&null!==b||(b=c,w=f),t.bezierCurveTo(2*c-b,2*f-w,A[1]+c,A[2]+f,A[3]+c,A[4]+f),b=A[1]+c,w=A[2]+f,c+=A[3],f+=A[4];break;case"Q":_=A[1],k=A[2],c=A[3],f=A[4],t.quadraticCurveTo(_,k,c,f);break;case"q":_=A[1]+c,k=A[2]+f,c+=A[3],f+=A[4],t.quadraticCurveTo(_,k,c,f);break;case"T":null!==_&&null!==_||(_=c,k=f),_=2*c-_,k=2*f-k,c=A[1],f=A[2],t.quadraticCurveTo(_,k,c,f);break;case"t":null!==_&&null!==_||(_=c,k=f),_=2*c-_,k=2*f-k,c+=A[1],f+=A[2],t.quadraticCurveTo(_,k,c,f);break;case"z":case"Z":t.closePath();break;case"AC":c=A[1],f=A[2],y=A[3],r=A[4],n=A[5],M=A[6],t.arc(c,f,y,r,n,M);break;case"AT":h=A[1],d=A[2],c=A[3],f=A[4],y=A[5],t.arcTo(h,d,c,f,y);break;case"R":c=A[1],f=A[2],g=A[3],v=A[4],t.rect(c,f,g,v)}S.x=c,S.y=f}}};"undefined"!=typeof window&&h(window);var f=n(0),d=n.n(f),y={version:"0.11.0"},p=[];function g(t){t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height)}function v(t,e){return function(t,e){var n={x:0,y:0,width:0,height:0},r={x:0,y:0,width:0,height:0};if("function"==typeof t.getBoundingClientRect){var i=t.getBoundingClientRect();n.width=i.width,n.height=i.height}else n.width=t.width||0,n.height=t.height||0;return void 0!==e.size&&(n.width=isNaN(e.size.width)?n.width:e.size.width,n.height=isNaN(e.size.height)?n.height:e.size.height),void 0!==e.logicalSize?(r.width=isNaN(e.logicalSize.width)?n.width:e.logicalSize.width,r.height=isNaN(e.logicalSize.height)?n.height:e.logicalSize.height,r.align=isNaN(e.logicalSize.align)?.5:Math.min(Math.max(e.logicalSize.align,0),1),r.preserveAspectRatio=e.logicalSize.preserveAspectRatio):(r.width=n.width,r.height=n.height,r.preserveAspectRatio=!1),g(r),g(n),[r,n]}(t,e)}function m(t){var e={logicalSize:{preserveAspectRatio:!1},center:{minWidthRatio:.5,minHeightRatio:.5,minWidth:0,minHeight:0}};return d()(!0,e,t),e.center.minWidthRatio=Math.min(Math.max(e.center.minWidthRatio,0),1),e.center.minHeightRatio=Math.min(Math.max(e.center.minHeightRatio,0),1),e.center.minWidth=Math.max(e.center.minWidth,0),e.center.minHeight=Math.max(e.center.minHeight,0),e}function x(t){return"number"==typeof t&&!isNaN(t)}function b(t){return"number"!=typeof t||isNaN(t)}function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _(t){for(var e=t.length,n=NaN,r=NaN,i=NaN,o=NaN,a=0;a<e;a++)n=isNaN(n)?t[a].x:Math.min(n,t[a].x),r=isNaN(r)?t[a].x:Math.max(r,t[a].x),i=isNaN(i)?t[a].y:Math.min(i,t[a].y),o=isNaN(o)?t[a].y:Math.max(o,t[a].y);return[n,i,r,o]}function k(t){return[{x:t.x1||0,y:t.y1||0},{x:t.x2||0,y:t.y2||0}]}function M(t){return[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}]}function S(t){var e=w(_(t),4),n=e[0],r=e[1];return{x:n,y:r,width:e[2]-n,height:e[3]-r}}function R(t){return{x1:t[0].x,y1:t[0].y,x2:t[1].x,y2:t[1].y}}function A(t){var e=t||{},n=e.x,r=e.y,i=e.width,o=e.height,a=e.x1,s=e.x2,c=e.y1,u=e.y2,l=e.cx,h=e.cy,f=e.r,d=e.vertices;return x(l)&&x(h)&&x(f)?"circle":x(a)&&x(s)&&x(c)&&x(u)?"line":x(n)&&x(r)&&x(i)&&x(o)?"rect":x(n)&&x(r)?"point":Array.isArray(d)?"polygon":null}function O(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function j(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function z(t){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t,e,n){if(void 0===t.cachedSize){var r=t.config.requiredSize()(e,n);"object"===z(r)?(t.cachedSize=Math.ceil(r.size),t.edgeBleed=r.edgeBleed):t.cachedSize=Math.ceil(r)}return t.cachedSize}function E(t,e){switch(e.config.dock()){case"top":t.y+=e.cachedSize,t.height-=e.cachedSize;break;case"bottom":t.height-=e.cachedSize;break;case"left":t.x+=e.cachedSize,t.width-=e.cachedSize;break;case"right":t.width-=e.cachedSize}}function N(t,e){var n=e.edgeBleed;n&&(t.left=Math.max(t.left,n.left||0),t.right=Math.max(t.right,n.right||0),t.top=Math.max(t.top,n.top||0),t.bottom=Math.max(t.bottom,n.bottom||0))}function P(t,e,n){e.x<n.left&&(e.width-=n.left-e.x,e.x=n.left);var r=t.width-(e.x+e.width);r<n.right&&(e.width-=n.right-r),e.y<n.top&&(e.height-=n.top-e.y,e.y=n.top);var i=t.height-(e.y+e.height);i<n.bottom&&(e.height-=n.bottom-i)}function C(t,e,n,r,i){var o=d()({},e),a=d()({},n);return E(o,r),N(a,r),P(t,o,a),!!function(t,e,n){var r=Math.min(n.center.minWidth,t.width)||Math.max(t.width*n.center.minWidthRatio,1),i=Math.min(n.center.minHeight,t.height)||Math.max(t.height*n.center.minHeightRatio,1);return e.width>=r&&e.height>=i}(t,o,i)&&(E(e,r),N(n,r),!0)}function F(t){var e;return S((e=[]).concat.apply(e,j(t.map(M))))}function D(t,e,n,r){var i={x:n.x,y:n.y,width:n.width,height:n.height},o={x:n.x,y:n.y,width:n.width,height:n.height},a={};t.sort(function(t,e){return/^@/.test(e.config.dock())?-1:/^@/.test(t.config.dock())?1:t.config.displayOrder()-e.config.displayOrder()}).forEach(function(t){var s={},c={},u=t.config.dock();switch(u){case"top":s.height=c.height=t.cachedSize,s.width=e.width,c.width=i.width,s.x=e.x,c.x=i.x,s.y=c.y=i.y-t.cachedSize,i.y-=t.cachedSize,i.height+=t.cachedSize;break;case"bottom":s.x=e.x,c.x=i.x,s.y=c.y=i.y+i.height,s.width=e.width,c.width=i.width,s.height=c.height=t.cachedSize,i.height+=t.cachedSize;break;case"left":s.x=c.x=o.x-t.cachedSize,s.y=e.y,c.y=o.y,s.width=c.width=t.cachedSize,s.height=e.height,c.height=o.height,o.x-=t.cachedSize,o.width+=t.cachedSize;break;case"right":s.x=c.x=o.x+o.width,s.y=e.y,c.y=o.y,s.width=c.width=t.cachedSize,s.height=e.height,c.height=o.height,o.width+=t.cachedSize;break;default:s.x=c.x=n.x,s.y=c.y=n.y,s.width=c.width=n.width,s.height=c.height=n.height}if(/^@/.test(u)){var l=u.split(",").map(function(t){return a[t.replace("@","")]}).filter(function(t){return!!t});l.length>0&&(s=F(l.map(function(t){return t.outerRect})),c=F(l.map(function(t){return t.rect})))}else t.key&&(a[t.key]={rect:c,outerRect:s});!function(t,e,n,r){var i={x:r.width/n.width,y:r.height/n.height},o={left:0,top:0};if(n.preserveAspectRatio){var a=i.x<i.y,s=Math.min(i.x,i.y);i.x=s,i.y=s;var c=a?"height":"width",u=(r[c]-n[c]*i.x)*n.align;o.left=a?0:u,o.top=a?u:0}t.scaleRatio=i,t.margin=o,e.scaleRatio=i,e.margin=o,n.scaleRatio=i,n.margin=o}(c,s,e,r),t.instance.resize(c,s,e),t.cachedSize=void 0})}function L(t){var e=[],n=[],r=m(t),i=function(){};return i.addComponent=function(t,n){!function(t){["resize"].forEach(function(e){if("function"!=typeof t[e])throw new Error('Component is missing required function "'.concat(e,'"'))})}(t),i.removeComponent(t),e.push({instance:t,key:n,config:"function"==typeof t.dockConfig?t.dockConfig:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.dock,n=void 0===e?"":e,r=t.displayOrder,i=void 0===r?0:r,o=t.prioOrder,a=void 0===o?0:o,s=t.requiredSize,c=void 0===s?function(){return 0}:s,u=t.minimumLayoutMode,l=t.show,h=void 0===l||l,f=function(){};return f.requiredSize=function(t){return"function"==typeof t?(c=t,this):c},f.dock=function(t){return void 0===t?n:(n=t,this)},f.displayOrder=function(t){return void 0===t?i:(i=t,this)},f.prioOrder=function(t){return void 0===t?a:(a=t,this)},f.minimumLayoutMode=function(t){return void 0===t?u:(u=t,this)},f.show=function(t){return void 0===t?h:(h=!!t,this)},f}(t.dockConfig)})},i.removeComponent=function(t){var n=e.map(function(t){return t.instance}).indexOf(t);n>-1&&e.splice(n,1)},i.layout=function(t){var i=O(v(t,r),2),o=i[0],a=i[1];!function(t,e,n,r){for(var i=n.layoutModes||{},o=0;o<t.length;++o){var a=t[o],s=a.config.minimumLayoutMode(),c=a.config.show();c&&"object"===z(s)?c=i[s.width]&&i[s.height]&&r.width>=i[s.width].width&&r.height>=i[s.height].height:c&&void 0!==s&&(c=i[s]&&r.width>=i[s].width&&r.height>=i[s].height),c||(t.splice(o,1),e.push(a.instance),--o)}}(e,n,r,o);var s=function(t,e,n,r){var i={x:t.x,y:t.y,width:t.width,height:t.height},o={left:0,right:0,top:0,bottom:0},a=e.slice();a.sort(function(t,e){return t.config.prioOrder()-e.config.prioOrder()});for(var s=0;s<a.length;++s){var c=a[s];T(c,i,t),C(t,i,o,c,r)||(a.splice(s,1),n.push(c.instance),--s)}var u=e.filter(function(t){return-1!==a.indexOf(t)});return e.length=0,e.push.apply(e,j(u)),P(t,i,o),i}(o,e,n,r);return D(e,o,s,a),{visible:e.map(function(t){return t.instance}),hidden:n}},i.settings=function(t){r=m(t)},i}function I(t){return!!t.changedTouches}function B(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var W=Math.PI,$=2*W,q=$-1e-6;function V(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Y(){return new V}V.prototype=Y.prototype={constructor:V,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,c=r-e,u=o-t,l=a-e,h=u*u+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>1e-6)if(Math.abs(l*s-c*u)>1e-6&&i){var f=n-o,d=r-a,y=s*s+c*c,p=f*f+d*d,g=Math.sqrt(y),v=Math.sqrt(h),m=i*Math.tan((W-Math.acos((y+h-p)/(2*g*v)))/2),x=m/v,b=m/g;Math.abs(x-1)>1e-6&&(this._+="L"+(t+x*u)+","+(e+x*l)),this._+="A"+i+","+i+",0,0,"+ +(l*f>u*d)+","+(this._x1=t+b*s)+","+(this._y1=e+b*c)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),c=t+a,u=e+s,l=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+c+","+u:(Math.abs(this._x1-c)>1e-6||Math.abs(this._y1-u)>1e-6)&&(this._+="L"+c+","+u),n&&(h<0&&(h=h%$+$),h>q?this._+="A"+n+","+n+",0,1,"+l+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+l+","+(this._x1=c)+","+(this._y1=u):h>1e-6&&(this._+="A"+n+","+n+",0,"+ +(h>=W)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var U=Y,H=function(t){return function(){return t}},X=Math.abs,Z=Math.atan2,G=Math.cos,J=Math.max,Q=Math.min,K=Math.sin,tt=Math.sqrt,et=1e-12,nt=Math.PI,rt=nt/2,it=2*nt;function ot(t){return t>=1?rt:t<=-1?-rt:Math.asin(t)}function at(t){return t.innerRadius}function st(t){return t.outerRadius}function ct(t){return t.startAngle}function ut(t){return t.endAngle}function lt(t){return t&&t.padAngle}function ht(t,e,n,r,i,o,a){var s=t-n,c=e-r,u=(a?o:-o)/tt(s*s+c*c),l=u*c,h=-u*s,f=t+l,d=e+h,y=n+l,p=r+h,g=(f+y)/2,v=(d+p)/2,m=y-f,x=p-d,b=m*m+x*x,w=i-o,_=f*p-y*d,k=(x<0?-1:1)*tt(J(0,w*w*b-_*_)),M=(_*x-m*k)/b,S=(-_*m-x*k)/b,R=(_*x+m*k)/b,A=(-_*m+x*k)/b,O=M-g,j=S-v,z=R-g,T=A-v;return O*O+j*j>z*z+T*T&&(M=R,S=A),{cx:M,cy:S,x01:-l,y01:-h,x11:M*(i/w-1),y11:S*(i/w-1)}}var ft=function(){var t=at,e=st,n=H(0),r=null,i=ct,o=ut,a=lt,s=null;function c(){var c,u,l=+t.apply(this,arguments),h=+e.apply(this,arguments),f=i.apply(this,arguments)-rt,d=o.apply(this,arguments)-rt,y=X(d-f),p=d>f;if(s||(s=c=U()),h<l&&(u=h,h=l,l=u),h>et)if(y>it-et)s.moveTo(h*G(f),h*K(f)),s.arc(0,0,h,f,d,!p),l>et&&(s.moveTo(l*G(d),l*K(d)),s.arc(0,0,l,d,f,p));else{var g,v,m=f,x=d,b=f,w=d,_=y,k=y,M=a.apply(this,arguments)/2,S=M>et&&(r?+r.apply(this,arguments):tt(l*l+h*h)),R=Q(X(h-l)/2,+n.apply(this,arguments)),A=R,O=R;if(S>et){var j=ot(S/l*K(M)),z=ot(S/h*K(M));(_-=2*j)>et?(b+=j*=p?1:-1,w-=j):(_=0,b=w=(f+d)/2),(k-=2*z)>et?(m+=z*=p?1:-1,x-=z):(k=0,m=x=(f+d)/2)}var T=h*G(m),E=h*K(m),N=l*G(w),P=l*K(w);if(R>et){var C=h*G(x),F=h*K(x),D=l*G(b),L=l*K(b);if(y<nt){var I=_>et?function(t,e,n,r,i,o,a,s){var c=n-t,u=r-e,l=a-i,h=s-o,f=(l*(e-o)-h*(t-i))/(h*c-l*u);return[t+f*c,e+f*u]}(T,E,D,L,C,F,N,P):[N,P],B=T-I[0],W=E-I[1],$=C-I[0],q=F-I[1],V=1/K(function(t){return t>1?0:t<-1?nt:Math.acos(t)}((B*$+W*q)/(tt(B*B+W*W)*tt($*$+q*q)))/2),Y=tt(I[0]*I[0]+I[1]*I[1]);A=Q(R,(l-Y)/(V-1)),O=Q(R,(h-Y)/(V+1))}}k>et?O>et?(g=ht(D,L,T,E,h,O,p),v=ht(C,F,N,P,h,O,p),s.moveTo(g.cx+g.x01,g.cy+g.y01),O<R?s.arc(g.cx,g.cy,O,Z(g.y01,g.x01),Z(v.y01,v.x01),!p):(s.arc(g.cx,g.cy,O,Z(g.y01,g.x01),Z(g.y11,g.x11),!p),s.arc(0,0,h,Z(g.cy+g.y11,g.cx+g.x11),Z(v.cy+v.y11,v.cx+v.x11),!p),s.arc(v.cx,v.cy,O,Z(v.y11,v.x11),Z(v.y01,v.x01),!p))):(s.moveTo(T,E),s.arc(0,0,h,m,x,!p)):s.moveTo(T,E),l>et&&_>et?A>et?(g=ht(N,P,C,F,l,-A,p),v=ht(T,E,D,L,l,-A,p),s.lineTo(g.cx+g.x01,g.cy+g.y01),A<R?s.arc(g.cx,g.cy,A,Z(g.y01,g.x01),Z(v.y01,v.x01),!p):(s.arc(g.cx,g.cy,A,Z(g.y01,g.x01),Z(g.y11,g.x11),!p),s.arc(0,0,l,Z(g.cy+g.y11,g.cx+g.x11),Z(v.cy+v.y11,v.cx+v.x11),p),s.arc(v.cx,v.cy,A,Z(v.y11,v.x11),Z(v.y01,v.x01),!p))):s.arc(0,0,l,w,b,p):s.lineTo(N,P)}else s.moveTo(0,0);if(s.closePath(),c)return s=null,c+""||null}return c.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-nt/2;return[G(r)*n,K(r)*n]},c.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:H(+e),c):t},c.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:H(+t),c):e},c.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:H(+t),c):n},c.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:H(+t),c):r},c.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:H(+t),c):i},c.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:H(+t),c):o},c.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:H(+t),c):a},c.context=function(t){return arguments.length?(s=null==t?null:t,c):s},c};function dt(t){this._context=t}dt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var yt=function(t){return new dt(t)};function pt(t){return t[0]}function gt(t){return t[1]}var vt=function(){var t=pt,e=gt,n=H(!0),r=null,i=yt,o=null;function a(a){var s,c,u,l=a.length,h=!1;for(null==r&&(o=i(u=U())),s=0;s<=l;++s)!(s<l&&n(c=a[s],s,a))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(c,s,a),+e(c,s,a));if(u)return o=null,u+""||null}return a.x=function(e){return arguments.length?(t="function"==typeof e?e:H(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:H(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:H(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a},mt=function(){var t=pt,e=null,n=H(0),r=gt,i=H(!0),o=null,a=yt,s=null;function c(c){var u,l,h,f,d,y=c.length,p=!1,g=new Array(y),v=new Array(y);for(null==o&&(s=a(d=U())),u=0;u<=y;++u){if(!(u<y&&i(f=c[u],u,c))===p)if(p=!p)l=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=u-1;h>=l;--h)s.point(g[h],v[h]);s.lineEnd(),s.areaEnd()}p&&(g[u]=+t(f,u,c),v[u]=+n(f,u,c),s.point(e?+e(f,u,c):g[u],r?+r(f,u,c):v[u]))}if(d)return s=null,d+""||null}function u(){return vt().defined(i).curve(a).context(o)}return c.x=function(n){return arguments.length?(t="function"==typeof n?n:H(+n),e=null,c):t},c.x0=function(e){return arguments.length?(t="function"==typeof e?e:H(+e),c):t},c.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:H(+t),c):e},c.y=function(t){return arguments.length?(n="function"==typeof t?t:H(+t),r=null,c):n},c.y0=function(t){return arguments.length?(n="function"==typeof t?t:H(+t),c):n},c.y1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:H(+t),c):r},c.lineX0=c.lineY0=function(){return u().x(t).y(n)},c.lineY1=function(){return u().x(t).y(r)},c.lineX1=function(){return u().x(e).y(n)},c.defined=function(t){return arguments.length?(i="function"==typeof t?t:H(!!t),c):i},c.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),c):a},c.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),c):o},c},xt=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},bt=function(t){return t};_t(yt);function wt(t){this._curve=t}function _t(t){function e(e){return new wt(t(e))}return e._curve=t,e}wt.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var kt=Array.prototype.slice;Math.sqrt(1/3);var Mt=Math.sin(nt/10)/Math.sin(7*nt/10),St=(Math.sin(it/10),Math.cos(it/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12),function(){});function Rt(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function At(t){this._context=t}At.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Rt(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Rt(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Ot(t){this._context=t}Ot.prototype={areaStart:St,areaEnd:St,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Rt(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function jt(t){this._context=t}jt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Rt(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function zt(t,e){this._basis=new At(t),this._beta=e}zt.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,c=-1;++c<=n;)r=c/n,this._basis.point(this._beta*t[c]+(1-this._beta)*(i+r*a),this._beta*e[c]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};(function t(e){function n(t){return 1===e?new At(t):new zt(t,e)}return n.beta=function(e){return t(+e)},n})(.85);function Tt(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Et(t,e){this._context=t,this._k=(1-e)/6}Et.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Tt(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Tt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Nt=function t(e){function n(t){return new Et(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Pt(t,e){this._context=t,this._k=(1-e)/6}Pt.prototype={areaStart:St,areaEnd:St,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Tt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(t){return new Pt(t,e)}return n.tension=function(e){return t(+e)},n})(0);function Ct(t,e){this._context=t,this._k=(1-e)/6}Ct.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Tt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(t){return new Ct(t,e)}return n.tension=function(e){return t(+e)},n})(0);function Ft(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>et){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>et){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*u+t._x1*t._l23_2a-e*t._l12_2a)/l,a=(a*u+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function Dt(t,e){this._context=t,this._alpha=e}Dt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Ft(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Lt=function t(e){function n(t){return e?new Dt(t,e):new Et(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function It(t,e){this._context=t,this._alpha=e}It.prototype={areaStart:St,areaEnd:St,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ft(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(t){return e?new It(t,e):new Pt(t,0)}return n.alpha=function(e){return t(+e)},n})(.5);function Bt(t,e){this._context=t,this._alpha=e}Bt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ft(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(t){return e?new Bt(t,e):new Ct(t,0)}return n.alpha=function(e){return t(+e)},n})(.5);function Wt(t){this._context=t}Wt.prototype={areaStart:St,areaEnd:St,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function $t(t){return t<0?-1:1}function qt(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return($t(o)+$t(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Vt(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Yt(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function Ut(t){this._context=t}function Ht(t){this._context=new Xt(t)}function Xt(t){this._context=t}function Zt(t){this._context=t}function Gt(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}Ut.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Yt(this,this._t0,Vt(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Yt(this,Vt(this,n=qt(this,t,e)),n);break;default:Yt(this,this._t0,n=qt(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Ht.prototype=Object.create(Ut.prototype)).point=function(t,e){Ut.prototype.point.call(this,e,t)},Xt.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},Zt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=Gt(t),i=Gt(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Jt(t,e){this._context=t,this._t=e}Jt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var Qt=function(t,e){if((i=t.length)>1)for(var n,r,i,o=1,a=t[e[0]],s=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]},Kt=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n};function te(t,e){return t[e]}var ee=function(){var t=H([]),e=Kt,n=Qt,r=te;function i(i){var o,a,s=t.apply(this,arguments),c=i.length,u=s.length,l=new Array(u);for(o=0;o<u;++o){for(var h,f=s[o],d=l[o]=new Array(c),y=0;y<c;++y)d[y]=h=[0,+r(i[y],f,y,i)],h.data=i[y];d.key=f}for(o=0,a=e(l);o<u;++o)l[a[o]].index=o;return n(l,a),l}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:H(kt.call(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:H(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?Kt:"function"==typeof t?t:H(kt.call(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?Qt:t,i):n},i},ne=function(t){var e=t.map(re);return Kt(t).sort(function(t,n){return e[t]-e[n]})};function re(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}function ie(t){var e,n={},r=t||{get:function(){},has:function(){return!1},default:function(){}};function i(t,e){if(!t||"string"!=typeof t)throw new TypeError("Invalid argument: key must be a non-empty string");return!(t in n)&&(n[t]=e,!0)}function o(t){return n[t]||r.get(t)}function a(t,n){return void 0!==n?i(t,n):o(t||e)}return e=r.default(),a.add=i,a.get=o,a.has=function(t){return!!n[t]||r.has(t)},a.remove=function(t){var e=n[t];return delete n[t],e},a.getKeys=function(){return Object.keys(n)},a.getValues=function(){return Object.keys(n).map(function(t){return n[t]})},a.default=function(t){return void 0!==t&&(e=t),e},a.register=i,a}var oe=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},ae=function(t){return(t=oe(Math.abs(t)))?t[1]:NaN},se=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ce(t){return new ue(t)}function ue(t){if(!(e=se.exec(t)))throw new Error("invalid format: "+t);var e;this.fill=e[1]||" ",this.align=e[2]||">",this.sign=e[3]||"-",this.symbol=e[4]||"",this.zero=!!e[5],this.width=e[6]&&+e[6],this.comma=!!e[7],this.precision=e[8]&&+e[8].slice(1),this.trim=!!e[9],this.type=e[10]||""}ce.prototype=ue.prototype,ue.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var le,he,fe,de,ye=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(i>0){if(!+t[r])break t;i=0}}return i>0?t.slice(0,i)+t.slice(e+1):t},pe=function(t,e){var n=oe(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},ge={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return pe(100*t,e)},r:pe,s:function(t,e){var n=oe(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(le=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+oe(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},ve=function(t){return t},me=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],xe=function(t){var e=t.grouping&&t.thousands?function(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],c=0;i>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),o.push(n.substring(i-=s,i+s)),!((c+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}(t.grouping,t.thousands):ve,n=t.currency,r=t.decimal,i=t.numerals?function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(t.numerals):ve,o=t.percent||"%";function a(t){var a=(t=ce(t)).fill,s=t.align,c=t.sign,u=t.symbol,l=t.zero,h=t.width,f=t.comma,d=t.precision,y=t.trim,p=t.type;"n"===p?(f=!0,p="g"):ge[p]||(null==d&&(d=12),y=!0,p="g"),(l||"0"===a&&"="===s)&&(l=!0,a="0",s="=");var g="$"===u?n[0]:"#"===u&&/[boxX]/.test(p)?"0"+p.toLowerCase():"",v="$"===u?n[1]:/[%p]/.test(p)?o:"",m=ge[p],x=/[defgprs%]/.test(p);function b(t){var n,o,u,b=g,w=v;if("c"===p)w=m(t)+w,t="";else{var _=(t=+t)<0;if(t=m(Math.abs(t),d),y&&(t=ye(t)),_&&0==+t&&(_=!1),b=(_?"("===c?c:"-":"-"===c||"("===c?"":c)+b,w=("s"===p?me[8+le/3]:"")+w+(_&&"("===c?")":""),x)for(n=-1,o=t.length;++n<o;)if(48>(u=t.charCodeAt(n))||u>57){w=(46===u?r+t.slice(n+1):t.slice(n))+w,t=t.slice(0,n);break}}f&&!l&&(t=e(t,1/0));var k=b.length+t.length+w.length,M=k<h?new Array(h-k+1).join(a):"";switch(f&&l&&(t=e(M+t,M.length?h-w.length:1/0),M=""),s){case"<":t=b+t+w+M;break;case"=":t=b+M+t+w;break;case"^":t=M.slice(0,k=M.length>>1)+b+t+w+M.slice(k);break;default:t=M+b+t+w}return i(t)}return d=null==d?6:/[gprs]/.test(p)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),b.toString=function(){return t+""},b}return{format:a,formatPrefix:function(t,e){var n=a(((t=ce(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(ae(e)/3))),i=Math.pow(10,-r),o=me[8+r/3];return function(t){return n(i*t)+o}}}};!function(t){he=xe(t),fe=he.format,de=he.formatPrefix}({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var be=new Date,we=new Date;function _e(t,e,n,r){function i(e){return t(e=new Date(+e)),e}return i.floor=i,i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<r);return s},i.filter=function(n){return _e(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(i.count=function(e,r){return be.setTime(+e),we.setTime(+r),t(be),t(we),Math.floor(n(be,we))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var ke=_e(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});ke.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?_e(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):ke:null};ke.range;var Me=6e4,Se=6048e5,Re=_e(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),Ae=(Re.range,_e(function(t){t.setTime(Math.floor(t/Me)*Me)},function(t,e){t.setTime(+t+e*Me)},function(t,e){return(e-t)/Me},function(t){return t.getMinutes()})),Oe=(Ae.range,_e(function(t){var e=t.getTimezoneOffset()*Me%36e5;e<0&&(e+=36e5),t.setTime(36e5*Math.floor((+t-e)/36e5)+e)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()})),je=(Oe.range,_e(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Me)/864e5},function(t){return t.getDate()-1})),ze=je;je.range;function Te(t){return _e(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Me)/Se})}var Ee=Te(0),Ne=Te(1),Pe=Te(2),Ce=Te(3),Fe=Te(4),De=Te(5),Le=Te(6),Ie=(Ee.range,Ne.range,Pe.range,Ce.range,Fe.range,De.range,Le.range,_e(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()})),Be=(Ie.range,_e(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));Be.every=function(t){return isFinite(t=Math.floor(t))&&t>0?_e(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var We=Be,$e=(Be.range,_e(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Me)},function(t,e){return(e-t)/Me},function(t){return t.getUTCMinutes()})),qe=($e.range,_e(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()})),Ve=(qe.range,_e(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1})),Ye=Ve;Ve.range;function Ue(t){return _e(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/Se})}var He=Ue(0),Xe=Ue(1),Ze=Ue(2),Ge=Ue(3),Je=Ue(4),Qe=Ue(5),Ke=Ue(6),tn=(He.range,Xe.range,Ze.range,Ge.range,Je.range,Qe.range,Ke.range,_e(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()})),en=(tn.range,_e(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));en.every=function(t){return isFinite(t=Math.floor(t))&&t>0?_e(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var nn=en;en.range;function rn(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function on(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function an(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function sn(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,c=t.shortMonths,u=vn(i),l=mn(i),h=vn(o),f=mn(o),d=vn(a),y=mn(a),p=vn(s),g=mn(s),v=vn(c),m=mn(c),x={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:Ln,e:Ln,f:qn,H:In,I:Bn,j:Wn,L:$n,m:Vn,M:Yn,p:function(t){return i[+(t.getHours()>=12)]},Q:xr,s:br,S:Un,u:Hn,U:Xn,V:Zn,w:Gn,W:Jn,x:null,X:null,y:Qn,Y:Kn,Z:tr,"%":mr},b={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:er,e:er,f:ar,H:nr,I:rr,j:ir,L:or,m:sr,M:cr,p:function(t){return i[+(t.getUTCHours()>=12)]},Q:xr,s:br,S:ur,u:lr,U:hr,V:fr,w:dr,W:yr,x:null,X:null,y:pr,Y:gr,Z:vr,"%":mr},w={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=y[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=f[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=m[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.m=g[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return M(t,e,n,r)},d:On,e:On,f:Pn,H:zn,I:zn,j:jn,L:Nn,m:An,M:Tn,p:function(t,e,n){var r=u.exec(e.slice(n));return r?(t.p=l[r[0].toLowerCase()],n+r[0].length):-1},Q:Fn,s:Dn,S:En,u:bn,U:wn,V:_n,w:xn,W:kn,x:function(t,e,r){return M(t,n,e,r)},X:function(t,e,n){return M(t,r,e,n)},y:Sn,Y:Mn,Z:Rn,"%":Cn};function _(t,e){return function(n){var r,i,o,a=[],s=-1,c=0,u=t.length;for(n instanceof Date||(n=new Date(+n));++s<u;)37===t.charCodeAt(s)&&(a.push(t.slice(c,s)),null!=(i=hn[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),c=s+1);return a.push(t.slice(c,s)),a.join("")}}function k(t,e){return function(n){var r,i,o=an(1900);if(M(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(r=(i=(r=on(an(o.y))).getUTCDay())>4||0===i?Xe.ceil(r):Xe(r),r=Ye.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(r=(i=(r=e(an(o.y))).getDay())>4||0===i?Ne.ceil(r):Ne(r),r=ze.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?on(an(o.y)).getUTCDay():e(an(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,on(o)):e(o)}}function M(t,e,n,r){for(var i,o,a=0,s=e.length,c=n.length;a<s;){if(r>=c)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=w[i in hn?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return x.x=_(n,x),x.X=_(r,x),x.c=_(e,x),b.x=_(n,b),b.X=_(r,b),b.c=_(e,b),{format:function(t){var e=_(t+="",x);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",rn);return e.toString=function(){return t},e},utcFormat:function(t){var e=_(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t,on);return e.toString=function(){return t},e}}}var cn,un,ln,hn={"-":"",_:" ",0:"0"},fn=/^\s*\d+/,dn=/^%/,yn=/[\\^$*+?|[\]().{}]/g;function pn(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function gn(t){return t.replace(yn,"\\$&")}function vn(t){return new RegExp("^(?:"+t.map(gn).join("|")+")","i")}function mn(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function xn(t,e,n){var r=fn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function bn(t,e,n){var r=fn.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function wn(t,e,n){var r=fn.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function _n(t,e,n){var r=fn.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function kn(t,e,n){var r=fn.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Mn(t,e,n){var r=fn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Sn(t,e,n){var r=fn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Rn(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function An(t,e,n){var r=fn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function On(t,e,n){var r=fn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function jn(t,e,n){var r=fn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function zn(t,e,n){var r=fn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Tn(t,e,n){var r=fn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function En(t,e,n){var r=fn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Nn(t,e,n){var r=fn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Pn(t,e,n){var r=fn.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Cn(t,e,n){var r=dn.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Fn(t,e,n){var r=fn.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Dn(t,e,n){var r=fn.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function Ln(t,e){return pn(t.getDate(),e,2)}function In(t,e){return pn(t.getHours(),e,2)}function Bn(t,e){return pn(t.getHours()%12||12,e,2)}function Wn(t,e){return pn(1+ze.count(We(t),t),e,3)}function $n(t,e){return pn(t.getMilliseconds(),e,3)}function qn(t,e){return $n(t,e)+"000"}function Vn(t,e){return pn(t.getMonth()+1,e,2)}function Yn(t,e){return pn(t.getMinutes(),e,2)}function Un(t,e){return pn(t.getSeconds(),e,2)}function Hn(t){var e=t.getDay();return 0===e?7:e}function Xn(t,e){return pn(Ee.count(We(t),t),e,2)}function Zn(t,e){var n=t.getDay();return t=n>=4||0===n?Fe(t):Fe.ceil(t),pn(Fe.count(We(t),t)+(4===We(t).getDay()),e,2)}function Gn(t){return t.getDay()}function Jn(t,e){return pn(Ne.count(We(t),t),e,2)}function Qn(t,e){return pn(t.getFullYear()%100,e,2)}function Kn(t,e){return pn(t.getFullYear()%1e4,e,4)}function tr(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+pn(e/60|0,"0",2)+pn(e%60,"0",2)}function er(t,e){return pn(t.getUTCDate(),e,2)}function nr(t,e){return pn(t.getUTCHours(),e,2)}function rr(t,e){return pn(t.getUTCHours()%12||12,e,2)}function ir(t,e){return pn(1+Ye.count(nn(t),t),e,3)}function or(t,e){return pn(t.getUTCMilliseconds(),e,3)}function ar(t,e){return or(t,e)+"000"}function sr(t,e){return pn(t.getUTCMonth()+1,e,2)}function cr(t,e){return pn(t.getUTCMinutes(),e,2)}function ur(t,e){return pn(t.getUTCSeconds(),e,2)}function lr(t){var e=t.getUTCDay();return 0===e?7:e}function hr(t,e){return pn(He.count(nn(t),t),e,2)}function fr(t,e){var n=t.getUTCDay();return t=n>=4||0===n?Je(t):Je.ceil(t),pn(Je.count(nn(t),t)+(4===nn(t).getUTCDay()),e,2)}function dr(t){return t.getUTCDay()}function yr(t,e){return pn(Xe.count(nn(t),t),e,2)}function pr(t,e){return pn(t.getUTCFullYear()%100,e,2)}function gr(t,e){return pn(t.getUTCFullYear()%1e4,e,4)}function vr(){return"+0000"}function mr(){return"%"}function xr(t){return+t}function br(t){return Math.floor(+t/1e3)}!function(t){cn=sn(t),cn.format,cn.parse,un=cn.utcFormat,ln=cn.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Date.prototype.toISOString||un("%Y-%m-%dT%H:%M:%S.%LZ");+new Date("2000-01-01T00:00:00.000Z")||ln("%Y-%m-%dT%H:%M:%S.%LZ");var wr=ie();wr("d3-number",function(t,e,n){var r,i;function o(t){return i(t)}function a(){o.locale({decimal:n||".",thousands:e||",",grouping:[3],currency:["$",""]})}return o.locale=function(e){return r=xe(e),i=r.format(t),this},a(),o.format=function(t,i,o,s){return(o||s)&&(e=o,n=s,a()),r.format(t)(i)},o.pattern=function(e){return e&&(t=e,i=r.format(e)),t},o}),wr("d3-time",function(t){var e=sn({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),n=e.format(t);function r(t){return n(t)}return r.format=function(t,n){return e.format(t)(n)},r.locale=function(){return e=sn.apply(void 0,arguments),n=e.format(t),this},r.parse=function(t,n){return e.parse(t)(n)},r.parsePattern=function(t){return e.parse(t)},r});var _r={id:function(t){return"".concat(t.source,"/").concat(t.key||t.title)},key:function(t){return String(t.key||t.title)},tags:function(t){return t.tags},min:function(t){return t.min},max:function(t){return t.max},type:function(t){return t.type},title:function(t){return String(t.title)},values:function(t){return t.values},value:function(t){return t},label:function(t){return t},formatter:function(t){return function(t){if("function"==typeof t.formatter)return t.formatter();var e=t.formatter||{};return wr(e.type||"d3-number")(e.format||"")}(t)}};function kr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.id,r=void 0===n?_r.id:n,i=e.key,o=void 0===i?_r.key:i,a=e.min,s=void 0===a?_r.min:a,c=e.max,u=void 0===c?_r.max:c,l=e.type,h=void 0===l?_r.type:l,f=e.tags,d=void 0===f?_r.tags:f,y=e.title,p=void 0===y?_r.title:y,g=e.values,v=void 0===g?_r.values:g,m=e.value,x=void 0===m?_r.value:m,b=e.label,w=void 0===b?_r.label:b,_=e.formatter,k=void 0===_?_r.formatter:_;return{id:function(){return r(t)},key:function(){return o(t)},raw:function(){return t},tags:function(){return d(t)},type:function(){return h(t)},min:function(){return s(t)},max:function(){return u(t)},title:function(){return p(t)},items:function(){return v(t)},formatter:function(){return k(t)},value:x,label:w}}var Mr={diverging:function(t,e){if((s=t.length)>1)for(var n,r,i,o,a,s,c=0,u=t[e[0]].length;c<u;++c)for(o=a=0,n=0;n<s;++n)(i=(r=t[e[n]][c])[1]-r[0])>=0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):r[0]=o},none:Qt,silhouette:function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=t[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}Qt(t,e)}},expand:function(t,e){if((r=t.length)>0){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}Qt(t,e)}},wiggle:function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,c=0,u=0;s<i;++s){for(var l=t[e[s]],h=l[a][1]||0,f=(h-(l[a-1][1]||0))/2,d=0;d<s;++d){var y=t[e[d]];f+=(y[a][1]||0)-(y[a-1][1]||0)}c+=h,u+=f*h}n[a-1][1]+=n[a-1][0]=o,c&&(o-=u/c)}n[a-1][1]+=n[a-1][0]=o,Qt(t,e)}}},Sr={ascending:ne,insideout:function(t){var e,n,r=t.length,i=t.map(re),o=Kt(t).sort(function(t,e){return i[e]-i[t]}),a=0,s=0,c=[],u=[];for(e=0;e<r;++e)n=o[e],a<s?(a+=i[n],c.push(n)):(s+=i[n],u.push(n));return u.reverse().concat(c)},none:Kt,reverse:function(t){return Kt(t).reverse()}};function Rr(t){return(Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ar(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Or(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).logger;if(Array.isArray(t))n.items=t.map(function(t){return{value:t,label:String(t)}});else if(t){if("collection"in t)return e.collection(t.collection);var i=e.dataset?e.dataset(t.source):null,o=t.value||function(t){return t},a=t.label||function(t){return t};if(t.groupBy||t.mapTo)r.warn('Deprecated "data" configuration',t),n.items=[];else if(t.hierarchy)n.root=i.hierarchy?i.hierarchy(t.hierarchy):null;else if(t.items)n.items=t.items.map(function(t){return{value:o(t),label:String(a(t))}});else if(t.extract){var s=Array.isArray(t.extract)?t.extract:[t.extract];n.items=[];var c,u=[];if(s.forEach(function(t){var r,o=t.source?e.dataset(t.source):i;o&&((r=n.items).push.apply(r,Ar(o.extract(t))),void 0!==t.field&&u.push(o.field(t.field)))}),u.length&&(n.fields=u),t.amend&&Array.isArray(t.amend))(c=n.items).push.apply(c,Ar(t.amend))}else if(void 0!==t.field&&i){var l=i.field(t.field);l&&(n.fields||(n.fields=[]),n.fields.push(l),"value"in t||(o=l.value||function(t){return t},a=l.label||function(t){return t},n.value=o),n.items=l.items().map(function(e){return{value:o(e),label:String(a(e)),source:{field:t.field}}}))}else t.fields&&t.fields.forEach(function(t){var r,o="object"===Rr(t)&&t.source?e.dataset(t.source):i;o&&((r="object"===Rr(t)&&void 0!==t.field?o.field(t.field):o.field(t))&&(n.fields||(n.fields=[]),n.fields.push(r)))});n.items&&t.map&&(n.items=n.items.map(t.map))}return t&&t.stack&&function(t,e,n){for(var r={},i=e.stackKey,o=e.value,a=e.startProp||"start",s=e.endProp||"end",c=e.offset||"none",u=e.order||"none",l=e.valueRef||"",h=0,f={},d=0;d<t.items.length;d++){var y=t.items[d],p=l?y[l]:null;if(p&&p.source){var g="".concat(p.source.key||"","/").concat(p.source.field);f[g]||(f[g]=p.source)}var v=i(y);r[v]=r[v]||{items:[]},r[v].items.push(y),h=Math.max(h,r[v].items.length)}for(var m=Array.apply(null,{length:h}).map(Number.call,Number),x=Object.keys(r).map(function(t){return r[t].items}),b=ee().keys(m).value(function(t,e){return t[e]?o(t[e]):0}).order(Sr[u]).offset(Mr[c])(x),w=[],_=0;_<b.length;_++)for(var k=b[_],M=0;M<k.length;M++){var S=k[M],R=k[M].data[k.key];R&&(R[a]={value:S[0]},R[s]={value:S[1]},w.push(S[0],S[1]))}var A=Object.keys(f).map(function(t){var e=n(f[t].key);return e?e.field(f[t].field):null}).filter(function(t){return!!t}),O=kr({title:A.map(function(t){return t.title()}).join(", "),min:Math.min.apply(Math,w),max:Math.max.apply(Math,w),type:"measure",formatter:A[0]?A[0].formatter:void 0});t.fields.push(O)}(n,t.stack,e.dataset),t&&!Array.isArray(t)&&"function"==typeof t.sort&&n.items&&(n.items=n.items.sort(t.sort)),n}function jr(t){return(jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zr(t){return(zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tr(t,e,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Or;if(t.data){var o=i(t.data,e,n);if(o&&o.fields&&o.fields[0])return o.fields[0].formatter()}if(r=t.formatter?"".concat(t.formatter,"-").concat(t.type||"number"):t.type||"d3-number",n.formatter.has(r))return n.formatter.get(r)(t.format||"");throw new Error("Formatter of type '".concat(r,"' was not found"))}var Er=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},Nr=function(t){return 1===t.length&&(t=function(t){return function(e,n){return Er(t(e),n)}}(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}};var Pr=Nr(Er),Cr=Pr.right,Fr=(Pr.left,Cr);var Dr=Array.prototype,Lr=(Dr.slice,Dr.map,function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}),Ir=Math.sqrt(50),Br=Math.sqrt(10),Wr=Math.sqrt(2),$r=function(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=qr(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(t-s)/a;return r&&o.reverse(),o};function qr(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Ir?10:o>=Br?5:o>=Wr?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Ir?10:o>=Br?5:o>=Wr?2:1)}function Vr(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Ir?i*=10:o>=Br?i*=5:o>=Wr&&(i*=2),e<t?-i:i}function Yr(){}function Ur(t,e){var n=new Yr;if(t instanceof Yr)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}Yr.prototype=Ur.prototype={constructor:Yr,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var Hr=Ur;function Xr(){}var Zr=Hr.prototype;function Gr(t,e){var n=new Xr;if(t instanceof Xr)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}Xr.prototype=Gr.prototype={constructor:Xr,has:Zr.has,add:function(t){return this["$"+(t+="")]=t,this},remove:Zr.remove,clear:Zr.clear,values:Zr.keys,size:Zr.size,empty:Zr.empty,each:Zr.each};var Jr=Array.prototype,Qr=Jr.map,Kr=Jr.slice,ti={name:"implicit"};function ei(t){var e=Hr(),n=[],r=ti;function i(i){var o=i+"",a=e.get(o);if(!a){if(r!==ti)return r;e.set(o,a=n.push(i))}return t[(a-1)%t.length]}return t=null==t?[]:Kr.call(t),i.domain=function(t){if(!arguments.length)return n.slice();n=[],e=Hr();for(var r,o,a=-1,s=t.length;++a<s;)e.has(o=(r=t[a])+"")||e.set(o,n.push(r));return i},i.range=function(e){return arguments.length?(t=Kr.call(e),i):t.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return ei().domain(n).range(t).unknown(r)},i}function ni(){var t,e,n=ei().unknown(void 0),r=n.domain,i=n.range,o=[0,1],a=!1,s=0,c=0,u=.5;function l(){var n=r().length,l=o[1]<o[0],h=o[l-0],f=o[1-l];t=(f-h)/Math.max(1,n-s+2*c),a&&(t=Math.floor(t)),h+=(f-h-t*(n-s))*u,e=t*(1-s),a&&(h=Math.round(h),e=Math.round(e));var d=Lr(n).map(function(e){return h+t*e});return i(l?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),l()):r()},n.range=function(t){return arguments.length?(o=[+t[0],+t[1]],l()):o.slice()},n.rangeRound=function(t){return o=[+t[0],+t[1]],a=!0,l()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(a=!!t,l()):a},n.padding=function(t){return arguments.length?(s=c=Math.max(0,Math.min(1,t)),l()):s},n.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),l()):s},n.paddingOuter=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),l()):c},n.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),l()):u},n.copy=function(){return ni().domain(r()).range(o).round(a).paddingInner(s).paddingOuter(c).align(u)},l()}var ri=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function ii(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function oi(){}var ai="\\s*([+-]?\\d+)\\s*",si="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ci="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ui=/^#([0-9a-f]{3})$/,li=/^#([0-9a-f]{6})$/,hi=new RegExp("^rgb\\("+[ai,ai,ai]+"\\)$"),fi=new RegExp("^rgb\\("+[ci,ci,ci]+"\\)$"),di=new RegExp("^rgba\\("+[ai,ai,ai,si]+"\\)$"),yi=new RegExp("^rgba\\("+[ci,ci,ci,si]+"\\)$"),pi=new RegExp("^hsl\\("+[si,ci,ci]+"\\)$"),gi=new RegExp("^hsla\\("+[si,ci,ci,si]+"\\)$"),vi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function mi(t){var e;return t=(t+"").trim().toLowerCase(),(e=ui.exec(t))?new ki((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=li.exec(t))?xi(parseInt(e[1],16)):(e=hi.exec(t))?new ki(e[1],e[2],e[3],1):(e=fi.exec(t))?new ki(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=di.exec(t))?bi(e[1],e[2],e[3],e[4]):(e=yi.exec(t))?bi(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=pi.exec(t))?Si(e[1],e[2]/100,e[3]/100,1):(e=gi.exec(t))?Si(e[1],e[2]/100,e[3]/100,e[4]):vi.hasOwnProperty(t)?xi(vi[t]):"transparent"===t?new ki(NaN,NaN,NaN,0):null}function xi(t){return new ki(t>>16&255,t>>8&255,255&t,1)}function bi(t,e,n,r){return r<=0&&(t=e=n=NaN),new ki(t,e,n,r)}function wi(t){return t instanceof oi||(t=mi(t)),t?new ki((t=t.rgb()).r,t.g,t.b,t.opacity):new ki}function _i(t,e,n,r){return 1===arguments.length?wi(t):new ki(t,e,n,null==r?1:r)}function ki(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Mi(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Si(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ai(t,e,n,r)}function Ri(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof Ai)return new Ai(t.h,t.s,t.l,t.opacity);if(t instanceof oi||(t=mi(t)),!t)return new Ai;if(t instanceof Ai)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,c=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=c>0&&c<1?0:a,new Ai(a,s,c,t.opacity)}(t):new Ai(t,e,n,null==r?1:r)}function Ai(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Oi(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}ri(oi,mi,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),ri(ki,_i,ii(oi,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ki(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ki(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+Mi(this.r)+Mi(this.g)+Mi(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),ri(Ai,Ri,ii(oi,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ai(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ai(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ki(Oi(t>=240?t-240:t+120,i,r),Oi(t,i,r),Oi(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var ji=Math.PI/180,zi=180/Math.PI,Ti=.96422,Ei=1,Ni=.82521,Pi=4/29,Ci=6/29,Fi=3*Ci*Ci,Di=Ci*Ci*Ci;function Li(t){if(t instanceof Bi)return new Bi(t.l,t.a,t.b,t.opacity);if(t instanceof Hi){if(isNaN(t.h))return new Bi(t.l,0,0,t.opacity);var e=t.h*ji;return new Bi(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof ki||(t=wi(t));var n,r,i=Vi(t.r),o=Vi(t.g),a=Vi(t.b),s=Wi((.2225045*i+.7168786*o+.0606169*a)/Ei);return i===o&&o===a?n=r=s:(n=Wi((.4360747*i+.3850649*o+.1430804*a)/Ti),r=Wi((.0139322*i+.0971045*o+.7141733*a)/Ni)),new Bi(116*s-16,500*(n-s),200*(s-r),t.opacity)}function Ii(t,e,n,r){return 1===arguments.length?Li(t):new Bi(t,e,n,null==r?1:r)}function Bi(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function Wi(t){return t>Di?Math.pow(t,1/3):t/Fi+Pi}function $i(t){return t>Ci?t*t*t:Fi*(t-Pi)}function qi(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Vi(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Yi(t){if(t instanceof Hi)return new Hi(t.h,t.c,t.l,t.opacity);if(t instanceof Bi||(t=Li(t)),0===t.a&&0===t.b)return new Hi(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*zi;return new Hi(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Ui(t,e,n,r){return 1===arguments.length?Yi(t):new Hi(t,e,n,null==r?1:r)}function Hi(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}ri(Bi,Ii,ii(oi,{brighter:function(t){return new Bi(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Bi(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new ki(qi(3.1338561*(e=Ti*$i(e))-1.6168667*(t=Ei*$i(t))-.4906146*(n=Ni*$i(n))),qi(-.9787684*e+1.9161415*t+.033454*n),qi(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),ri(Hi,Ui,ii(oi,{brighter:function(t){return new Hi(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Hi(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Li(this).rgb()}}));var Xi=-.14861,Zi=1.78277,Gi=-.29227,Ji=-.90649,Qi=1.97294,Ki=Qi*Ji,to=Qi*Zi,eo=Zi*Gi-Ji*Xi;function no(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof ro)return new ro(t.h,t.s,t.l,t.opacity);t instanceof ki||(t=wi(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(eo*r+Ki*e-to*n)/(eo+Ki-to),o=r-i,a=(Qi*(n-i)-Gi*o)/Ji,s=Math.sqrt(a*a+o*o)/(Qi*i*(1-i)),c=s?Math.atan2(a,o)*zi-120:NaN;return new ro(c<0?c+360:c,s,i,t.opacity)}(t):new ro(t,e,n,null==r?1:r)}function ro(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function io(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}ri(ro,no,ii(oi,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ro(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ro(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*ji,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new ki(255*(e+n*(Xi*r+Zi*i)),255*(e+n*(Gi*r+Ji*i)),255*(e+n*(Qi*r)),this.opacity)}}));var oo=function(t){return function(){return t}};function ao(t,e){return function(n){return t+n*e}}function so(t,e){var n=e-t;return n?ao(t,n>180||n<-180?n-360*Math.round(n/360):n):oo(isNaN(t)?e:t)}function co(t){return 1==(t=+t)?uo:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):oo(isNaN(e)?n:e)}}function uo(t,e){var n=e-t;return n?ao(t,n):oo(isNaN(t)?e:t)}var lo=function t(e){var n=co(e);function r(t,e){var r=n((t=_i(t)).r,(e=_i(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=uo(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function ho(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=_i(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}ho(function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return io((n-r/e)*e,a,i,o,s)}}),ho(function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return io((n-r/e)*e,i,o,a,s)}});var fo=function(t,e){return e-=t=+t,function(n){return t+e*n}},yo=function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=wo(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},po=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,go=new RegExp(po.source,"g");var vo,mo,xo,bo,wo=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?oo(e):("number"===r?fo:"string"===r?(n=mi(e))?(e=n,lo):function(t,e){var n,r,i,o=po.lastIndex=go.lastIndex=0,a=-1,s=[],c=[];for(t+="",e+="";(n=po.exec(t))&&(r=go.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,c.push({i:a,x:fo(n,r)})),o=go.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?c[0]?function(t){return function(e){return t(e)+""}}(c[0].x):function(t){return function(){return t}}(e):(e=c.length,function(t){for(var n,r=0;r<e;++r)s[(n=c[r]).i]=n.x(t);return s.join("")})}:e instanceof mi?lo:e instanceof Date?function(t,e){var n=new Date;return e-=t=+t,function(r){return n.setTime(t+e*r),n}}:Array.isArray(e)?function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=wo(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?yo:fo)(t,e)},_o=function(t,e){return e-=t=+t,function(n){return Math.round(t+e*n)}},ko=180/Math.PI,Mo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},So=function(t,e,n,r,i,o){var a,s,c;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),t*r<e*n&&(t=-t,e=-e,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*ko,skewX:Math.atan(c)*ko,scaleX:a,scaleY:s}};function Ro(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],c=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var c=a.push("translate(",null,e,null,n);s.push({i:c-4,x:fo(t,i)},{i:c-2,x:fo(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,c),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:fo(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,s,c),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:fo(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,s,c),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:fo(t,n)},{i:s-2,x:fo(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,c),o=a=null,function(t){for(var e,n=-1,r=c.length;++n<r;)s[(e=c[n]).i]=e.x(t);return s.join("")}}}Ro(function(t){return"none"===t?Mo:(vo||(vo=document.createElement("DIV"),mo=document.documentElement,xo=document.defaultView),vo.style.transform=t,t=xo.getComputedStyle(mo.appendChild(vo),null).getPropertyValue("transform"),mo.removeChild(vo),t=t.slice(7,-1).split(","),So(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),Ro(function(t){return null==t?Mo:(bo||(bo=document.createElementNS("http://www.w3.org/2000/svg","g")),bo.setAttribute("transform",t),(t=bo.transform.baseVal.consolidate())?(t=t.matrix,So(t.a,t.b,t.c,t.d,t.e,t.f)):Mo)},", ",")",")"),Math.SQRT2;function Ao(t){return function(e,n){var r=t((e=Ri(e)).h,(n=Ri(n)).h),i=uo(e.s,n.s),o=uo(e.l,n.l),a=uo(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=a(t),e+""}}}Ao(so),Ao(uo);function Oo(t){return function(e,n){var r=t((e=Ui(e)).h,(n=Ui(n)).h),i=uo(e.c,n.c),o=uo(e.l,n.l),a=uo(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=a(t),e+""}}}Oo(so),Oo(uo);function jo(t){return function e(n){function r(e,r){var i=t((e=no(e)).h,(r=no(r)).h),o=uo(e.s,r.s),a=uo(e.l,r.l),s=uo(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}jo(so),jo(uo);var zo=function(t){return function(){return t}},To=function(t){return+t},Eo=[0,1];function No(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:zo(e)}function Po(t,e,n,r){var i=t[0],o=t[1],a=e[0],s=e[1];return o<i?(i=n(o,i),a=r(s,a)):(i=n(i,o),a=r(a,s)),function(t){return a(i(t))}}function Co(t,e,n,r){var i=Math.min(t.length,e.length)-1,o=new Array(i),a=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)o[s]=n(t[s],t[s+1]),a[s]=r(e[s],e[s+1]);return function(e){var n=Fr(t,e,1,i)-1;return a[n](o[n](e))}}function Fo(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function Do(t,e){var n,r,i,o=Eo,a=Eo,s=wo,c=!1;function u(){return n=Math.min(o.length,a.length)>2?Co:Po,r=i=null,l}function l(e){return(r||(r=n(o,a,c?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}(t):t,s)))(+e)}return l.invert=function(t){return(i||(i=n(a,o,No,c?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}(e):e)))(+t)},l.domain=function(t){return arguments.length?(o=Qr.call(t,To),u()):o.slice()},l.range=function(t){return arguments.length?(a=Kr.call(t),u()):a.slice()},l.rangeRound=function(t){return a=Kr.call(t),s=_o,u()},l.clamp=function(t){return arguments.length?(c=!!t,u()):c},l.interpolate=function(t){return arguments.length?(s=t,u()):s},u()}var Lo=function(t,e,n){var r,i=t[0],o=t[t.length-1],a=Vr(i,o,null==e?10:e);switch((n=ce(null==n?",f":n)).type){case"s":var s=Math.max(Math.abs(i),Math.abs(o));return null!=n.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ae(e)/3)))-ae(Math.abs(t)))}(a,s))||(n.precision=r),de(n,s);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ae(e)-ae(t))+1}(a,Math.max(Math.abs(i),Math.abs(o))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(t){return Math.max(0,-ae(Math.abs(t)))}(a))||(n.precision=r-2*("%"===n.type))}return fe(n)};function Io(t){var e=t.domain;return t.ticks=function(t){var n=e();return $r(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return Lo(e(),t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),o=0,a=i.length-1,s=i[o],c=i[a];return c<s&&(r=s,s=c,c=r,r=o,o=a,a=r),(r=qr(s,c,n))>0?r=qr(s=Math.floor(s/r)*r,c=Math.ceil(c/r)*r,n):r<0&&(r=qr(s=Math.ceil(s*r)/r,c=Math.floor(c*r)/r,n)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(c/r)*r,e(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(c*r)/r,e(i)),t},t}function Bo(){var t=Do(No,fo);return t.copy=function(){return Fo(t,Bo())},Io(t)}function Wo(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function $o(t){return($o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qo(t){return void 0===t?function(t){return t}:function(e){return t(e)}}function Vo(t){return Math.max(0,Math.min(1,t))}function Yo(t){return"object"===$o(t)}function Uo(t,e,n){for(var r=Math.abs(e-n)/(t+1),i=[],o=1;o<=t;o++){var a=o*r;i.push(e<n?e+a:e-a)}return i}function Ho(t,e,n){if(1===t.length)return t;for(var r=t.concat([]),i=0;i<t.length;i++){var o=t[i],a=t[i+1];0===i&&o!==n.start()?(r.push.apply(r,Wo(Uo(e,o,a))),o-=a-o,a=t[i],r.push.apply(r,Wo(Uo(e,o,a)))):i===t.length-1&&a!==n.end()?(a=o+(o-t[i-1]),r.push.apply(r,Wo(Uo(e,o,a)))):r.push.apply(r,Wo(Uo(e,o,a)))}return r.filter(function(t){return t>=n.min()&&t<=n.max()})}function Xo(t){var e=t.distance,n=t.scale,r=t.minorCount,i=void 0===r?0:r,o=t.unitDivider,a=void 0===o?100:o,s=t.formatter,c=void 0===s?void 0:s,u=b(a)||b(e)?2:Math.max(e/a,2),l=Math.min(1e3,Math.round(u)),h=n.ticks(l);h.length<=1&&(h=n.ticks(l+1));var f=i>0?Ho(h,i,n):h;f.sort(function(t,e){return t-e});var d=f.map(qo(c));return f.map(function(t,e){var r=n(t);return{position:r,start:r,end:r,label:d[e],value:t,isMinor:-1===h.indexOf(t)}})}function Zo(t){var e=t.distance,n=t.scale,r=t.minorCount,i=void 0===r?0:r,o=t.unitDivider,a=void 0===o?100:o,s=t.formatter,c=void 0===s?void 0:s,u=b(a)||b(e)?2:Math.max(e/a,2),l=Math.min(1e3,Math.round(u)),h=l>10?10:l;n.nice(h);var f=n.ticks(l),d=i>0?Ho(f,i,n):f;d.sort(function(t,e){return t-e});var y=d.map(qo(c));return d.map(function(t,e){var r=n(t);return{position:r,start:r,end:r,label:y[e],value:t,isMinor:-1===f.indexOf(t)}})}function Go(t){var e,n=t.settings,r=t.scale,i=t.distance,o=t.formatter,a=n.minorTicks&&!b(n.minorTicks.count)?Math.min(100,n.minorTicks.count):0;if(Array.isArray(n.ticks.values))e=function(t){var e=t.values,n=t.scale,r=t.formatter,i=void 0===r?function(t){return t}:r;return e.sort(function(t,e){return(Yo(t)?t.value:t)-(Yo(e)?e.value:e)}).filter(function(t,e,r){var i=Yo(t)?t.value:t;return i<=n.max()&&i>=n.min()&&r.indexOf(t)===e}).map(function(t){var e=Yo(t)?t.value:t,r=n(e);return{position:r,value:e,label:Yo(t)&&void 0!==t.label?t.label:i(e),isMinor:!1,start:Yo(t)&&!isNaN(t.start)?Vo(n(t.start)):r,end:Yo(t)&&!isNaN(t.end)?Vo(n(t.end)):r}})}({values:n.ticks.values.filter(function(t){return"object"===$o(t)?!b(t.value):!b(t)}),scale:r.copy(),formatter:o});else if(b(n.ticks.count)){e=(n.ticks.tight?Zo:Xo)({distance:i,minorCount:a,unitDivider:n.ticks.distance,scale:r,formatter:o}),n.ticks.forceBounds&&function(t,e,n){var r=t.map(function(t){return t.position}),i=e.range();-1===r.indexOf(i[0])?t.splice(0,0,{position:i[0],start:i[0],end:i[0],label:n(e.start()),isMinor:!1,value:e.start()}):t[0]&&t[0].isMinor&&(t[0].isMinor=!1);var o=t[t.length-1];-1===r.indexOf(i[1])?t.push({position:i[1],start:i[1],end:i[1],label:n(e.end()),isMinor:!1,value:e.end()}):o&&o.isMinor&&(o.isMinor=!1)}(e,r,o)}else{e=function(t){var e=t.count,n=t.minorCount,r=t.scale,i=t.formatter;return r.ticks((e-1)*n+e).map(function(t,e){var o=r(t);return{position:o,start:o,end:o,label:i(t),isMinor:e%(n+1)!=0,value:t}})}({count:Math.min(1e3,n.ticks.count),minorCount:a,scale:r.copy(),formatter:o})}return e}function Jo(t){return(Jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qo(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};return Object.keys(e).forEach(function(i){var o=Jo(t[i]);r[i]="function"===o?t[i](n):"undefined"===o?e[i]:t[i]}),r}function Ko(t){return(Ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ta(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var ea={min:NaN,max:NaN,expand:NaN,include:[],invert:!1},na={tight:!1,forceBounds:!1,values:void 0,count:NaN,distance:100},ra={count:NaN};function ia(t,e){t.instance||(t.instance=e.copy(),t.instance.domain([e.start(),e.end()]),t.instance.clamp(!0),t.instance.range(t.invert?[1,0]:[0,1]))}function oa(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Bo(),o={instance:null,invert:!1},a={data:n,resources:r},s=Qo(e,ea,a);function c(t){return b(t)?NaN:i(t)}s.ticks=Qo(e.ticks,na,a),s.minorTicks=Qo(e.minorTicks,ra,a),c.data=function(){return n},c.invert=function(t){return i.invert(t)},c.rangeRound=function(t){return i.rangeRound(t),c},c.clamp=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return i.clamp(t),c},c.cachedTicks=function(){return t},c.clearTicksCache=function(){return t=void 0,this},c.ticks=function(e){return null!==e&&"object"===Ko(e)?(e.settings=e.settings||{},e.settings=d()(!0,{},s,e.settings),e.scale=c,t=Go(e)):t=i.ticks(e)},c.nice=function(t){return i.nice(t),c},c.tickFormat=function(t,e){return i.tickFormat(t,e)},c.interpolate=function(t){return i.interpolate(t),c},c.domain=function(t){return arguments.length?(i.domain(t),o.instance&&o.instance.domain([c.start(),c.end()]),c):i.domain()},c.range=function(t){return arguments.length?(i.range(t),c):i.range()},c.start=function(){return c.domain()[0]},c.end=function(){return c.domain()[this.domain().length-1]},c.min=function(){return Math.min(this.start(),this.end())},c.max=function(){return Math.max(this.start(),this.end())},c.classify=function(t){for(var e=(c.start()-c.end())/t,n=[c.end()],r=[],i=e/2,o=0;o<t;o++){var a=n[n.length-1]||0,s=a+e,u=c(a+i);n.push.apply(n,[s,s]),r.push.apply(r,[u,u])}return n.pop(),c.domain(n),c.range(r),c},c.copy=function(){var t=oa(e,n,r);return t.domain(c.domain()),t.range(c.range()),t.clamp(i.clamp()),t},c.norm=function(t){return ia(o,c),o.instance(t)},c.normInvert=function(t){return ia(o,c),o.instance.invert(t)};var u=function(t,e){var n=+t.min,r=+t.max,i=0,o=1;if(e&&e[0]){var a=e.map(function(t){return t.min()}).filter(function(t){return!isNaN(t)}),s=e.map(function(t){return t.max()}).filter(function(t){return!isNaN(t)});if(i=a.length?Math.min.apply(Math,ta(a)):Number.NaN,o=s.length?Math.max.apply(Math,ta(s)):Number.NaN,isNaN(i)||isNaN(o))i=-1,o=1;else if(i===o&&0===i)i=-1,o=1;else if(i===o&&i)i-=Math.abs(.1*i),o+=Math.abs(.1*o);else if(!isNaN(t.expand)){var c=o-i;i-=c*t.expand,o+=c*t.expand}if(Array.isArray(t.include)){var u=t.include.filter(function(t){return!isNaN(t)});i=Math.min.apply(Math,ta(u).concat([i])),o=Math.max.apply(Math,ta(u).concat([o]))}}return{mini:isNaN(n)?i:n,maxi:isNaN(r)?o:r}}(s,n?n.fields:[]),l=u.mini,h=u.maxi;return c.domain([l,h]),c.range(s.invert?[1,0]:[0,1]),o.invert=s.invert,c}var aa={padding:0,paddingInner:NaN,paddingOuter:NaN,align:.5,invert:!1,maxPxStep:NaN};function sa(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=ni(),i={data:e,resources:n},o=Qo(t,aa,i),a=e.items||[],s={},c=[],u=[];function l(t,n){t.data=function(){return e},t.datum=function(t){return a[s[t]]},t.start=function(){return t.domain()[0]},t.end=function(){return t.domain()[t.domain().length-1]},t.labels=function(){return u},t.ticks=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.scale=t,function(t){var e=t.scale,n=e.domain(),r=e.data().items,i=e.labels?e.labels():n,o=e.bandwidth();return n.map(function(t,n){var a=e(t);return{position:a+o/2,label:"".concat(i[n]),data:r?r[n]:void 0,start:a,end:a+o}})}(e,n.trackBy)}}l(r,t),r.pxScale=function(e){var n=o.maxPxStep;if(isNaN(n))return r;var i=r.domain().length,a=Math.max(1,i-r.paddingInner()+2*r.paddingOuter());if(a*n>=e)return r;var s=r.copy();s.type=r.type,l(s,t);var c=a*n/e,u=(1-c)*r.align();return s.range(o.invert?[c+u,u]:[u,c+u]),s};for(var h="function"==typeof t.value?t.value:function(t){return t.datum.value},f="function"==typeof t.label?t.label:function(t){return t.datum.label},y=0;y<a.length;y++){var p=d()({datum:a[y]},i),g=h(p,y);-1===c.indexOf(g)&&(c.push(g),u.push(f(p,y)),s[g]=y)}return r.domain(c),r.range(o.invert?[1,0]:[0,1]),r.padding(isNaN(o.padding)?0:o.padding),isNaN(o.paddingInner)||r.paddingInner(o.paddingInner),isNaN(o.paddingOuter)||r.paddingOuter(o.paddingOuter),r.align(isNaN(o.align)?.5:o.align),r}var ca={depth:0};function ua(t,e,n){return t.ancestors().map(function(t){return e(d()({datum:t.data},n))}).reverse().slice(1).toString()}function la(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var ha=function(t){return t.min()},fa=function(t){return t.max()};function da(t,e){var n=t&&!isNaN(t.min),r=t&&!isNaN(t.max),i=n?+t.min:0,o=r?+t.max:1;if(e&&e.length){if(!n){var a=e.map(ha).filter(x);i=a.length?Math.min.apply(Math,la(a)):i}if(!r){var s=e.map(fa).filter(x);o=s.length?Math.max.apply(Math,la(s)):o}}return[i,o]}function ya(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var pa={domain:[],range:[],invert:!1,min:NaN,max:NaN};function ga(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=oa(t,e,n).clamp(!0).interpolate(lo),i=Qo(t,pa,{data:e,resources:n}),o=Array.isArray(i.domain)&&i.domain.length,a=Array.isArray(i.range)&&i.range.length,s=r;d()(!0,s,r);var c=ya(da(i,e?e.fields:[]),2),u=c[0],l=c[1],h=o?i.domain.length:-1,f=n.theme?n.theme.palette("sequential",h>0?h:2):[],y=a?i.range:f;return s.range(i.invert?y.slice().reverse():y.slice()),s.domain(o?i.domain:function(t,e,n){var r=t.length;if(2===r)return[e,n];var i=[],o=(n-e)/(r-1);i.push(e);for(var a=1;a<r-1;a++)i.push(e+o*a);return i.push(n),i}(s.range(),u,l)),s}function va(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ma(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var xa={domain:[],range:[],invert:!1,min:NaN,max:NaN,nice:!1};var ba={domain:[],range:[]};var wa={domain:[],range:[],unknown:void 0},_a={domain:[],range:[],override:!1};function ka(t){return(ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Ma=ie();function Sa(t,e,n){var r=t.data;t.source&&(n.logger.warn("Deprecated: Scale data source configuration"),r={extract:[]},(Array.isArray(t.source)?t.source:[t.source]).forEach(function(t){r.extract.push({field:t})}));var i,o=Or(r,e,n),a=t.type||function(t){return t.root?"h-band":t.fields&&t.fields[0]?function(t){return-1!==t.map(function(t){return"dimension"===t.type()?"band":"linear"}).indexOf("linear")?"linear":"band"}(t.fields):"linear"}(o);return"color"===a&&(a=o.fields&&o.fields[0]&&"dimension"===o.fields[0].type()?"categorical-color":"sequential-color"),n.scale.has(a)&&((i=(i=n.scale.get(a))(t,o,{theme:n.theme,logger:n.logger})).type=a),i}Ma("linear",oa),Ma("band",sa),Ma("h-band",function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={data:n,resources:r},o=Qo(e,aa,i);o.ticks=Qo(e.ticks,ca,i),o.value="function"==typeof e.value?e.value:function(t){return t.datum.value},o.label="function"==typeof e.label?e.label:function(t){return t.datum.value};var a=sa(o),s=function(t,e,n){var r=e.ticks.depth,i=e.value,o=e.label,a=[],s=[],c={},u=[],l=0;if(!t)return{values:a,labels:s,items:c,ticks:u};t.eachAfter(function(t){if(t.depth>0){var e=ua(t,i,n),h=t.leaves()||[t],f=i(d()({datum:t.data},n)),y=o(d()({datum:t.data},n)),p=Array.isArray(t.children),g={key:e,count:h.length,value:f,label:y,leftEdge:ua(h[0],i,n),rightEdge:ua(h[Math.max(h.length-1,0)],i,n),node:t};p?(a.push("SPACER_".concat(l,"_SPACER")),l++):(a.push(e),s.push(y)),(r<=0&&!p||t.depth===r)&&u.push(g),c[e]=g}});var h=t.height-1;return h>0&&a.splice(-h),{values:a,labels:s,items:c,ticks:u}}(n.root,o,i),c=s.values,u=s.labels,l=s.items,h=s.ticks,f=function(t){var e=String(t),n=l[e];return a(n?o.invert?n.rightEdge:n.leftEdge:e)};d()(!0,f,a),f.bandwidth=function(t){var e=l[String(t)],n=a.bandwidth();if(e&&!e.isLeaf){var r=f(e.leftEdge),i=f(e.rightEdge);return Math.abs(r-i)+n}return n},f.step=function(t){var e=l[String(t)],n=e?e.count:1,r=a.step();return r*=n},f.data=function(){return n},f.datum=function(t){var e=l[String(t)];return e?e.node.data:null},f.copy=function(){return t(e,n,r)},f.labels=function(){return u},f.ticks=function(){return h.map(function(t){var e=f(t.key),n=f.bandwidth(t.key);return{position:e+n/2,label:t.label,data:t.node.data,start:e,end:e+n}})};var y=a.pxScale;return f.pxScale=function(t){return a=y(t),f},f.domain(c),f}),Ma("sequential-color",ga),Ma("threshold-color",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=function t(){var e=[.5],n=[0,1],r=1;function i(t){if(t<=t)return n[Fr(e,t,0,r)]}return i.domain=function(t){return arguments.length?(e=Kr.call(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Kr.call(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.copy=function(){return t().domain(e).range(n)},i}(),i=Qo(t,xa,{data:e,resources:n}),o=Array.isArray(i.domain)&&i.domain.length,a=Array.isArray(i.range)&&i.range.length;function s(t){return b(t)?NaN:r(t)}Object.keys(r).forEach(function(t){return s[t]=r[t]});var c=va(da(i,e.fields),2),u=c[0],l=c[1],h=o?i.domain.length:-1,f=n.theme?n.theme.palette("sequential",h>0?h:2):[],d=a?i.range:f,y=[];return y=o?i.domain:i.nice?function(t,e,n){var r=2===t.length?10:Math.max(1,t.length),i=Bo().domain([e,n]).nice(r).ticks(r);if(!t||!t.length)return i;for(var o=Math.max(0,t.length-1);i.length>o;)i[0]-e<=n-i[i.length-1]?i.shift():i.pop();return i}(d,u,l):[u+(l-u)/2],d.length>y.length+1?y=function(t,e,n){var r=t.length;if(2===r)return[e+(n-e)/2];for(var i=[],o=(n-e)/r,a=1;a<r;a++)i.push(e+o*a);return i}(d,u,l):d.length<y.length+1&&(d=function(t,e,n,r){n=t[0],r=t&&t.length>=2?t[t.length-1]:r;var i=ga().domain([n,r]).range(e);return[n].concat(ma(function(t){for(var e=[],n=0;n<t.length-1;n++)e.push((t[n]+t[n+1])/2);return e}(t)),[r]).map(function(t){return i(t)})}(y,d,u,l)),s.data=function(){return e},s.range(i.invert?d.slice().reverse():d),s.domain(y),s}),Ma("categorical-color",function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=ei(),i={data:e,resources:n},o=Qo(t,ba,i),a="function"==typeof t.value?t.value:function(t){return t.datum.value},s="function"==typeof t.label?t.label:function(t){return t.datum.label},c=e.items||[],u={},l=[],h=[],f=0;f<c.length;f++){var y=d()({datum:c[f]},i),p=a(y,f);-1===l.indexOf(p)&&(l.push(p),h.push(s(y,f)),u[p]=f)}return r.data=function(){return e},r.labels=function(){return h},r.label=function(t){return h[l.indexOf(t)]},r.datum=function(t){return c[u[t]]},r.range(o.range),Array.isArray(o.domain)&&o.domain.length?r.domain(o.domain):r.domain(l),r}(e,n,r),o=r.theme,a=Qo(e,wa,{data:n,resources:r});if(a.explicit=Qo(e.explicit,_a,{data:n,resources:r}),t=Array.isArray(a.range)&&0!==a.range.length?a.range.slice():o?o.palette("categorical",i.domain().length).slice():[],a.unknown)i.unknown(a.unknown);else if(o&&o.palette("unknown")){var s=o.palette("unknown");i.unknown(s[0])}if(Array.isArray(a.explicit.domain)&&a.explicit.domain.length){for(var c=i.domain().slice(),u=a.explicit.domain,l=Array.isArray(a.explicit.range)?a.explicit.range:[],h=Math.floor(c.length/t.length),f=1;f<h+1;f*=2)t=t.concat(t);if(a.explicit.override)for(var y=0;y<u.length;y++){var p=c.indexOf(u[y]);p>-1&&(t[p]=l[y])}else u.map(function(t,e){return[c.indexOf(t),t,l[e]]}).sort(function(t,e){return t[0]-e[0]}).forEach(function(e){var n=c.indexOf(e[1]);-1!==n&&t.splice(n,0,e[2])});t.length=c.length}return i.range(t),i});var Ra=n(1),Aa=n.n(Ra),Oa={mixin:function(t){return Object.keys(Aa.a.prototype).forEach(function(e){t[e]=Aa.a.prototype[e]}),Aa.a.init(t),t}};function ja(){var t=0,e=0,n=0,r=0;n=n||t;var i={move:function(t){this.moveTo(n+t)},moveTo:function(o){var a=Math.max(t,Math.min(e-r,o));n!==a&&(n=a,i.emit("update"))},update:function(o){var a=!1,s=o.min;t=void 0===s?t:s;var c=o.max;e=void 0===c?e:c,void 0!==o.viewSize&&o.viewSize!==r&&(r=o.viewSize,a=!0);var u=Math.max(t,Math.min(e-r,n));n!==u&&(n=u,a=!0),a&&i.emit("update")},getState:function(){return{min:t,max:e,start:n,viewSize:r}}};return Oa.mixin(i),i}function za(t,e){var n=t.min||0,r=t.max||0,i=t.viewSize||0,o=e||ja();return o.update({min:n,max:r,viewSize:i}),o}function Ta(t,e,n){for(var r=0;r<t.length&&e>t[r];)++r;return t[r]===e&&n&&++r,r}function Ea(){var t=[];function e(){}return e.add=function(e){var n,r=e.min,i=e.max,o=Ta(t,r),a=Ta(t,i,!0),s=[o,a-o];o%2==0&&s.push(r),a%2==0&&s.push(i);var c=t.join(",");return(n=t).splice.apply(n,s),c!==t.join(",")},e.remove=function(e){var n,r=e.min,i=e.max,o=Ta(t,r),a=Ta(t,i,!0),s=[o,a-o];o%2==1&&s.push(r),a%2==1&&s.push(i);var c=t.join(",");return(n=t).splice.apply(n,s),c!==t.join(",")},e.set=function(n){var r=t.join(",");return t=[],Array.isArray(n)?n.forEach(e.add):e.add(n),r!==t.join(",")},e.clear=function(){var e=t.length>0;return t=[],e},e.containsValue=function(e){return function(t,e){for(var n=t.length,r=1;r<n;r+=2)if(t[r-1]<=e&&e<=t[r])return!0;return!1}(t,e)},e.containsRange=function(e){var n=e.min,r=e.max,i=Ta(t,n,!0),o=Ta(t,r);return i===o&&o%2==1},e.toggle=function(t){return e.containsRange(t)?e.remove(t):e.add(t)},e.ranges=function(){for(var e=[],n=1;n<t.length;n+=2)e.push({min:t[n-1],max:t[n]});return e},e}function Na(){var t=[];function e(){}return e.add=function(e){return-1===t.indexOf(e)&&(t.push(e),!0)},e.remove=function(e){var n=t.indexOf(e);return-1!==n&&(t.splice(n,1),!0)},e.contains=function(e){return-1!==t.indexOf(e)},e.values=function(){return t.slice()},e.clear=function(){return t=[]},e.toString=function(){return t.join(";")},e}function Pa(t){for(var e,n,r=t.items,i=t.collection,o=t.vc,a={},s=[],c=0,u=r.length;c<u;c++){i[e=r[c].key]||(i[e]=o()),n=r[c].values||[r[c].value];for(var l=0;l<n.length;l++)i[e].add(n[l])&&(a[e]=a[e]||[],a[e].push(n[l]))}for(var h=Object.keys(a),f=0,d=h.length;f<d;f++)e=h[f],s.push({id:e,values:a[e]});return s}function Ca(t){for(var e,n,r=t.items,i=t.collection,o={},a=[],s=0,c=r.length;s<c;s++)if(i[e=r[s].key]){n=r[s].values||[r[s].value];for(var u=0;u<n.length;u++)i[e].remove(n[u])&&(o[e]=o[e]||[],o[e].push(n[u]))}for(var l=Object.keys(o),h=0,f=l.length;h<f;h++)e=l[h],a.push({id:e,values:o[e]});return a}function Fa(t){for(var e,n,r={},i=0,o=t.length;i<o;i++){e=t[i].key,n=t[i].values||[t[i].value],r[e]||(r[e]=[]);for(var a=0;a<n.length;a++){-1===r[e].indexOf(n[a])&&r[e].push(n[a])}}return r}function Da(t){var e=t.key,n=t.collection,r=t.obj,i=t.fn,o=t.value;n[e]||(n[e]=i()),r[e]=r[e]||[],r[e].push(o),n[e].add(o)}function La(t,e){for(var n,r,i=[],o=Object.keys(t),a=function(t){return-1===e[n].indexOf(t)},s=0,c=o.length;s<c;s++)n=o[s],e[n]?(r=t[n].filter(a)).length&&i.push({id:n,values:r}):i.push({id:n,values:t[n]});return i}function Ia(t,e,n){var r=function(t,e){if(!Object.keys(e).length)return t;for(var n=t.length,r=Array(n),i=0;i<n;i++)r[i]=t[i].key in e?d()({},t[i],{key:e[t[i].key]}):t[i];return r}(e,n);return t&&t.length?t.reduce(function(t,e){return e(t)},r):r}function Ba(t){return t.replace(/(-[a-z])/g,function(t){return t.toUpperCase().replace("-","")})}function Wa(t,e,n){var r=n.ranges,i=n.interceptors,o=n.rc,a=n.aliases,s=!1;return Ia(i["".concat(e,"Ranges")],t,a).forEach(function(t){var n=t.key;if(r[n]||(r[n]=o()),"set"===e)s=r[n][e](t.ranges||t.range)||s;else for(var i=t.ranges||[t.range],a=0;a<i.length;a++)s=r[n][e](i[a])||s}),s}ie();var $a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.vc,n=void 0===e?Na:e,r=t.rc,i=void 0===r?Ea:r,o=!1,a={},s={},c={},u={addValues:[],removeValues:[],toggleValues:[],setValues:[],addRanges:[],setRanges:[],removeRanges:[],toggleRanges:[]},l=function(){var t={values:{},ranges:{}};return Object.keys(s).forEach(function(e){t.values[e]=s[e].values()}),Object.keys(a).forEach(function(e){t.ranges[e]=a[e].ranges()}),t},h={ls:[],clear:function(){this.ls.forEach(function(t){return t.clear()})},start:function(){this.ls.forEach(function(t){return t.start()})},end:function(){this.ls.forEach(function(t){return t.end()})},update:function(){var t=l();this.ls.forEach(function(e){return e._state(t)})},updateValues:function(){var t=l();this.ls.forEach(function(e){return e._state({values:t.values})})},updateRanges:function(){var t=l();this.ls.forEach(function(e){return e._state({ranges:t.ranges})})}},f={link:function(t){if(f===t)throw new Error("Can't link to self");h.ls.push(t),t._state(l())},_state:function(t){if(!t)return l();if(t.values){var e=[];Object.keys(t.values).forEach(function(n){s[n]&&t.values[n].join(";")===s[n].toString()||e.push({key:n,values:t.values[n]})}),Object.keys(s).forEach(function(n){t.values[n]||e.push({key:n,values:[]})}),e.length&&f.setValues(e)}if(t.ranges){var n=[];Object.keys(t.ranges).forEach(function(e){a[e]&&t.ranges[e].join(";")===a[e].toString()||n.push({key:e,ranges:t.ranges[e]})}),Object.keys(a).forEach(function(e){t.ranges[e]||n.push({key:e,ranges:[]})}),n.length&&f.setRanges(n)}},start:function(){o||(o=!0,f.emit("start"),h.start())},end:function(){o&&(o=!1,a={},s={},f.emit("end"),h.end())},isActive:function(){return o},clear:function(){var t=f.brushes().filter(function(t){return"value"===t.type&&t.brush.values().length}).map(function(t){return{id:t.id,values:t.brush.values()}}),e=Object.keys(a).length>0||t.length;a={},s={},e&&(f.emit("update",[],t),h.clear())},brushes:function(){var t=[];return t=(t=t.concat(Object.keys(a).map(function(t){return{type:"range",id:t,brush:a[t]}}))).concat(Object.keys(s).map(function(t){return{type:"value",id:t,brush:s[t]}}))},addValue:function(t,e){f.addValues([{key:t,value:e}])},addValues:function(t){var e=Ia(u.addValues,t,c),r=Pa({vc:n,collection:s,items:e});f.emit("add-values",e),r.length&&(o||(o=!0,f.emit("start")),f.emit("update",r,[]),h.updateValues())}};return f.setValues=function(t){var e=Ia(u.setValues,t,c),r=function(t){for(var e,n,r=t.items,i=t.vCollection,o=t.vc,a={},s=Fa(r),c={},u=Object.keys(i),l=0,h=u.length;l<h;l++)c[n=u[l]]=i[n].values().slice(),delete i[n];for(var f=function(t){i[n]&&i[n].contains(t)||Da({key:n,value:t,collection:i,obj:a,fn:o})},d=Object.keys(s),y=0,p=d.length;y<p;y++)s[n=d[y]].forEach(f);return e=La(c,a),[La(a,c),e]}({items:e,vCollection:s,vc:n});f.emit("set-values",e),(r[0].length>0||r[1].length>0)&&(o||(o=!0,f.emit("start")),f.emit("update",r[0],r[1]),h.updateValues())},f.removeValue=function(t,e){f.removeValues([{key:t,value:e}])},f.removeValues=function(t){var e=Ia(u.removeValues,t,c),n=Ca({collection:s,items:e});f.emit("remove-values",e),n.length&&(f.emit("update",[],n),h.updateValues())},f.addAndRemoveValues=function(t,e){var r=Ia(u.addValues,t,c),i=Ia(u.removeValues,e,c),a=Pa({vc:n,collection:s,items:r}),l=Ca({collection:s,items:i});f.emit("add-values",r),f.emit("remove-values",i),(a.length||l.length)&&(o||(o=!0,f.emit("start")),f.emit("update",a,l),h.updateValues())},f.toggleValue=function(t,e){f.toggleValues([{key:t,value:e}])},f.toggleValues=function(t){var e=Ia(u.toggleValues,t,c),r=function(t){for(var e,n,r,i=t.items,o=t.values,a=t.vc,s={},c={},u=[],l=[],h=Fa(i),f=Object.keys(h),d=0,y=f.length;d<y;d++)for(var p=0,g=(r=h[e=f[d]]).length;p<g;p++)n=r[p],o[e]&&o[e].contains(n)?o[e]&&o[e].contains(n)&&(c[e]=c[e]||[],c[e].push(n),o[e].remove(n)):Da({key:e,value:n,collection:o,obj:s,fn:a});for(var v=Object.keys(s),m=0,x=v.length;m<x;m++)e=v[m],u.push({id:e,values:s[e]});for(var b=Object.keys(c),w=0,_=b.length;w<_;w++)e=b[w],l.push({id:e,values:c[e]});return[u,l]}({items:e,values:s,vc:n});f.emit("toggle-values",e),(r[0].length>0||r[1].length>0)&&(o||(o=!0,f.emit("start")),f.emit("update",r[0],r[1]),h.updateValues())},f.containsValue=function(t,e){var n=c[t]||t;return!!s[n]&&s[n].contains(e)},f.addRange=function(t,e){f.addRanges([{key:t,range:e}])},f.addRanges=function(t){Wa(t,"add",{ranges:a,rc:i,interceptors:u,aliases:c})&&(o||(o=!0,f.emit("start")),f.emit("update",[],[]),h.updateRanges())},f.removeRange=function(t,e){f.removeRanges([{key:t,range:e}])},f.removeRanges=function(t){Wa(t,"remove",{ranges:a,rc:i,interceptors:u,aliases:c})&&(o||(o=!0,f.emit("start")),f.emit("update",[],[]),h.updateRanges())},f.setRange=function(t,e){f.setRanges([{key:t,range:e}])},f.setRanges=function(t){Wa(t,"set",{ranges:a,rc:i,interceptors:u,aliases:c})&&(o||(o=!0,f.emit("start")),f.emit("update",[],[]),h.updateRanges())},f.toggleRange=function(t,e){f.toggleRanges([{key:t,range:e}])},f.toggleRanges=function(t){Wa(t,"toggle",{ranges:a,rc:i,interceptors:u,aliases:c})&&(o||(o=!0,f.emit("start")),f.emit("update",[],[]),h.updateRanges())},f.containsRangeValue=function(t,e){var n=c[t]||t;return!!a[n]&&a[n].containsValue(e)},f.containsRange=function(t,e){var n=c[t]||t;return!!a[n]&&a[n].containsRange(e)},f.containsMappedData=function(t,e,n){for(var r,i,o,u,l=[],h=Object.keys(t),f=0,d=h.length;f<d;f++){if("value"===(r=h[f]))i=t,l[f]={key:"",i:f,bool:!1};else{if("source"===r)continue;i=t[r],l[f]={key:r,i:f,bool:!1}}void 0!==(o=i.source&&i.source.field)&&(void 0!==i.source.key&&(o="".concat(i.source.key,"/").concat(o)),o in c&&(o=c[o]),u=i.value,a[o]?l[f].bool=Array.isArray(u)?a[o].containsRange({min:u[0],max:u[1]}):a[o].containsValue(u):s[o]&&s[o].contains(u)&&(l[f].bool=!0))}return e?(l=l.filter(function(t){return-1!==e.indexOf(t.key)}),"and"===n?!!l.length&&!l.some(function(t){return!1===t.bool}):"xor"===n?!!l.length&&l.some(function(t){return t.bool})&&l.some(function(t){return!1===t.bool}):l.some(function(t){return t.bool})):l.some(function(t){return t.bool})},f.intercept=function(t,e){var n=Ba(t);u[n]&&u[n].push(e)},f.removeInterceptor=function(t,e){var n=Ba(t);if(u[n]){var r=u[n].indexOf(e);-1!==r&&u[n].splice(r,1)}},f.removeAllInterceptors=function(t){var e=[];if(t){var n=Ba(t);u[n]&&u[n].length&&e.push({name:t,handlers:u[n]})}else Object.keys(u).forEach(function(t){u[t].length&&e.push({name:function(t){return t.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())})}(t),handlers:u[t]})});e.forEach(function(t){t.handlers.slice().forEach(function(e){return f.removeInterceptor(t.name,e)})})},f.addKeyAlias=function(t,e){c[t]=e},f.removeKeyAlias=function(t){delete c[t]},Oa.mixin(f),f},qa=ie(),Va=[];function Ya(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}(function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n})(3),function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Math.PI;(function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n})(1.70158),function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158);var Ua=2*Math.PI,Ha=(function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Ua);function i(t){return e*Math.pow(2,10*--t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*Ua)},i.period=function(n){return t(e,n)},i}(1,.3),function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Ua);function i(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*Ua)},i.period=function(n){return t(e,n)},i}(1,.3));(function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Ua);function i(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((r-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*Ua)},i.period=function(n){return t(e,n)},i})(1,.3);function Xa(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Za(t,e){return t.data?t.data.value:"text"===t.type?t.text:e}function Ga(t){return(Ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Ja={fontFamily:"Arial",fontSize:"13px",color:"#595959",backgroundColor:"#ffffff",stroke:"#000000",strokeWidth:0,$fill:"#333333"},Qa=/^\$/;function Ka(t){var e=Ga(t);return"object"!==e&&"function"!==e&&"undefined"!==e}function ts(t,e,n){var r=t[e];r&&r.scale&&r.scale.pxScale?r.scale=r.scale.pxScale(n):r&&r.pxScale&&(t[e]=r.pxScale(n))}function es(t,e){return t.pxScale?t.pxScale(e):t}var ns={normalizeSettings:function(t,e,n){var r=d()({},t),i=d()({},e);return Object.keys(r).forEach(function(t){i[t]={};var o=r[t],a=Ga(o);if("function"==typeof o)i[t].fn=o;else if(Ka(o)){var s=e[t];"string"==typeof s&&Qa.test(s)&&(s=Ja[s]);var c=Ga(s);i[t]="undefined"===c?o:c===a?o:s}else o&&"object"===Ga(o)&&("function"==typeof o.fn&&(i[t].fn=o.fn),void 0!==o.scale&&(i[t].scale=n.scale(o.scale)),"string"==typeof o.ref&&(i[t].ref=o.ref))}),Object.keys(e).forEach(function(t){if(!(t in r)){var n=e[t];"string"===Ga(n)&&Qa.test(n)?i[t]=Ja[n]:i[t]=n}}),i},resolveForItem:function(t,e){for(var n={},r=Object.keys(e),i=r.length,o=t.datum,a=t.datum,s=t.data&&t.data.items,c=s?s.indexOf(a):-1,u=0;u<i;u++){var l=r[u],h=e[l],f="object"===Ga(a)&&void 0!==h,d=f&&"string"==typeof h.ref,y=f&&l in a,p=d?a[h.ref]:y?a[l]:o;Ka(h)?n[l]=h:f&&h.fn?(h.scale&&(t.scale=h.scale),n[l]=h.fn.call(null,t,c)):f&&h.scale&&p?(n[l]=h.scale(p.value),h.scale.bandwidth&&(n[l]+=h.scale.bandwidth()/2)):d&&p?n[l]=p.value:h.fn?n[l]=h.fn.call(null,t,c):n[l]=h}return n},updateScaleSize:ts},rs=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ns,n={};return{resolve:function(r){var i=r.data,o=r.settings,a=r.defaults,s=void 0===a?{}:a,c=r.scaled,u=n.norm=e.normalizeSettings(o,s,t.chart),l={scale:t.chart.scale,formatter:t.chart.formatter};c&&Object.keys(c).forEach(function(t){u[t]&&e.updateScaleSize(u,t,c[t])});var h=[];if(!i||!Array.isArray(i.items)){var f={data:i,resources:l},d=e.resolveForItem(f,n.norm);return{settings:n.norm,item:d}}for(var y=0,p=i.items.length;y<p;y++){var g={datum:i.items[y],data:i,resources:l},v=e.resolveForItem(g,n.norm);v.data=i.items[y],h.push(v)}return{settings:n.norm,items:h}}}};function is(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(t,e){return Array.isArray(e.children)?t.concat(is(e.children)):(t.push(e),t)},[])}function os(t){for(var e=t.nodes,n=t.action,r=t.chart,i=t.trigger,o=[],a=0;a<e.length;a++){var s=e[a].data;null!==s&&o.push(s)}!function(t){var e=t.dataPoints,n=t.action,r=t.chart,i=t.trigger;if(i){var o=i.data||[""],a={items:[],actionFn:"toggleRanges"},s={items:[],actionFn:"toggleValues"};-1!==["add","remove","set","toggle"].indexOf(n)&&(a.actionFn="".concat(n,"Ranges"),s.actionFn="".concat(n,"Values"));for(var c=function(t){var n=e[t];if(!n)return"continue";o.forEach(function(t){var e=n&&!t?n:n[t];if(e){var r={key:e.source.field};void 0!==e.source.key&&(r.key="".concat(e.source.key,"/").concat(e.source.field)),Array.isArray(e.value)?(r.range={min:e.value[0],max:e.value[1]},a.items.push(r)):(r.value=e.value,s.items.push(r))}})},u=0;u<e.length;u++)c(u);i.contexts.forEach(function(t){a.items.length?r.brush(t)[a.actionFn](a.items):r.brush(t)[s.actionFn](s.items)})}}({dataPoints:o,action:n,chart:r,trigger:i})}function as(t){var e=t.collisions,n=t.t,r=t.config,i=t.action,o=[],a=!1;return e.length>0&&(o=e,a=!0,"stop"===n.propagation&&(o=[e[e.length-1]])),os({nodes:o.map(function(t){return t.node}),action:i,chart:r.chart,data:r.data,trigger:n}),a}function ss(t,e,n){var r=n.element().getBoundingClientRect(),i=I(t)?function(t,e){return 1!==t.changedTouches.length?null:{x:t.changedTouches[0].clientX-e.left,y:t.changedTouches[0].clientY-e.top}}(t,r):function(t,e){return{x:t.clientX-e.left,y:t.clientY-e.top}}(t,r);return null===i||i.x<0||i.y<0||i.x>r.width||i.y>r.height?[]:(e.touchRadius>0&&I(t)&&(i={cx:i.x,cy:i.y,r:e.touchRadius}),n.itemsAt(i))}function cs(t,e,n){return t?"function"==typeof t?t(e):t:n}function us(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ls(t){return(ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var hs=function(t){return["on","preferredSize","created","beforeMount","mounted","resize","beforeUpdate","updated","beforeRender","render","beforeUnmount","beforeDestroy","destroyed","defaultSettings","data","settings","formatter","scale","chart","dockConfig","mediator","style","resolver","registries","_DO_NOT_USE_getInfo"].some(function(e){return e===t})};function fs(t,e,n){var r=e.require,i=void 0===r?[]:r,o=e.mediator||{},a=n.settings,s=n.formatter,c=n.scale,u=n.data,l=n.renderer,h=n.chart,f=n.dockConfig,d=n.mediator,y=n.instance,p=n.style,g=n.registries,v=n.resolver,m=n.update,x=n._DO_NOT_USE_getInfo;Object.defineProperty(t,"settings",{get:a}),Object.defineProperty(t,"data",{get:u}),Object.defineProperty(t,"formatter",{get:s}),Object.defineProperty(t,"scale",{get:c}),Object.defineProperty(t,"mediator",{get:d}),Object.defineProperty(t,"style",{get:p}),Object.defineProperty(t,"registries",{get:g}),x&&(t._DO_NOT_USE_getInfo=x),Object.keys(e).forEach(function(n){hs(n)||("function"==typeof e[n]?t[n]=e[n].bind(t):t[n]=e[n])}),i.forEach(function(e){"renderer"===e?Object.defineProperty(t,"renderer",{get:l}):"chart"===e?Object.defineProperty(t,"chart",{get:h}):"dockConfig"===e?Object.defineProperty(t,"dockConfig",{get:f}):"instance"===e?Object.defineProperty(t,"instance",{get:y}):"update"===e&&m?Object.defineProperty(t,"update",{get:m}):"resolver"===e&&Object.defineProperty(t,"resolver",{get:v})}),Object.keys(o).forEach(function(e){t.mediator.on(e,o[e].bind(t))})}function ds(t,e){return t.displayOrder=e.displayOrder,t.dock=e.dock,t.prioOrder=e.prioOrder,t.minimumLayoutMode=e.minimumLayoutMode,t.show=e.show,t}function ys(t,e,n){Object.keys(n.on||{}).forEach(function(r){t.eventListeners=t.eventListeners||[];var i=n.on[r].bind(t);t.eventListeners.push({event:r,listener:i}),e.on(r,i)}),t.emit=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return e.emit.apply(e,[t].concat(r))}}var ps=function(t){var e,n,r,i,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=t.defaultSettings,c=void 0===s?{}:s,u=t._DO_NOT_USE_getInfo,l=void 0===u?function(){return{}}:u,h=a.chart,f=a.container,y=a.mediator,p=a.registries,g=a.theme,v=a.renderer,m=a.settings||{},x=Oa.mixin({}),b=d()(!0,{},c,m),w=[],_=rs({chart:h}),k={nodes:[],chart:h,config:b.brush||{},renderer:null},M={tap:[],over:[]},S=[],R=function(t){return Va.concat(qa.get(t)||[])}(b.type),A={},O=d()({},m,R.filter(function(t){return!hs(t)}));function j(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a,s,c,u="function"==typeof t[e],l="function"==typeof m[e];return u&&(a=(s=t[e]).call.apply(s,[A].concat(i))),"function"==typeof m[e]&&(a=(c=m[e]).call.apply(c,[O].concat(i))),u||l||(a=n.call.apply(n,[A].concat(i))),R.forEach(function(t){var n;t[e]&&(n=t[e]).call.apply(n,[O].concat(i))}),a}}var z=j("preferredSize",function(){return 0}),T=j("resize",function(t){return t.inner}),E=j("created"),N=j("beforeMount"),P=j("mounted"),C=j("beforeUnmount"),F=j("beforeUpdate"),D=j("updated"),L=j("beforeRender"),I=j("beforeDestroy"),B=j("destroyed"),W=t.render,$=function(){b.brush&&(b.brush.consume||[]).forEach(function(t){t.context&&t.style&&S.push(function(t,e){var n=e.context,r=e.data,i=e.style,o=t.chart.brush(n),a=r,s=i.active||{},c=i.inactive||{},u=[];Object.keys(s).forEach(function(t){u.push(t)}),Object.keys(c).forEach(function(t){-1===u.indexOf(t)&&u.push(t)});var l=[],h=!1,f=function(){for(var e,n=is(t.nodes),r=n.length,i=!1,f=function(t){if(!(e=n[t].data))return"continue";n[t].__style||(n[t].__style={},u.forEach(function(e){n[t].__style[e]=n[t][e]}));var r=o.containsMappedData(e,a),f=l.indexOf(n[t]),d=!1;r&&-1===f?(l.push(n[t]),d=!0):r||-1===f||(l.splice(f,1),d=!0),(d||h)&&(u.forEach(function(e){r&&e in s?n[t][e]=s[e]:!r&&e in c?n[t][e]=c[e]:(n[t].__style||(n[t].__style=n[t].__style||{},u.forEach(function(e){n[t].__style[e]=n[t][e]})),n[t][e]=n[t].__style[e])}),i=!0)},d=0;d<r;d++)f(d);return h=!1,i},d=function(){for(var e=is(t.nodes),n=e.length,r=function(t){e[t].__style=e[t].__style||{},u.forEach(function(n){e[t].__style[n]=e[t][n],n in c&&(e[t][n]=c[n])})},i=0;i<n;i++)r(i);h=!0,l.length=0,t.renderer.render(t.nodes)},y=function(){for(var e=is(t.nodes),n=e.length,r=function(t){e[t].__style&&(Object.keys(e[t].__style).forEach(function(n){e[t][n]=e[t].__style[n]}),e[t].__style=void 0)},i=0;i<n;i++)r(i);l.length=0,t.renderer.render(t.nodes)},p=function(){f()&&t.renderer.render(t.nodes)};return o.on("start",d),o.on("end",y),o.on("update",p),{isActive:function(){return o.isActive()},update:function(){l.length=0,h=!0,f()},cleanUp:function(){o.removeListener("start",d),o.removeListener("end",y),o.removeListener("update",p)}}}(k,t))})},q=function(){b.brush&&(b.brush.trigger||[]).forEach(function(t){"over"===t.on?M.over.push(t):M.tap.push(t)})};Object.defineProperty(k,"data",{get:function(){return w}});var V=b.renderer||t.renderer,Y=V?v||p.renderer(V)():v||p.renderer()();k.renderer=Y;var U={requiredSize:function(t,e){return z({inner:t,outer:e,dock:U.dock})}};ds(U,b);var H=function(t){t.key=b.key,t.element=Y.element()},X=function(){};X.dockConfig=U,X.set=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.settings&&(b=d()(!0,{},c,t.settings),ds(U,b)),b.scale&&(e=h.scale(b.scale)),w=b.data?Or(b.data,{dataset:h.dataset,collection:h.dataCollection},{logger:h.logger()},h.dataCollection):e?e.data():[],"string"==typeof b.formatter?n=h.formatter(b.formatter):"object"===ls(b.formatter)?n=h.formatter(b.formatter):e&&e.data().fields&&(n=e.data().fields[0].formatter()),o=g.style(b.style||{})},X.resize=function(t,e){var n=T({inner:t,outer:e});n?(Y.size(n),i=n):(Y.size(t),i=t),O.rect=t},X.getRect=function(){return O.rect};var Z,G,J=function(){var t=Y.renderArgs?Y.renderArgs.slice(0):[];return t.push({data:w}),t};X.beforeMount=N,X.beforeRender=function(){L({size:i})},X.render=function(){var t=k.nodes=W.call.apply(W,[A].concat(us(J())));Y.render(t),Z=t},X.hide=function(){X.unmount(),Y.size({x:0,y:0,width:0,height:0}),Y.clear()},X.beforeUpdate=function(){F({settings:b,data:w})},X.update=function(){G&&G.stop();var t=k.nodes=W.call.apply(W,[A].concat(us(J())));S.forEach(function(t){return t.cleanUp()}),S.length=0,M.tap=[],M.over=[],b.brush&&($(),q()),S.forEach(function(t){t.isActive()&&t.update()}),Z&&b.animations&&b.animations.enabled?(G=function(t,e,n){var r,i=t.old,o=t.current,a=e.renderer,s=[],c={nodes:[],ips:[]},u={nodes:[],ips:[]},l={nodes:[],ips:[]},h=[],f=n.trackBy||Za,y={start:function(){var t={};i.forEach(function(e,n){var r=f(e,n);t[r]=e}),o.forEach(function(e,n){var r=f(e,n);t[r]?(l.ips.push(yo(t[r],e)),l.nodes.push(e),s.push(t[r]),t[r]=!1):(c.nodes.push(e),c.ips.push(yo({r:.001,opacity:0},e)))}),Object.keys(t).forEach(function(e){t[e]&&(u.nodes.push(t[e]),u.ips.push(yo(t[e],d()({},t[e],{r:1e-4,opacity:0}))))}),u.ips.length&&h.push({easing:Ya,duration:200,tweens:u.ips,nodes:s.concat()}),l.ips.length&&h.push({easing:Ya,duration:400,tweens:l.ips,nodes:[]}),c.ips.length&&h.push({easing:Ha,duration:1200,tweens:c.ips,nodes:Xa(l.nodes)}),h.length&&(h[0].started=Date.now(),"undefined"!=typeof window&&(r=window.requestAnimationFrame(y.tick)))},tick:function(){var t=h[0];t||y.stop(),t.started||(t.started=Date.now());var e=(Date.now()-t.started)/t.duration,n=[],i=t.tweens.map(function(n){return n(t.easing(Math.min(1,e)))});n.push.apply(n,Xa(i)),n.push.apply(n,Xa(t.nodes)),a.render(n),e>=1&&(h.shift(),h.length||y.stop()),r&&(r=window.requestAnimationFrame(y.tick))},stop:function(){r&&(window.cancelAnimationFrame(r),r=!1)}};return y}({old:Z,current:t},{renderer:Y},b.animations)).start():Y.render(t),Z=t},X.updated=D,X.destroy=function(){X.unmount(),I(r),Y.destroy(),B(),r=null};var Q=function(t){k.nodes=t,S.forEach(function(t){t.isActive()&&t.update()}),Y.render(t)};return fs(A,t,{settings:function(){return b},data:function(){return w},scale:function(){return e},formatter:function(){return n},renderer:function(){return Y},chart:function(){return h},dockConfig:function(){return U},mediator:function(){return y},instance:function(){return O},style:function(){return o},update:function(){return Q},registries:function(){return p},resolver:function(){return _}}),fs(O,m,{settings:function(){return b},data:function(){return w},scale:function(){return e},formatter:function(){return n},renderer:function(){return Y},chart:function(){return h},dockConfig:function(){return U},mediator:function(){return y},style:function(){return o},_DO_NOT_USE_getInfo:l.bind(A)}),X.getBrushedShapes=function(t,e,n){var r=[];if(b.brush&&b.brush.consume){var i=h.brush(t),o=Y.findShapes("*");b.brush.consume.filter(function(e){return e.context===t}).forEach(function(t){for(var a=0;a<o.length;a++){var s=o[a];s.data&&i.containsMappedData(s.data,n||t.data,e)&&(H(s),r.push(s),o.splice(a,1),a--)}})}return r},X.findShapes=function(t){for(var e=Y.findShapes(t),n=0,r=e.length;n<r;n++)H(e[n]);return e},X.shapesAt=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Y.itemsAt(t);e=n&&"stop"===n.propagation&&r.length>0?[r.pop().node]:r.map(function(t){return t.node});for(var i=0,o=e.length;i<o;i++)H(e[i]);return e},X.brushFromShapes=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.contexts=Array.isArray(e.contexts)?e.contexts:[],os({nodes:t,action:e.action||"toggle",trigger:e,chart:h,data:k.data})},X.mount=function(){r=Y.element&&Y.element()?r:Y.appendTo(f),b.brush&&($(),q()),ys(O,x,m),ys(A,x,t)},X.mounted=function(){return P(r)},X.unmount=function(){[O,A].forEach(function(t){(t.eventListeners||[]).forEach(function(t){var e=t.event,n=t.listener;x.removeListener(e,n)})}),M.tap=[],M.over=[],S.forEach(function(t){t.cleanUp()}),S.length=0,C()},X.onBrushTap=function(t){M.tap.forEach(function(e){(function(t){var e=t.e,n=t.t,r=t.config;return as({collisions:ss(e,n,r.renderer),t:n,config:r,action:cs(n.action,e,"toggle")})})({e:t,t:e,config:k})&&"stop"===e.globalPropagation&&h.toggleBrushing(!0)})},X.onBrushOver=function(t){M.over.forEach(function(e){(function(t){var e=t.e,n=t.t,r=t.config;return as({collisions:ss(e,n,r.renderer),t:n,config:r,action:cs(n.action,e,"set")})})({e:t,t:e,config:k})&&"stop"===e.globalPropagation&&h.toggleBrushing(!0)})},X.def=A,X.ctx=O,X.renderer=function(){return Y},X.set({settings:m}),E(),X};function gs(t,e){return{x:t.x+e.x,y:t.y+e.y}}function vs(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ms(t,e){return{x:t.x*e,y:t.y*e}}function xs(t,e){return t.x-e.x}function bs(t,e){return t.y-e.y}function ws(t,e){return Math.pow(xs(t,e),2)+Math.pow(bs(t,e),2)}function _s(t,e){return Math.sqrt(ws(t,e))}function ks(t,e){return t.x*e.x+t.y*e.y}function Ms(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},r=Math.cos(e),i=Math.sin(e),o=vs(t,n);return gs({x:r*o.x-i*o.y,y:i*o.x+r*o.y},n)}var Ss=1e-12;function Rs(t,e,n){return gs(function(t,e){var n=ks(t,e)/ks(e,e)||1;return{x:e.x*n,y:e.y*n}}(vs(n,t),vs(e,t)),t)}function As(t,e,n){return _s(t,n)+_s(e,n)-_s(t,e)<Ss}function Os(t,e){return t.x>=e.x&&t.x+t.width<=e.x+e.width&&t.y>=e.y&&t.y+t.height<=e.y+e.height}function js(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function zs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ts(t){return t.x1===t.x2&&t.y1===t.y2}function Es(t){return t.width<=0||t.height<=0}function Ns(t){return t.r<=0}function Ps(t){return t.edges.length<=2}var Cs=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&zs(t.prototype,e),n&&zs(t,n)}(t,null,[{key:"testCirclePoint",value:function(t,e){return!Ns(t)&&ws({x:t.cx,y:t.cy},e)<=Math.pow(t.r,2)}},{key:"testCircleRect",value:function(t,e){if(Es(e)||Ns(t))return!1;var n=e.width/2,r=e.height/2,i=e.x+n,o=e.y+r,a=t.r,s=t.cx,c=t.cy,u=Math.abs(s-i),l=Math.abs(c-o);return!(u>n+a||l>r+a)&&(u<=n||l<=r||Math.pow(u-n,2)+Math.pow(l-r,2)<=Math.pow(a,2))}},{key:"testCircleLine",value:function(e,n){if(Ns(e)||Ts(n))return!1;var r=js(k(n),2),i=r[0],o=r[1];if(t.testCirclePoint(e,i)||t.testCirclePoint(e,o))return!0;var a={x:e.cx,y:e.cy},s=Rs(i,o,a);return ws(s,a)<=Math.pow(e.r,2)&&As(i,o,s)}},{key:"testCircleCircle",value:function(t,e){if(Ns(t)||Ns(e))return!1;var n=t.cx-e.cx,r=t.cy-e.cy;return Math.pow(n,2)+Math.pow(r,2)<=Math.pow(t.r+e.r,2)}},{key:"testCirclePolygon",value:function(e,n){if(Ps(n)||Ns(e))return!1;var r={x:e.cx,y:e.cy};if(t.testPolygonPoint(n,r))return!0;for(var i=n.edges.length,o=0;o<i;o++){var a=R(n.edges[o]);if(t.testCircleLine(e,a))return!0}return!1}},{key:"testPolygonPoint",value:function(e,n){if(Ps(e)||!t.testRectPoint(e.boundingRect(),n))return!1;for(var r=!0,i=e.vertices.length,o={x:e.xMin-1,y:n.y},a=0;a<i-1;a++){var s=R(e.edges[a]);s.y1<n.y&&s.y2<n.y||s.y1>n.y&&s.y2>n.y||(r=t.testLineLine(s,R([o,n]))?!r:r)}return!r}},{key:"testPolygonLine",value:function(e,n){if(Ps(e))return!1;for(var r=0,i=e.edges.length;r<i;r++){var o=R(e.edges[r]);if(t.testLineLine(n,o))return!0}var a=js(k(n),2),s=a[0],c=a[1];return t.testPolygonPoint(e,s)||t.testPolygonPoint(e,c)}},{key:"testPolygonRect",value:function(e,n){if(Ps(e))return!1;for(var r=0,i=e.edges.length;r<i;r++){var o=R(e.edges[r]);if(t.testRectLine(n,o))return!0}var a=js(M(n),4),s=a[0],c=a[1],u=a[2],l=a[3];return t.testPolygonPoint(e,s)||t.testPolygonPoint(e,c)||t.testPolygonPoint(e,u)||t.testPolygonPoint(e,l)}},{key:"testRectRect",value:function(t,e){return!Es(t)&&!Es(e)&&(t.x<=e.x+e.width&&e.x<=t.x+t.width&&t.y<=e.y+e.height&&e.y<=t.y+t.height)}},{key:"testRectPoint",value:function(t,e){return!Es(t)&&(e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height)}},{key:"testRectLine",value:function(e,n){if(Ts(n)||Es(e))return!1;var r=js(k(n),2),i=r[0],o=r[1];if(t.testRectPoint(e,i)||t.testRectPoint(e,o))return!0;for(var a=M(e),s=a.length,c=0;c<s;c++){var u=R([a[c],a[3!==c?c+1:0]]);if(t.testLineLine(u,n))return!0}return!1}},{key:"testLineLine",value:function(t,e){var n,r,i=js(k(t),2),o=i[0],a=i[1],s=js(k(e),2),c=s[0],u=s[1],l=xs(a,o),h=bs(a,o),f=xs(u,c),d=bs(u,c),y=xs(o,c),p=bs(o,c),g=d*l-f*h,v=f*p-d*y,m=l*p-h*y;if(0===l&&0===h)return!1;if(0===f&&0===d)return!1;if(0===g){if(0===v&&0===m){if(0===l){if(0===h)return o.x===a.x&&o.y===a.y;n=bs(c,o)/h,r=bs(u,o)/h}else n=(c.x-o.x)/l,r=(u.x-o.x)/l;return!(n<0&&r<0||n>1&&r>1)}return!1}var x=v/g;return g=m/g,x>=0&&x<=1&&g>=0&&g<=1}},{key:"testLinePoint",value:function(t,e){if(Ts(t))return!1;var n=js(k(t),2);return As(n[0],n[1],e)}}]),t}();function Fs(t){return(Fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Ds=/^\$/,Ls="@extend";function Is(t){throw new Error('Cyclical reference for "'.concat(t,'"'))}function Bs(t,e){return function t(e,n,r){if("string"==typeof e){var i=n[e];return-1!==r.indexOf(e)&&Is(e),Ds.test(i)?(r.push(e),t(i,n,r)):i}var o=e,a=d()(!0,{},n,e),s={};if(e[Ls]){var c=e[Ls];-1!==r.indexOf(c)&&Is(c);var u=r.slice();u.push(c),o=d()(!0,{},t(a[c],n,u),e)}return Object.keys(o).forEach(function(e){var n=r.slice();if(e!==Ls&&!Ds.test(e)){s[e]=o[e];var i=s[e];Ds.test(i)&&i in a?(-1!==r.indexOf(i)&&Is(i),n.push(i),"object"===Fs(i=a[i])?s[e]=t(i,a,n):Ds.test(i)&&i in a?s[e]=t(i,a,n):s[e]=i):"object"===Fs(i)&&(s[e]=t(i,a,n))}}),s}(t,e,[])}function Ws(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={},n=function(t){t.forEach(function(t){var n=Array.isArray(t.colors[0])?t.colors:[t.colors];e[t.key]={colors:n,sizes:n.map(function(t){return t?t.length:0})}})},r={palette:function(t,n){return function(t,n){var r=e[t];if(!r)return[];for(var i=r.sizes,o=0;o<i.length;o++)if(n<=i[o])return r.colors[o];return r.colors[i.length-1]}(t,n)},setPalettes:n,style:function(e){return Bs(e,t)}};return n(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]),r}function $s(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var qs=function(t){return["on","created","beforeMount","mounted","resize","beforeUpdate","updated","beforeRender","render","beforeDestroy","destroyed","data","settings"].some(function(e){return e===t})};function Vs(t,e,n){var r=e.left-n.left,i=e.top-n.top,o=A(t),a=d()(!0,{},t);switch(o){case"circle":a.cx+=r,a.cy+=i;break;case"polygon":for(var s=0,c=a.vertices.length;s<c;s++){var u=a.vertices[s];u.x+=r,u.y+=i}break;case"line":a.x1+=r,a.y1+=i,a.x2+=r,a.y2+=i;break;case"point":case"rect":a.x+=r,a.y+=i}return a}function Ys(t,e){var n=t.element,r=t.data,i=void 0===r?[]:r,o=t.settings,a=void 0===o?{}:o,s=t.on,c=void 0===s?{}:s,u=e.registries,l=e.logger,h=Ws(e.style,e.palettes),f=p,y=[],g=d()({},t,f.filter(function(t){return!qs(t)})),v=function(){var t={};return Oa.mixin(t),t}(),m=[],x=[],b=null,w=null,_=null,k=[],M=function(){},S=function(){},R={},A=!1,O=function(t,e){var n=u.component(t.type);return{instance:ps(n,{settings:t,chart:g,mediator:v,registries:u,theme:h,container:e}),settings:d()(!0,{},t),key:t.key,hasKey:void 0!==t.key}};function j(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a,s;"function"==typeof t[e]?a=(s=t[e]).call.apply(s,[g].concat(i)):a=n.call.apply(n,[g].concat(i));return f.forEach(function(t){var n;t[e]&&(n=t[e]).call.apply(n,[g].concat(i))}),a}}var z=function(t){for(var e=0;e<m.length;e++)if(m[e].instance===t)return m[e];return null},T=function(t){for(var e=0;e<m.length;e++){var n=m[e];if(n.hasKey&&n.key===t)return e}return-1},E=function(t){var e=L(a.dockLayout);t.forEach(function(t){e.addComponent(t.instance,t.key)});var r=e.layout(n),i=r.visible,o=r.hidden;return{visible:i.map(function(t){return z(t)}),hidden:o.map(function(t){return z(t)})}},N=j("created"),P=j("beforeMount"),C=j("mounted"),F=j("beforeUpdate"),D=j("updated"),W=j("beforeRender"),$=j("beforeDestroy"),q=j("destroyed"),V=function(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).partialData,r=e.formatters,i=void 0===r?{}:r,o=e.scales,a=void 0===o?{}:o,s=e.scroll,c=void 0===s?{}:s;M=function(t,e){var n=e.types,r=e.logger,i={},o=[];return Array.isArray(t)?o.push.apply(o,B(t)):(r.warn('Deprecated: "data-source" configuration"'),o.push(t)),o.forEach(function(t,e){var r=n(t.type);if(r){var o=r({key:t.key||e,data:t.data,config:t.config});i[t.key||e]=o}}),function(t){return t?i[t]:i[Object.keys(i)[0]]}}(t,{logger:l,types:u.data}),n||Object.keys(R).forEach(function(t){return R[t].clear()}),e.palettes&&h.setPalettes(e.palettes),S=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Or,i={};return(t||[]).forEach(function(t){if(!t.key)throw new Error('Data collection is missing "key" property');if("object"===jr(t.data)&&"collection"in t.data)throw new Error("Data config for collections may not reference other collections");i[t.key]=r(t.data,e,n)}),function(t){var e,n;if("string"==typeof t?e=t:"object"===jr(t)&&(e=t.key,n=t),!(e in i))throw new Error("Unknown data collection: ".concat(e));var r=i[e];if(n&&n.fields&&n.fields.filter){var o=r.fields.filter(n.fields.filter);r.fields.length!==o.length&&(r=d()(r,{fields:o}))}return r}}(e.collections,{dataset:M},{logger:l}),b=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=Sa(t[i],e,n));return r}(a,{dataset:M,collection:S},{scale:u.scale,theme:h,logger:l}),w=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=Tr(t[i],e,n));return r}(i,{dataset:M,collection:S},{formatter:u.formatter,theme:h,logger:l}),_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=za(t[r],e?e[r]:null));return n}(c,_)};function Y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={},r=t.filter(function(t){return!!t.key}).map(function(t){return t.key});k.forEach(function(t){t.key&&-1!==r.indexOf(t.key)?e[t.key]=t:t.destroy()}),k=t.map(function(t){var r=t.key&&e[t.key]?e[t.key]:u.interaction(t.type)(g,v,n);return r.set(t),r})}var U=function(t){var e=n.getBoundingClientRect(),r="clientX"in t?t.clientX:t.x,i="clientY"in t?t.clientY:t.y,o={x:r-e.left,y:i-e.top},a=[];return x.forEach(function(t){var e=t.instance.getRect();Cs.testRectPoint({x:e.margin.left+e.x*e.scaleRatio.x,y:e.margin.top+e.y*e.scaleRatio.y,width:e.width*e.scaleRatio.x,height:e.height*e.scaleRatio.y},o)&&a.push(t)}),a};return g.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.partialData;t.data&&(i=t.data),t.settings&&(a=t.settings,Y(t.settings.interactions)),F(),V(i,a,{partialData:e});for(var r=a,o=r.formatters,s=r.scales,c=r.components,u=void 0===c?[]:c,l=function(t){var e=m[t];u.some(function(t){return e.hasKey&&e.key===t.key})||(m.splice(t,1),e.instance.destroy())},h=m.length-1;h>=0;h--)l(h);(m=u.map(function(t){var e=T(t.key);return-1===e?O(t,n):(m[e].updateWith={formatters:o,scales:s,data:i,settings:t},m[e])})).forEach(function(t){t.updateWith&&t.instance.set(t.updateWith)}),m.forEach(function(t){t.updateWith&&t.instance.beforeUpdate()});var f,d=[],y=[];if(e)m.forEach(function(t){t.updateWith&&t.visible&&d.push(t)}),f=d;else{var p=E(m),g=p.visible,v=p.hidden;x=g,f=g,g.forEach(function(t){t.updateWith&&t.visible?d.push(t):y.push(t)}),v.forEach(function(t){t.instance.hide(),t.visible=!1,delete t.updateWith})}y.forEach(function(t){return t.instance.beforeMount()}),y.forEach(function(t){return t.instance.mount()}),f.forEach(function(t){return t.instance.beforeRender()}),f.forEach(function(t){t.updateWith&&t.visible?t.instance.update():t.instance.render()}),e||x.forEach(function(t,e){return function(t,e){var r=t.instance.renderer().element();if(!isNaN(e)&&r&&n&&n.childNodes){var i=n.childNodes,o=Math.min(i.length-1,Math.max(e,0)),a=i[o];n.insertBefore&&void 0!==a&&n.insertBefore(r,i[o])}}(t,e)}),y.forEach(function(t){return t.instance.mounted()}),d.forEach(function(t){return t.instance.updated()}),x.forEach(function(t){delete t.updateWith,t.visible=!0}),D()},g.destroy=function(){$(),m.forEach(function(t){return t.instance.destroy()}),m=[],y.forEach(function(t){var e=t.key,r=t.listener;return n.removeEventListener(e,r)}),Y(),delete g.update,delete g.destroy,q()},g.getAffectedShapes=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"and",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=[];return m.filter(function(t){return void 0===r||null===r||t.key===r}).forEach(function(r){i.push.apply(i,$s(r.instance.getBrushedShapes(t,e,n)))}),i},g.findShapes=function(t){var e=[];return x.forEach(function(n){e.push.apply(e,$s(n.instance.findShapes(t)))}),e},g.componentsFromPoint=function(t){return U(t).map(function(t){return t.instance.ctx})},g.shapesAt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[],i=n.getBoundingClientRect(),o=x;if(Array.isArray(e.components)&&e.components.length>0){var a=e.components.map(function(t){return t.key});o=x.filter(function(t){return-1!==a.indexOf(t.key)}).map(function(t){return{instance:t.instance,opts:e.components[a.indexOf(t.key)]}})}for(var s=o.length-1;s>=0;s--){var c=o[s],u=Vs(t,i,c.instance.renderer().element().getBoundingClientRect()),l=c.instance.shapesAt(u,c.opts),h=l.length>0&&"stop"===e.propagation;if(r.push.apply(r,$s(l)),r.length>0&&h)return r}return r},g.brushFromShapes=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{components:[]},n=e.components.map(function(t){return t.key});x.forEach(function(r){var i=n.indexOf(r.key);if(-1!==i){for(var o=[],a=0,s=t.length;a<s;a++){var c=t[a];c.key===r.key&&o.push(c)}r.instance.brushFromShapes(o,e.components[i])}})},g.scroll=function(){return function(t,e){return e[t]||(e[t]=ja()),e[t]}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",_)},g.dataset=function(t){return M(t)},g.dataCollection=function(t){return S(t)},g.scales=function(){return b},g.formatters=function(){return w},g.brush=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return R[t]||(R[t]=$a()),R[t]},g.scale=function(t){return function(t,e,n,r){var i;return"string"==typeof t&&e[t]?i=e[t]:"object"===ka(t)&&"scale"in t&&e[t.scale]&&(i=e[t.scale]),i||Sa(t,n,r)}(t,b,{dataset:M,collection:S},{scale:u.scale,theme:h,logger:l})},g.formatter=function(t){return function(t,e,n,r){var i;return"string"==typeof t&&e[t]?i=e[t]:"object"===zr(t)&&"formatter"in t&&e[t.formatter]?i=e[t.formatter]:"object"===zr(t)&&"type"in t&&e[t.type]&&(i=e[t.type]),i||Tr(t,n,r)}(t,w,{dataset:M,collection:S},{formatter:u.formatter,theme:h,logger:l})},g.toggleBrushing=function(t){A=void 0!==t?t:!A},g.component=function(t){var e=T(t);if(-1!==e)return m[e].instance.ctx},g.logger=function(){return l},g.theme=function(){return h},Object.defineProperty(g,"interactions",{get:function(){return{instances:k,on:function(){k.forEach(function(t){return t.on()})},off:function(){k.forEach(function(t){return t.off()})}}}}),N(),n&&(P(),function(){n.innerHTML="",function(){var t=a.components,e=void 0===t?[]:t;W(),V(i,a),m=e.map(function(t){return O(t,n)});var r=E(m),o=r.visible,s=r.hidden;x=o,s.forEach(function(t){t.instance.hide(),t.visible=!1}),o.forEach(function(t){return t.instance.beforeMount()}),o.forEach(function(t){return t.instance.mount()}),o.forEach(function(t){return t.instance.beforeRender()}),o.forEach(function(t){return t.instance.render()}),o.forEach(function(t){return t.instance.mounted()}),o.forEach(function(t){t.visible=!0})}(),Object.keys(c).forEach(function(t){var e=c[t].bind(g);n.addEventListener(t,e),y.push({key:t,listener:e})});var t={},e=function(e){e.touches?(t.x=e.touches[0].clientX,t.y=e.touches[0].clientY,t.multiTouch=e.touches.length>1):(t.x=e.clientX,t.y=e.clientY,t.multiTouch=!1),t.time=Date.now(),t.comps=U(t)},r=function(e){var n=t.comps||U(e);if(!n.every(function(t){return t.instance.def.disableTriggers})&&("touchend"===e.type&&e.preventDefault(),function(t,e){var n=I(t),r=n?t.changedTouches[0]:t,i=Date.now()-e.time,o=isNaN(e.x)?0:Math.abs(r.clientX-e.x),a=isNaN(e.y)?0:Math.abs(r.clientY-e.y);return(0===t.button||n)&&!e.multiTouch&&o<=12&&a<=12&&i<=300}(e,t)))for(var r=n.length-1;r>=0;r--)if(n[r].instance.onBrushTap(e),A){A=!1;break}},o=[];o.push({key:"mousedown",listener:e}),o.push({key:"mouseup",listener:r}),function(t){return"ontouchstart"in t&&"ontouchend"in t}(n)&&(o.push({key:"touchstart",listener:e}),o.push({key:"touchend",listener:r})),o.push({key:"mousemove",listener:function(t){for(var e=U(t),n=e.length-1;n>=0;n--)if(e[n].instance.onBrushOver(t),A){A=!1;break}}}),o.forEach(function(t){n.addEventListener(t.key,t.listener),y.push(t)}),Y(a.interactions)}(),C(n),g.element=n),g}Ys.mixin=function(t){p.push(t)};var Us=Ys,Hs=function(t){var e=ie(t);return e.prio=function(t){return t?e.default(t[0]):[e.default()]},e.types=function(){return e.getKeys()},e},Xs=ie();function Zs(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Gs(t){return(Gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Js=function(t){return t.filter(function(t){return"number"==typeof t&&!isNaN(t)})},Qs=function(t){return t.reduce(function(t,e){return t+e},0)},Ks={first:function(t){return t[0]},last:function(t){return t[t.length-1]},min:function(t){var e=Js(t);return e.length?Math.min.apply(null,e):NaN},max:function(t){var e=Js(t);return e.length?Math.max.apply(null,e):NaN},sum:function(t){var e=Js(t);return e.length?e.reduce(function(t,e){return t+e},0):NaN},avg:function(t){var e=Js(t),n=e.length;return n?Qs(e)/n:NaN}};function tc(t,e,n,r){var i={},o=r.field||(void 0!==t.field?e.field(t.field):null);return Object.keys(n).forEach(function(a){var s=n[a],c=i[a]={};-1!==["number","string","boolean"].indexOf(Gs(s))?(c.type="primitive",c.value=s):"function"==typeof s?(c.type="function",c.value=s,c.label=s,c.field=o):"object"===Gs(s)&&(s.fields?c.fields=s.fields.map(function(n){return tc(t,e,{main:n},r).main}):void 0!==s.field?(c.type="field",c.field=e.field(s.field),c.value=c.field.value,c.label=c.field.label):o&&(c.value=o.value,c.label=o.label,c.field=o),"function"==typeof s.filter&&(c.filter=s.filter),void 0!==s.value&&(c.value=s.value),void 0!==s.label&&(c.label=s.label),"function"==typeof s.reduce?c.reduce=s.reduce:s.reduce?c.reduce=Ks[s.reduce]:c.field&&c.field.reduce&&(c.reduce="string"==typeof c.field.reduce?Ks[c.field.reduce]:c.field.reduce))}),i}function ec(t,e){var n=tc(t,e,{main:{value:t.value,label:t.label,reduce:t.reduce,filter:t.filter}},{}).main;return{props:tc(t,e,t.props||{},n),main:n}}function nc(t,e){var n=e.main,r=e.propsArr,i=e.props,o=[],a=n.field.formatter()||function(t){return t},s={};return r.forEach(function(t){s[t]=i[t].field?i[t].field.formatter():function(t){return t}}),o.push.apply(o,Zs(t.map(function(t){var e=t.items.map(function(t){return t.value}),o=n.reduce,c={value:o?o(e):e,source:t.items[0].source};return c.label=a(c.value),r.forEach(function(e){var n;n=t.items.map(function(t){return t[e].value});var r=i[e].reduce;c[e]={value:r?r(n):n},c[e].label=String(s[e](c[e].value)),t.items[0][e].source&&(c[e].source=t.items[0][e].source)}),c}))),o}function rc(t){var e=t.cfg,n=t.itemData,r=t.obj,i=t.target,o=t.tracker,a="function"===t.trackType?e.trackBy(n):n[e.trackBy],s=o[a];s||(s=o[a]={items:[],id:a},i.push(s)),s.items.push(r)}function ic(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function oc(t){return(oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ac(t,e,n){var r=n.key,i={value:"function"==typeof t.value?t.value(e):void 0!==t.value?t.value:e};return i.label="function"==typeof t.label?t.label(e):void 0!==t.label?String(t.label):String(i.value),t.field&&(i.source={key:r,field:t.field.key()}),i}function sc(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var cc={numeric:function(t){return t.filter(function(t){return"number"==typeof t&&!isNaN(t)})}};var uc=function(t){var e=t.source,n=t.data,r=t.cache,i=t.config;if(n){var o=n;"string"==typeof o&&(o=function(t){var e=t.data,n=t.config,r=e.split("\n"),i=r[0],o=r[1],a=",";if(n&&n.parse&&n.parse.delimiter)a=n.parse.delimiter;else if(i)for(var s=[/,/,/\t/,/;/],c=0;c<s.length;c++){var u=s[c];if(i&&o){if(u.test(i)&&u.test(o)&&i.split(u).length===o.split(u).length){a=u;break}}else u.test(i)&&(a=u)}return r.map(function(t){return t.split(a)})}({data:n,config:i})),Array.isArray(o)&&function(t){var e,n=t.source,r=t.data,i=t.cache,o=t.config,a=r,s=o&&o.parse;Array.isArray(r[0])?s&&!1===s.headers?e=r[0].map(function(t,e){return e}):(e=r[0],a=r.slice(1)):e=Object.keys(r[0]);var c,u=!!s&&"function"==typeof s.row&&s.row,l=e;l=s&&"function"==typeof s.fields?s.fields(l.slice()):e.map(function(t){return{key:t,title:t}}),Array.isArray(r[0])?c=l.map(function(){return[]}):(c={},l.forEach(function(t){c[t.key]=[]}));for(var h=0;h<a.length;h++){var f=u?u(a[h],h,l):a[h];if(f)if(Array.isArray(f))for(var y=0;y<l.length;y++)c[y].push(f[y]);else for(var p=0;p<l.length;p++)c[l[p].key].push(f[l[p].key])}for(var g=Array.isArray(c)?function(t){return c[t]}:function(t){return c[l[t].key]},v=0;v<l.length;v++){var m=g(v),x=cc.numeric(m),b=x.length>0,w=b?"measure":"dimension",_=b?Math.min.apply(Math,sc(x)):NaN,k=b?Math.max.apply(Math,sc(x)):NaN;i.fields.push(kr(d()({source:n,key:v,title:l[v].title,values:m,min:_,max:k,type:w},l[v]),{value:l[v].value,label:l[v].label}))}}({data:o,cache:r,source:e,config:i})}};function lc(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.key,n=t.data,r=t.config,i={fields:[]},o={key:function(){return e},raw:function(){return n},field:function(t){return function(t,e){var n=e.cache;if("number"==typeof t)return n.fields[t];for(var r=0;r<n.fields.length;r++)if(n.fields[r].key()===t)return n.fields[r];for(var i=0;i<n.fields.length;i++)if(n.fields[i].title()===t)return n.fields[i];return null}(t,{cache:i,matrix:n})},fields:function(){return i.fields.slice()},extract:function(t){return function(t,e){var n=[];return(Array.isArray(t)?t:[t]).forEach(function(t){void 0!==t.field&&function(){var r=e.field(t.field),i=e.key();if(!r)throw Error("Field '".concat(t.field,"' not found"));for(var o=ec(t,e),a=o.props,s=o.main,c=Object.keys(a),u=!!t.trackBy,l=oc(t.trackBy),h={},f=[],d=r.items(),y=[],p=function(e){var n=d[e];if(s.filter&&!s.filter(n))return"continue";var r=ac(s,n,{key:i});c.forEach(function(t){var o=a[t],s=o.field?o.field.items()[e]:n;r[t]=ac(o,s,{key:i})}),u&&rc({cfg:t,itemData:n,obj:r,target:f,tracker:h,trackType:l}),y.push(r)},g=0;g<d.length;g++)p(g);u?n.push.apply(n,ic(nc(f,{main:s,propsArr:c,props:a}))):n.push.apply(n,y)}()}),n}(t,o)},hierarchy:function(){return null}};return uc({key:e,data:n,config:r,cache:i}),o}lc.util={normalizeConfig:ec,collect:nc,track:rc};var hc=ie();hc.default("matrix"),hc("matrix",lc),hc("default",lc);var fc=ie();fc("native",function(t,e,n){var r,i,o={chart:t,mediator:e,element:n},a=[],s=!0;function c(){"function"==typeof r.enable&&(r.enable=r.enable.bind(o)()),r.enable&&Object.keys(r.events).forEach(function(t){var e=r.events[t].bind(o);n.addEventListener(t,e),a.push({key:t,listener:e})})}function u(){a.forEach(function(t){var e=t.key,r=t.listener;n.removeEventListener(e,r)}),a=[]}return{get key(){return i},set:function(t){!function(t){i=t.key,(r=t).events=r.events||[],void 0===r.enable&&(r.enable=!0)}(t),u(),s&&c()},off:function(){s=!1,u()},on:function(){s=!0,0===a.length&&c()},destroy:function(){u(),o=null,r=null}}});var dc=fc;function yc(t,e,n){return Math.max(t,Math.min(e,n))}function pc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gc(t){var e,n=t.item,r=t.boxWidth,i=t.boxPadding,o=t.rendwidth,a=t.rendheight,s="x",c="y",u="width",l="height",h=o,f=a;t.flipXY&&(s="y",c="x",u="height",l="width",h=a,f=o);var y=function(t){var e=t.start,n=t.end,r=t.minPx,i=void 0===r?.1:r,o=t.maxPx,a=void 0===o?1:o,s=Math.max(e,n),c=Math.min(e,n),u=yc(-.1,1.2,s),l=yc(-.1,1.2,c),h=u*a-l*a,f=Math.max(i,h),d=(f-h)/2;return{actualDiff:f,startModifier:d,actualLow:l*a-d}}({start:n.start,end:n.end,minPx:n.box.minHeightPx,maxPx:f}),p=y.actualDiff,g=y.actualLow;return d()({},n.box,(pc(e={type:"rect"},s,(i+n.major)*h),pc(e,c,g),pc(e,l,p),pc(e,u,r*h),pc(e,"data",n.data||{}),pc(e,"collider",{type:null}),e))}function vc(t){var e,n=t.item,r=t.from,i=t.to,o=t.boxCenter,a=t.rendwidth,s=t.rendheight,c="x1",u="y1",l="x2",h="y2",f=a,y=s;return t.flipXY&&(c="y1",u="x1",l="y2",h="x2",f=s,y=a),d()({},n.line,(pc(e={type:"line"},h,Math.floor(r*y)),pc(e,c,o*f),pc(e,u,Math.floor(i*y)),pc(e,l,o*f),pc(e,"data",n.data||{}),pc(e,"collider",{type:null}),e))}function mc(t){var e,n=t.item,r=t.key,i=t.position,o=t.width,a=t.boxCenter,s=t.rendwidth,c=t.rendheight,u="x1",l="y1",h="x2",f="y2",y=s,p=c;t.flipXY&&(u="y1",l="x1",h="y2",f="x2",y=c,p=s);var g=o/2;return d()({type:"line"},n[r],(pc(e={},l,Math.floor(i*p)),pc(e,u,(a-g)*y),pc(e,f,Math.floor(i*p)),pc(e,h,(a+g)*y),pc(e,"r",g*y),pc(e,"cx",a*y),pc(e,"cy",i*p),pc(e,"width",o*y),pc(e,"data",n.data||{}),pc(e,"collider",{type:null}),e))}function xc(t){return(xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var bc={line:{show:!0,stroke:"#000",strokeWidth:1},median:{show:!0,stroke:"#000",strokeWidth:1},whisker:{show:!0,stroke:"#000",strokeWidth:1,fill:"",type:"line",width:1},box:{show:!0,fill:"#fff",stroke:"#000",strokeWidth:1,width:1,maxWidthPx:void 0,minWidthPx:1,minHeightPx:1}},wc=Object.keys(bc),_c={require:["chart","resolver"],defaultSettings:{settings:{},data:{},style:{box:"$shape",line:"$shape-guide",whisker:"$shape-guide",median:"$shape-guide--inverted"}},created:function(){this.rect={x:0,y:0,width:0,height:0},this.state={}},beforeRender:function(t){this.rect=t.size},render:function(t){var e=t.data,n=this.rect,r=n.width,i=n.height,o="horizontal"===this.settings.settings.orientation,a=this.style,s=this.resolver,c=function(t){var e,n=t.keys,r=t.data,i=t.defaultSettings,o=t.style,a=t.settings,s=t.width,c=t.height,u=t.resolver,l=d()(!0,{},i||{},o||{}),h={major:"horizontal"===a.orientation?c:s,minor:"horizontal"===a.orientation?s:c},f=a.major;e="object"===xc(f)&&"object"===xc(f.ref)&&void 0!==f.ref.start&&void 0!==f.ref.end?u.resolve({data:r,defaults:{start:0,end:1},scaled:h,settings:d()(!0,{},{binStart:{scale:a.major.scale,ref:a.major.ref.start},binEnd:{scale:a.major.scale,ref:a.major.ref.end}})}):"object"===xc(f)&&void 0!==f.binStart&&void 0!==f.binEnd?u.resolve({data:r,defaults:{start:0,end:1},scaled:h,settings:d()(!0,{},{binStart:{scale:a.major.scale,ref:"binStart"},binEnd:{scale:a.major.scale,ref:"binEnd"}},a.major)}):u.resolve({data:r,scaled:h,defaults:{major:.5},settings:{major:a.major}});for(var y,p=a.minor||{},g={major:e,minor:u.resolve({data:r,defaults:{start:0,end:1},scaled:h,settings:d()(!0,{},{start:{scale:p.scale,ref:"start"},end:{scale:p.scale,ref:"end"},min:{scale:p.scale,ref:"min"},max:{scale:p.scale,ref:"max"},med:{scale:p.scale,ref:"med"}},p)})},v=0,m=n.length;v<m;v++)g[y=n[v]]=u.resolve({data:r,defaults:l[y],settings:a[y],scaled:h});return g}({keys:wc,data:e,defaultSettings:bc,style:a,settings:this.settings.settings,width:r,height:i,resolver:s}),u=c.settings;return function(t){for(var e=t.width,n=t.height,r=t.flipXY,i=t.resolved,o=t.keys,a=[],s=null,c=i.major.items,u=function(t,u){var l=c[t].data,h=[],f=null,y=null;void 0!==i.major.settings.binStart?(f=i.major.items[t].binStart,y=i.major.items[t].binEnd,s=i.major.settings.binStart.scale):f=(s=i.major.settings.major.scale)?i.major.items[t].major:0;var p=0;s?s.bandwidth?f-=(p=s.bandwidth())/2:p=y-f:p=1;var g=d()({},{major:f,majorEnd:y},i.minor.items[t]);o.forEach(function(e){return g[e]=i[e].items[t]});var v=r?n:e,m=Math.min(p*g.box.width,isNaN(g.box.maxWidthPx)?v:g.box.maxWidthPx/v),b=(p-m)/2,w=b+g.major+m/2,_=e,k=n;if(g.box.show&&x(g.start)&&x(g.end)&&h.push(gc({item:g,boxWidth:m,boxPadding:b,rendwidth:_,rendheight:k,flipXY:r})),g.line.show&&x(g.min)&&x(g.start)&&h.push(vc({item:g,from:g.min,to:g.start,boxCenter:w,rendwidth:_,rendheight:k,flipXY:r})),g.line.show&&x(g.max)&&x(g.end)&&h.push(vc({item:g,from:g.max,to:g.end,boxCenter:w,rendwidth:_,rendheight:k,flipXY:r})),g.median.show&&x(g.med)&&h.push(mc({item:g,key:"median",position:g.med,width:m,boxCenter:w,rendwidth:_,rendheight:k,flipXY:r})),g.whisker.show){var M=m*g.whisker.width;x(g.min)&&h.push(mc({item:g,key:"whisker",position:g.min,width:M,boxCenter:w,rendwidth:_,rendheight:k,flipXY:r})),x(g.max)&&h.push(mc({item:g,key:"whisker",position:g.max,width:M,boxCenter:w,rendwidth:_,rendheight:k,flipXY:r}))}var S={type:"container",data:l,collider:{type:"bounds"},children:h};a.push(S)},l=0,h=c.length;l<h;l++)u(l);return a}({items:c.items,settings:u,width:r,height:i,flipXY:o,resolved:c,keys:wc})}};var kc={fill:"fill",stroke:"stroke",opacity:"opacity",strokeWidth:"stroke-width",fontFamily:"font-family",fontSize:"font-size",baseline:"dominant-baseline",dominantBaseline:"dominant-baseline",anchor:"text-anchor",textAnchor:"text-anchor",maxWidth:"maxWidth",transform:"transform",strokeDasharray:"stroke-dasharray",id:"id"};function Mc(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="",r=0;r<t.length;r++){var i=t[r];n+=0===r?"M".concat(i.x," ").concat(i.y):"L".concat(i.x," ").concat(i.y),n+=" "}return e&&(n+="Z"),n}function Sc(t,e,n,r){var i=n/2,o=t-r/2,a=e-r/2,s=t-i,c=e-i;return[{x:o,y:a},{x:o,y:c},{x:o+r,y:c},{x:o+r,y:a},{x:s+n,y:a},{x:s+n,y:a+r},{x:o+r,y:a+r},{x:o+r,y:c+n},{x:o,y:c+n},{x:o,y:a+r},{x:s,y:a+r},{x:s,y:a}]}function Rc(t){return-t/180*Math.PI}function Ac(t){return function(t){var e=(.5*(Math.floor(t/Math.PI*2)+2)+.25)*Math.PI,n=Math.cos(Math.abs(e-t))*Math.sqrt(2),r=n*Math.cos(t),i=n*Math.sin(t);return{x1:r<0?1:0,y1:i<0?1:0,x2:r>=0?r:r+1,y2:i>=0?i:i+1}}(Rc(t))}var Oc={up:0,down:180,left:90,right:-90};var jc=ie();function zc(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=jc.get(t.type);if(e){var n=e(t);return n.collider||(n.collider=function(t){var e=t.x,n=t.y,r=t.size,i=r/2;return{type:"rect",x:e-i,y:n-i,width:r,height:r}}(t)),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(e).forEach(function(n){void 0!==kc[n]&&"transform"!==n&&(t[n]=e[n])})}(n,t),void 0!==t.data&&(n.data=t.data),n}return e}jc.add("circle",function(t){return{type:"circle",fill:"black",cx:t.x,cy:t.y,r:t.size/2,collider:{type:"circle"}}}),jc.add("diamond",function(t){var e=t.size,n=t.x-e/2,r=t.y-e/2;return{type:"path",fill:"black",d:Mc([{x:n,y:r+e/2},{x:n+e/2,y:r},{x:n+e,y:r+e/2},{x:n+e/2,y:r+e},{x:n,y:r+e/2}])}}),jc.add("saltire",function(t){var e=Rc(45),n=t.size/2,r=isNaN(t.width)?n/2:t.width,i=Math.min(r,n),o=t.size,a=Math.sin(Math.asin(-e))*(i/2);o+=2*(n/Math.sin(-e)-n),o-=2*a;var s={x:t.x,y:t.y};return{type:"path",fill:"black",d:Mc(Sc(t.x,t.y,o,i).map(function(t){return Ms(t,e,s)}))}}),jc.add("square",function(t){var e=t.size;return{type:"rect",fill:"black",x:t.x-e/2,y:t.y-e/2,width:e,height:e}}),jc.add("triangle",function(t){var e=t.size,n={x:t.x,y:t.y},r=Oc[t.direction]||0,i=e/2,o=t.x-i,a=t.y-i,s=[{x:o,y:a+e},{x:o+i,y:a},{x:o+e,y:a+e},{x:o,y:a+e}],c=Rc(r);return{type:"path",fill:"black",d:Mc(s=s.map(function(t){return Ms(t,c,n)}))}}),jc.add("line",function(t){var e="vertical"===t.direction,n=t.size/2,r=t.x,i=t.y;return{type:"line",stroke:"black",strokeWidth:1,x1:r-(e?0:n),y1:i-(e?n:0),x2:r+(e?0:n),y2:i+(e?n:0)}}),jc.add("star",function(t){for(var e=t.size,n=[],r=e/2,i=t.points||5,o=Math.min(t.innerRadius||e/2,e)/2,a=isNaN(t.startAngle)?90:t.startAngle,s=360/i,c=1;c<=i;c++){var u=s*c+a,l=Rc(u),h=Rc(u+s/2),f=Math.sin(l),d=Math.cos(l),y=Math.sin(h),p=Math.cos(h);n.push({x:t.x+d*r,y:t.y+f*r}),n.push({x:t.x+p*o,y:t.y+y*o})}return{type:"path",fill:"black",d:Mc(n)}}),jc.add("n-polygon",function(t){for(var e=[],n=t.size/2,r=Math.max(isNaN(t.sides)?6:t.sides,3),i=360/r,o=isNaN(t.startAngle)?0:t.startAngle,a=1;a<=r;a++){var s=Rc(i*a+o),c=Math.sin(s),u=Math.cos(s);e.push({x:t.x+u*n,y:t.y+c*n})}return{type:"path",fill:"black",d:Mc(e)}}),jc.add("cross",function(t){var e=t.x,n=t.y,r=t.size/2,i=isNaN(t.width)?r/2:t.width,o=Math.min(i,r);return{type:"path",fill:"black",d:Mc(Sc(e,n,t.size,o))}}),jc.add("bar",function(t){var e={x:t.x,y:t.y},n="vertical"===t.direction,r=t.size/2,i=r/2/2,o=[{x:e.x-r,y:e.y+i},{x:e.x-r,y:e.y-i},{x:e.x+r,y:e.y-i},{x:e.x+r,y:e.y+i}];if(n){var a=Rc(90);o=o.map(function(t){return Ms(t,a,e)})}var s=S(o);return s.type="rect",s.fill="black",s.collider={type:"rect"},s});var Tc={errorShape:{shape:"saltire",width:2,size:.5,fill:"#333",stroke:"#333",strokeWidth:0}},Ec={shape:"circle",label:"",fill:"#333",stroke:"#ccc",strokeWidth:0,opacity:1,x:.5,y:.5,size:1,strokeDasharray:""},Nc={maxPx:1e4,minPx:1,maxRelExtent:.1,minRelExtent:.01,maxRelDiscrete:1,minRelDiscrete:.1};function Pc(t,e){return t&&"function"==typeof t.bandwidth?{isBandwidth:!0,value:Math.max(1,t.bandwidth()*e)}:{isBandwidth:!1,value:Math.max(1,e)}}var Cc={require:["chart","resolver"],defaultSettings:{settings:{},data:{},animations:{enabled:!1,trackBy:function(t){return t.data.value}},style:{item:"$shape"}},created:function(){this.rect={x:0,y:0,width:0,height:0}},beforeRender:function(t){this.rect=t.size},render:function(t){var e=t.data,n=this.resolver.resolve({data:e,defaults:d()({},Ec,this.style.item),settings:this.settings.settings,scaled:{x:this.rect.width,y:this.rect.height}}),r=this.rect,i=r.width,o=r.height,a=d()({},Nc,this.settings.settings.sizeLimits),s=n.items,c=function(t,e,n,r,i){var o=Pc(t?t.scale:void 0,n),a=Pc(e?e.scale:void 0,r),s=Math.min(o.value*i[o.isBandwidth?"maxRelDiscrete":"maxRelExtent"],a.value*i[a.isBandwidth?"maxRelDiscrete":"maxRelExtent"]),c=Math.min(o.value*i[o.isBandwidth?"minRelDiscrete":"minRelExtent"],a.value*i[a.isBandwidth?"minRelDiscrete":"minRelExtent"]);return{min:Math.max(1,Math.floor(c)),max:Math.max(1,Math.floor(s)),maxGlobal:i.maxPx,minGlobal:i.minPx}}(n.settings.x,n.settings.y,i,o,a);return function(t,e,n,r){var i=e.width,o=e.height;return t.filter(function(t){return!isNaN(t.x+t.y)}).map(function(t){var e=b(t.size)?Tc.errorShape:t,a=n.min+e.size*(n.max-n.min),s={type:"rect"===e.shape?"square":e.shape,label:t.label,x:t.x*i,y:t.y*o,fill:e.fill,size:Math.min(n.maxGlobal,Math.max(n.minGlobal,a)),stroke:e.stroke,strokeWidth:e.strokeWidth,strokeDasharray:e.strokeDasharray,opacity:e.opacity};e===t.errorShape&&(s.width=e.width);var c=r(s);return c.data=t.data,c})}(s,this.rect,c,this.settings.shapeFn||zc)}},Fc="point";function Dc(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Math.PI;var Lc={label:"",arc:1,show:!0,fill:"#333",stroke:"#ccc",strokeWidth:1,opacity:1,innerRadius:0,outerRadius:.8,cornerRadius:0,offset:0};function Ic(t,e,n,r){var i=e.x,o=e.y,a=e.width,s=e.height,c=ft(),u={x:i+a/2,y:o+s/2},l=Math.min(a,s)/2,h=Math.min(a,s)/2,f=h/100;return t.map(function(t,e){var i=n[e];i.type="path";var o=h*i.outerRadius,a=l*i.innerRadius;c.innerRadius(a),c.outerRadius(o),c.cornerRadius(f*i.cornerRadius),i.d=c(t);var s=c.centroid(t),d=i.offset?function(t,e,n,r){var i=Dc(t,2),o=i[0],a=i[1],s=Math.sqrt(o*o+a*a),c=n-r;return{x:(o/=s)*e*c,y:(a/=s)*e*c}}(s,i.offset,o,a):{x:0,y:0};return i.transform="translate(".concat(d.x,", ").concat(d.y,") translate(").concat(u.x,", ").concat(u.y,")"),i.desc={share:t.value/r,slice:{start:t.startAngle,end:t.endAngle,innerRadius:a,outerRadius:o,offset:{x:u.x+d.x,y:u.y+d.y}}},i})}function Bc(t,e){return t.slice&&"arc"in t.slice?e.arc:e.data.value}var Wc={require:["chart","resolver"],defaultSettings:{settings:{startAngle:0,endAngle:2*Math.PI,padAngle:0,slice:{}},style:{slice:"$shape"},data:{}},created:function(){this.rect={x:0,y:0,width:0,height:0}},beforeRender:function(t){this.rect=t.size},render:function(t){for(var e=t.data,n=[],r=[],i=this.settings.settings,o=this.resolver.resolve({data:e,defaults:d()({},Lc,this.style.slice),settings:i.slice}).items,a=0,s=0,c=o.length;s<c;s++){var u=Bc(i,o[s]);u>0&&(n.push(u),r.push(o[s]),a+=u)}var l=function(){var t=bt,e=xt,n=null,r=H(0),i=H(it),o=H(0);function a(a){var s,c,u,l,h,f=a.length,d=0,y=new Array(f),p=new Array(f),g=+r.apply(this,arguments),v=Math.min(it,Math.max(-it,i.apply(this,arguments)-g)),m=Math.min(Math.abs(v)/f,o.apply(this,arguments)),x=m*(v<0?-1:1);for(s=0;s<f;++s)(h=p[y[s]=s]=+t(a[s],s,a))>0&&(d+=h);for(null!=e?y.sort(function(t,n){return e(p[t],p[n])}):null!=n&&y.sort(function(t,e){return n(a[t],a[e])}),s=0,u=d?(v-f*x)/d:0;s<f;++s,g=l)c=y[s],l=g+((h=p[c])>0?h*u:0)+x,p[c]={data:a[c],index:s,value:h,startAngle:g,endAngle:l,padAngle:m};return p}return a.value=function(e){return arguments.length?(t="function"==typeof e?e:H(+e),a):t},a.sortValues=function(t){return arguments.length?(e=t,n=null,a):e},a.sort=function(t){return arguments.length?(n=t,e=null,a):n},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:H(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:H(+t),a):i},a.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:H(+t),a):o},a}().sortValues(null);return l.startAngle(i.startAngle),l.endAngle(i.endAngle),l.padAngle(i.padAngle),Ic(l(n),d()({},this.rect,{x:0,y:0}),r,a)}};var $c=function(t){function e(e){if(t[e.type]&&t[e.type].condition(e)){var n=t[e.type],r=void 0===n.conditionAppend||n.conditionAppend(e);n.items.forEach(function(t){var n=Math.round(e[t.key]),i=e[t.key]-n;e[t.key]=n,r&&"append"===t.type&&(i>0?e[t.key]+=.5:e[t.key]-=.5)})}}return void 0===t&&((t={}).line={append:["x1","x2","y1","y2"],round:[],condition:function(t){return t.x1===t.x2||t.y1===t.y2},conditionAppend:function(t){return t.strokeWidth%2!=0}},t.rect={append:["x","y"],round:["width","height"],condition:function(){return!0},conditionAppend:function(t){return t.strokeWidth%2!=0}}),Object.keys(t).forEach(function(e){var n=t[e];n.items=[],n.append.forEach(function(t){n.items.push({key:t,type:"append"})}),n.round.forEach(function(t){n.items.push({key:t,type:"round"})})}),e.multiple=function(t){return t.forEach(function(t){return e(t)})},e}();function qc(t,e,n){return(qc=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&Vc(i,n.prototype),i}).apply(null,arguments)}function Vc(t,e){return(Vc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Yc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Uc=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.reset(),this.push.apply(this,arguments)}return function(t,e,n){e&&Yc(t.prototype,e),n&&Yc(t,n)}(t,[{key:"transposeCoordinate",value:function(t,e,n){if("number"==typeof e&&isFinite(e)){var r=t.substring(0,1);if("x"===r||"cx"===t)return e*this.width;if("width"===t)return e*this.width;if("r"===t)return e*(n?this.height:this.width);if("y"===r||"cy"===t)return e*this.height;if("height"===t)return e*this.height}return e}},{key:"push",value:function(){var t;return(t=this.storage).push.apply(t,arguments),this}},{key:"processItem",value:function(e){var n={},r=void 0!==e.flipXY?e.flipXY:this.flipXY,i=void 0!==e.crisp?e.crisp:this.crisp;if(e.fn&&"function"==typeof e.fn){var o=r?this.height:this.width,a=r?this.width:this.height;e=e.fn({width:o,height:a,flipXY:r});for(var s=Object.keys(e),c=0,u=s.length;c<u;c++){var l=s[c];n[t.evaluateKey(l,r)]=e[l]}}else for(var h=Object.keys(e),f=0,d=h.length;f<d;f++){var y=h[f],p=t.evaluateKey(y,r),g=this.transposeCoordinate(p,e[y],r);n[p]=g}return i&&$c(n),n}},{key:"output",value:function(){for(var t=[],e=0,n=this.storage.length;e<n;e++){var r=this.processItem(this.storage[e]);t.push(r)}return t}},{key:"reset",value:function(){this.storage=[],this.flipXY=!1,this.crisp=!1,this.width=0,this.height=0}}],[{key:"evaluateKey",value:function(t,e){if(e){var n=t.substring(0,1),r=t.substring(1);if("x"===n)return"y".concat(r);if("y"===n)return"x".concat(r);if("cx"===t)return"cy";if("cy"===t)return"cx";if("width"===t)return"height";if("height"===t)return"width"}return t}}]),t}();function Hc(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return qc(Uc,e)}function Xc(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Zc(t,e){return t&&e?t.cachedTicks&&t.cachedTicks()||t.ticks({distance:e}):[]}var Gc={created:function(){},require:["chart","renderer"],defaultSettings:{displayOrder:0,style:{ticks:"$guide-line",minorTicks:"$guide-line--minor"}},beforeRender:function(t){this.rect=t.size,this.blueprint=Hc(),this.blueprint.width=this.rect.width,this.blueprint.height=this.rect.height,this.blueprint.x=this.rect.x,this.blueprint.y=this.rect.y,this.blueprint.crisp=!0},render:function(){var t=this;if(this.x=this.settings.x?this.chart.scale(this.settings.x):null,this.y=this.settings.y?this.chart.scale(this.settings.y):null,ts(this,"x",this.rect.width),ts(this,"y",this.rect.height),!this.x&&!this.y)return[];this.settings.ticks=d()({show:!0},this.style.ticks,this.settings.ticks||{}),this.settings.minorTicks=d()({show:!1},this.style.minorTicks,this.settings.minorTicks||{}),this.lines={x:[],y:[]},this.lines.x=Zc(this.x,this.rect.width),this.lines.y=Zc(this.y,this.rect.height),this.lines.y=this.lines.y.map(function(t){return d()(t,{flipXY:!0})});var e={};return Xc(this.lines.x).concat(Xc(this.lines.y)).forEach(function(n){(e=n.isMinor?t.settings.minorTicks:t.settings.ticks).show&&t.blueprint.push({type:"line",x1:n.position,y1:0,x2:n.position,y2:1,stroke:e.stroke||"black",strokeWidth:void 0!==e.strokeWidth?e.strokeWidth:1,flipXY:n.flipXY||!1})}),this.blueprint.output()}};function Jc(t){return(Jc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qc(t){if(void 0===t)return 0;if("number"==typeof t&&isFinite(t))return t;if("string"==typeof t)switch(t){case"center":case"middle":return.5;case"bottom":case"right":return 1;case"top":case"left":default:return 0}return 0}function Kc(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function tu(t){var e={value:t.value};return t.label&&(e.label=t.label.text),e}function eu(t){return void 0!==t.value}var nu={require:["chart","renderer","dockConfig"],defaultSettings:{displayOrder:0,style:{oob:{show:!0,width:10,fill:"#1A1A1A",stroke:"transparent",strokeWidth:0,opacity:1,text:{fontFamily:"Arial",stroke:"transparent",fill:"#fff",strokeWidth:0,opacity:1},triangle:{fill:"#4D4D4D",stroke:"transparent",strokeWidth:0,opacity:1},padding:{x:28,y:5}},line:{stroke:"#000"},label:{strokeWidth:0}}},preferredSize:function(){return 30},beforeRender:function(t){this.rect=t.size,this.blueprint=Hc(),this.blueprint.width=this.rect.width,this.blueprint.height=this.rect.height,this.blueprint.x=this.rect.x,this.blueprint.y=this.rect.y,this.blueprint.crisp=!0},render:function(){var t=this,e=this.settings;if(this.lines={x:[],y:[]},this.lines.x=e.lines&&e.lines.x||[],this.lines.y=e.lines&&e.lines.y||[],0===this.lines.x.length&&0===this.lines.y.length)return[];var n={x0:[],x1:[],y0:[],y1:[]};this.lines.x=this.lines.x.filter(eu).map(function(e){if(e.scale){var n=t.chart.scale(e.scale);return d()(e,{scale:n,position:n(e.value)})}return d()(e,{position:e.value})}),this.lines.y=this.lines.y.filter(eu).map(function(e){if(e.scale){var n=t.chart.scale(e.scale);return d()(e,{scale:n,position:n(e.value),flipXY:!0})}return d()(e,{position:e.value,flipXY:!0})}),this.lines.x=this.lines.x.filter(function(t){return!(t.position<0||t.position>1)||(n["x".concat(t.position>1?1:0)].push(tu(t)),!1)}),this.lines.y=this.lines.y.filter(function(t){return!(t.position<0||t.position>1)||(n["y".concat(t.position>1?1:0)].push(tu(t)),!1)});var r=[];return Kc(this.lines.x).concat(Kc(this.lines.y)).forEach(function(n){(!0===n.show||void 0===n.show)&&function(t){var e,n=t.chart,r=t.blueprint,i=t.renderer,o=t.p,a=t.settings,s=t.items,c=!0,u=!1,l=!1,h=!1,f=d()(!0,{},a.style.line,o.line||{});if(e=r.processItem({type:"line",x1:o.position,y1:0,x2:o.position,y2:1,stroke:f.stroke||"black",strokeWidth:f.strokeWidth||1,flipXY:o.flipXY||!1}),o.label){var y,p=d()(!0,{fill:"#000",fontFamily:"Arial",fontSize:"12px",opacity:1,maxWidth:1,maxWidthPx:9999,padding:5,background:{fill:"#fff",stroke:"transparent",strokeWidth:0,opacity:.5}},a.style.label||{},{fill:f.stroke},o.label),g={width:0,height:0},v="";if("string"==typeof o.formatter)y=n.formatter(o.formatter);else if("object"===Jc(o.formatter))y=n.formatter(o.formatter);else if(void 0!==o.scale&&o.scale.data){var m=o.scale.data()&&o.scale.data().fields;y=m&&m[0]?m[0].formatter():null}y?v=" (".concat(y(o.value),")"):o.scale&&(v=" (".concat(o.value,")")),v&&(g=i.measureText({text:v,fontFamily:p.fontFamily,fontSize:p.fontSize}));var x=i.measureText({text:p.text||"",fontFamily:p.fontFamily,fontSize:p.fontSize}),b={width:x.width+g.width,height:Math.max(x.height,g.height)},w=p.padding,_=Qc(o.flipXY?p.vAlign:p.align),k=Qc(o.flipXY?p.align:p.vAlign),M=Math.min(1+b.width+2*w,p.maxWidth*r.width,p.maxWidthPx),S=b.height+2*w,R=o.flipXY?S:M,A=o.flipXY?M:S;if((u=r.processItem({fn:function(t){var e=t.width,n=t.height,i=o.position*e-(o.flipXY?S:M)*(1-_);return{type:"rect",x:i=o.flipXY?i:Math.max(i,0),y:Math.max(Math.abs(k*n-A*k),0),width:o.flipXY?R:Math.min(R,r.width-i),height:A,stroke:p.background.stroke,strokeWidth:p.background.strokeWidth,fill:p.background.fill,opacity:p.background.opacity}},flipXY:o.flipXY||!1})).x<-1||u.x+u.width>r.width+1||u.y<-1||u.y+u.height>r.height+1)u=void 0;else{l={type:"text",text:p.text||"",fill:p.fill,opacity:p.opacity,fontFamily:p.fontFamily,fontSize:p.fontSize,x:u.x+w,y:u.y+u.height/2+b.height/3,maxWidth:u.width-2*w-g.width,anchor:"start"},v&&(h={type:"text",text:v||"",fill:p.fill,opacity:p.opacity,fontFamily:p.fontFamily,fontSize:p.fontSize,x:l.x+3+(u.width-(g.width+2*w)),y:l.y});for(var O=0,j=s.length;O<j;O++){var z=s[O];"rect"===z.type?Cs.testRectRect(u,z)&&(c=!1):"line"===z.type&&o.flipXY===z.flipXY&&Cs.testRectLine(u,z)&&(c=!1)}}}s.push(e),c&&u&&l&&(s.push(u,l),h&&s.push(h))}({chart:t.chart,blueprint:t.blueprint,renderer:t.renderer,p:n,settings:e,items:r})}),e.style.oob.show&&function(t){for(var e=t.blueprint,n=t.oob,r=t.settings,i=t.items,o=Object.keys(n),a=r.style.oob||{},s=function(t,r){var s=o[t],c=n[s];if(c.length>0){var u=s.charAt(1),l="y"===s.charAt(0),h=a.padding.x+a.width,f=a.padding.y+a.width,d="bottom";d=l?"1"===u?"bottom":"top":"1"===u?"right":"left";var y=e.processItem({fn:function(t){var e=t.width,n=t.height,r=u*e+("1"===u?-h:h),i=l?f:n-f;return"arc"===a.type?{type:"path",d:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"bottom";if(n*=.8,"left"===r||"right"===r){var i="right"===r;return"\n      M ".concat(t," ").concat(e-n,"\n      A ").concat(1.25*n," ").concat(1.25*n,", 0, 1, ").concat(i?0:1,", ").concat(t," ").concat(e+n,"\n      L ").concat(i?t+n:t-n," ").concat(e," Z\n    ")}var o="bottom"===r;return"\n    M ".concat(t-n," ").concat(e,"\n    A ").concat(1.25*n," ").concat(1.25*n,", 0, 1, ").concat(o?1:0,", ").concat(t+n," ").concat(e,"\n    L ").concat(t," ").concat(o?e+n:e-n," Z\n  ")}(l?i:r,l?r:i,a.width,d),x:r,y:i,stroke:a.stroke,fill:a.fill,strokeWidth:a.strokeWidth||0}:{type:"circle",cx:r,cy:i,r:a.width,stroke:a.stroke,fill:a.fill,strokeWidth:a.strokeWidth||0,opacity:a.opacity,data:c}},flipXY:l}),p=y.cx||y.x,g=y.cy||y.y,v={type:"text",text:c.length||"",x:p-.4*a.width,y:g+.4*a.width,fontFamily:a.text.fontFamily,fontSize:"".concat(1.3*a.width,"px"),stroke:a.text.stroke,fill:a.text.fill,strokeWidth:a.text.strokeWidth||0,opacity:a.text.opacity},m={type:"path",d:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"bottom";if(n*=.75,"left"===r||"right"===r){var i="right"===r;return"\n      M ".concat(t+=i?1.5*n:-1.5*n," ").concat(e-n,"\n      L ").concat(t," ").concat(e+n,"\n      L ").concat(i?t+n:t-n," ").concat(e," Z\n    ")}var o="bottom"===r;return e+=o?1.5*n:-1.5*n,"\n    M ".concat(t-n," ").concat(e,"\n    L ").concat(t+n," ").concat(e,"\n    L ").concat(t," ").concat(o?e+n:e-n," Z\n  ")}(p,g,a.width,d),x:p,y:g,stroke:a.triangle.stroke,fill:a.triangle.fill,strokeWidth:a.triangle.strokeWidth||0,opacity:a.triangle.opacity};i.push(y,v,m)}},c=0,u=o.length;c<u;c++)s(c)}({blueprint:this.blueprint,oob:n,settings:e,items:r}),r}};function ru(t){var e={type:"line",x1:0,x2:0,y1:0,y2:0,collider:{type:null}};return"top"===t.align||"bottom"===t.align?(e.x1=t.innerRect.x-t.outerRect.x,e.x2=t.innerRect.width+t.innerRect.x,e.y1=e.y2="top"===t.align?t.innerRect.height-t.padding:t.padding):(e.x1=e.x2="left"===t.align?t.innerRect.width-t.padding:t.padding,e.y1=t.innerRect.y-t.outerRect.y,e.y2=t.innerRect.height+t.innerRect.y),function(t,e){d()(t,e.style);var n=t.strokeWidth/2;"top"===e.align?(t.y1-=n,t.y2-=n):"bottom"===e.align?(t.y1+=n,t.y2+=n):"left"===e.align?(t.x1-=n,t.x2-=n):"right"===e.align&&(t.x1+=n,t.x2+=n)}(e,t),e}function iu(t,e,n){n.layered||!n.stepSize?function(t,e){e.collider={type:"polygon",vertices:[{x:e.boundingRect.x,y:e.boundingRect.y},{x:e.boundingRect.x+e.boundingRect.width,y:e.boundingRect.y},{x:e.boundingRect.x+e.boundingRect.width,y:e.boundingRect.y+e.boundingRect.height},{x:e.boundingRect.x,y:e.boundingRect.y+e.boundingRect.height}]}}(0,e):n.tilted?function(t,e,n){var r=n.angle*(Math.PI/180),i=Math.max(n.stepSize/2,e.boundingRect.height/2),o="start"===e.anchor,a="end"===e.anchor&&r<0,s="start"===e.anchor&&r>=0,c=e.boundingRect.y+(s||a?e.boundingRect.height:0),u=[{x:e.x-i,y:c},{x:e.x+i,y:c}].map(function(t){return Ms(t,r,{x:e.x,y:e.y})}),l={x:o?e.boundingRect.x+e.boundingRect.width+10:e.boundingRect.x-10,y:e.boundingRect.y+e.boundingRect.height},h={x:o?e.boundingRect.x+e.boundingRect.width+10:e.boundingRect.x-10,y:e.boundingRect.y},f=r>=0?[l,h]:[h,l];u.push.apply(u,f),e.collider={type:"polygon",vertices:u}}(0,e,n):function(t,e,n){if("bottom"===n.align||"top"===n.align){var r=t.position*n.innerRect.width+(n.innerRect.x-n.outerRect.x-n.stepSize/2);e.collider={type:"rect",x:r,y:0,width:r<0?n.stepSize+r:n.stepSize,height:n.innerRect.height}}else{var i=t.position*n.innerRect.height+(n.innerRect.y-n.outerRect.y-n.stepSize/2);e.collider={type:"rect",x:0,y:i,width:n.innerRect.width,height:i<0?n.stepSize+i:n.stepSize}}var o=e.collider;o.x=Math.max(o.x,0),o.y=Math.max(o.y,0);var a=o.x+o.width-(n.outerRect.x+n.outerRect.width);o.width=a>0?o.width-a:o.width;var s=o.y+o.height-(n.outerRect.y+n.outerRect.height);o.height=s>0?o.height-s:o.height}(t,e,n)}function ou(t,e){var n=isNaN(t.style.align)?.5:Math.min(Math.max(t.style.align,0),1),r=0;if(t.tilted)r=t.stepSize*n;else{var i=e?t.textRect.height:t.textRect.width;r=Math.max(0,t.stepSize-i)*n}return r}function au(t,e){var n={type:"text",text:function(t){return"string"==typeof t||"number"==typeof t?t:"-"}(t.label),x:0,y:0,maxWidth:e.maxWidth,maxHeight:e.maxHeight};return"top"===e.align||"bottom"===e.align?(n.x=t.start*e.innerRect.width+(e.innerRect.x-e.outerRect.x)+ou(e,!1),n.y="top"===e.align?e.innerRect.height:0,n.anchor=e.stepSize?"start":"middle",n.x+=isNaN(e.style.offset)?0:+e.style.offset):(n.y=t.start*e.innerRect.height+(e.innerRect.y-e.outerRect.y)+ou(e,!0),n.x="left"===e.align?e.innerRect.width:0,n.anchor="left"===e.align?"end":"start",n.baseline=e.stepSize?"text-before-edge":"central",n.y+=isNaN(e.style.offset)?0:+e.style.offset),function(t,e){["fill","fontSize","fontFamily"].forEach(function(n){t[n]=e.style[n]})}(n,e),function(t,e){if(!e.tilted&&!e.stepSize)if("top"===e.align||"bottom"===e.align){var n=e.outerRect.width,r=Math.min(.75*e.maxWidth/2,e.textRect.width/2),i=t.x-r,o=t.x+r;i<0?(t.anchor="start",t.x=e.innerRect.x-e.outerRect.x,t.maxWidth*=.75):o>n&&(t.anchor="end",t.x=e.innerRect.width+e.innerRect.x,t.maxWidth*=.75)}else{var a=e.outerRect.height,s=e.maxHeight/2,c=t.y-s,u=t.y+s;c<0?(t.y=e.innerRect.y-e.outerRect.y,t.baseline="text-before-edge"):u>a&&(t.y=e.innerRect.height+(e.innerRect.y-e.outerRect.y),t.baseline="text-after-edge")}}(n,e),function(t,e){"top"===e.align?t.y-=e.padding:"bottom"===e.align?t.y+=e.padding+e.maxHeight:"left"===e.align?t.x-=e.padding:"right"===e.align&&(t.x+=e.padding)}(n,e),function(t,e){if(e.tilted){var n=-e.angle,r=n*(Math.PI/180);"bottom"===e.align?(t.x-=e.maxHeight*Math.sin(r)/2,t.y-=e.maxHeight,t.y+=e.maxHeight*Math.cos(r)/2):t.x-=e.maxHeight*Math.sin(r)/3,t.transform="rotate(".concat(n,", ").concat(t.x,", ").concat(t.y,")"),t.anchor="bottom"===e.align==e.angle<0?"start":"end";var i=Math.cos(r)*e.maxWidth;if("bottom"===e.align==e.angle<0){var o=e.outerRect.width-e.paddingEnd;t.x+i>o&&(t.maxWidth=(o-t.x-10)/Math.cos(r))}else{var a=e.paddingEnd;t.x-i<a&&(t.maxWidth=(t.x-a-10)/Math.cos(r))}}}(n,e),function(t,e){t.boundingRect=e.textBounds(t)}(n,e),iu(t,n,e),n}function su(t,e){var n={type:"line",x1:0,x2:0,y1:0,y2:0,collider:{type:null}};return"top"===e.align||"bottom"===e.align?(n.x1=n.x2=t.position*e.innerRect.width+(e.innerRect.x-e.outerRect.x),n.y1="top"===e.align?e.innerRect.height:0,n.y2="top"===e.align?n.y1-e.tickSize:n.y1+e.tickSize):(n.y1=n.y2=t.position*e.innerRect.height+(e.innerRect.y-e.outerRect.y),n.x1="left"===e.align?e.innerRect.width:0,n.x2="left"===e.align?n.x1-e.tickSize:n.x1+e.tickSize),function(t,e){d()(t,e.style)}(n,e),function(t,e){"top"===e.align?(t.y1-=e.padding,t.y2-=e.padding):"bottom"===e.align?(t.y1+=e.padding,t.y2+=e.padding):"left"===e.align?(t.x1-=e.padding,t.x2-=e.padding):"right"===e.align&&(t.x1+=e.padding,t.x2+=e.padding)}(n,e),function(t,e){var n=t.strokeWidth/2;t.x1===e.innerRect.width?(t.x1-=n,t.x2-=n):0===t.x1?(t.x1+=n,t.x2+=n):t.y1===e.innerRect.height?(t.y1-=n,t.y2-=n):0===t.y1&&(t.y1+=n,t.y2+=n)}(n,e),n}function cu(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function uu(t){return!t.isMinor}function lu(t){var e=t.rect,n=t.state,r=t.majorTicks,i=t.measure;return t.horizontal?function(t){for(var e=t.majorTicks,n=t.measureText,r=t.rect,i="layered"===t.state.labels.activeMode?2:1,o=r.width,a=e.map(function(t){return t.label}).map(function(t){return"".concat(t.slice(0,1)).concat(t.length>1?"…":"")}).map(n).map(function(t){return t.width}),s=0;s<e.length;++s){var c=e[s];if(i*o*Math.abs(c.start-c.end)<a[s])return!0}return!1}({majorTicks:r,measureText:i,rect:e,state:n}):function(t){var e=t.majorTicks,n=t.measureText,r=t.rect.height,i=n("M").height;return!(e.length<2)&&r*Math.abs(e[0].position-e[1].position)<i}({majorTicks:r,measureText:i,rect:e,state:n})}function hu(t){var e=t.value,n=t.maxValue,r=t.minValue,i=t.range,o=t.modifier;return isNaN(i)||isNaN(o)||(e=i*o),e>n&&(e=n),e<r&&(e=r),e}function fu(t){var e=t.isDiscrete,n=t.rect,r=t.formatter,i=t.measureText,o=t.scale,a=t.settings,s=t.state,c=0,u={left:0,top:0,right:0,bottom:0},l=a.labels,h=l.maxLengthPx,f=l.minLengthPx;if(a.labels.show){var d,y,p=a.align,g="top"===p||"bottom"===p,v=g?n.width:n.height,m=o.ticks({settings:a,distance:v,formatter:r}).filter(uu),x=function(t){var e=i({text:t,fontSize:a.labels.fontSize,fontFamily:a.labels.fontFamily});return e.width=hu({value:e.width,maxValue:h,minValue:f}),e};if(e&&g&&"auto"===a.labels.mode&&(!function(t){var e=t.majorTicks,n=t.measure,r=t.rect,i=t.state,o=t.settings.labels.maxGlyphCount,a="layered"===i.labels.activeMode?2:1,s=n("…").width,c=r.width,u=0;if(isNaN(o))for(var l=0;l<e.length;l++){var h=e[l],f=h.label;if(n(f).width*(f.length>1?.7:1)+s>(u=a*c*Math.abs(h.start-h.end)))return!0}else if(u=a*c*e.reduce(function(t,e){return Math.min(Math.abs(e.start-e.end),t)},1/0),.7*n("M").width*o+s>u)return!0;return!1}({majorTicks:m,measure:x,rect:n,state:s,settings:a})?s.labels.activeMode="horizontal":s.labels.activeMode="tilted"),e&&"tilted"!==s.labels.activeMode&&lu({rect:n,state:s,majorTicks:m,measure:x,horizontal:g}))return{size:Math.max(n.width,n.height),isToLarge:!0};if("tilted"===s.labels.activeMode){var b=Math.abs(a.labels.tiltAngle)*(Math.PI/180);d=function(t){return hu({value:t.width,maxValue:h,minValue:f})*Math.sin(b)+t.height*Math.cos(b)}}else d=g?function(t){return t.height}:function(t){return hu({value:t.width,maxValue:h,minValue:f})};if(g&&"tilted"!==s.labels.activeMode)y=["M"];else if(isNaN(a.labels.maxGlyphCount))y=m.map(function(t){return t.label});else{for(var w="",_=0;_<a.labels.maxGlyphCount;_++)w+="M";y=[w]}var k=y.map(x),M=k.map(d),S=Math.max.apply(Math,cu(M).concat([0]));if(c+=S,c+=a.labels.margin,"layered"===s.labels.activeMode&&(c*=2),"tilted"===s.labels.activeMode){var R="bottom"===a.align==a.labels.tiltAngle>=0,A=Math.abs(a.labels.tiltAngle)*(Math.PI/180),O=(S-i("M").height*Math.cos(A))/Math.sin(A),j=Math.min(a.labels.maxEdgeBleed,Math.max.apply(Math,cu(k.map(function(t){return Math.min(O,t.width)*Math.cos(A)+t.height}).map(function(t,e){var r=m[e]?m[e].position:0;return R?t-r*n.width:t-(1-r)*n.width})).concat([0])))+a.paddingEnd;if(u[R?"left":"right"]=j,e&&function(t){var e=t.majorTicks,n=t.measureText,r=t.rect,i=t.bleedSize,o=t.angle;if(e.length<2)return!1;if(0===o)return!0;var a=Math.abs(o),s=1/((r.width-i)*Math.abs(e[0].position-e[1].position));return n("M").height>Math.sin(a*(Math.PI/180))/s}({majorTicks:m,measureText:i,rect:n,bleedSize:j,angle:a.labels.tiltAngle}))return{size:Math.max(n.width,n.height),isToLarge:!0}}}return{size:c,edgeBleed:u}}function du(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function yu(t){var e=0;return e+=t.paddingStart,e+=t.line.show?t.line.strokeWidth:0,e+=t.ticks.show?t.ticks.margin:0}function pu(t){var e=0;return e+=t.ticks.show?t.ticks.tickSize:0,e+=yu(t)+t.labels.margin}function gu(t){return t.filter(function(t){return!t.isMinor})}function vu(t,e){return t.map(function(t){return su(t,e)})}function mu(t,e){return e?Math.abs(e.end-e.start):t.bandwidth()}function xu(t){var e=t.measureText,n=t.settings,r=t.innerRect,i=t.scale,o=t.tilted,a=t.layered,s=t.tick,c=e({text:"M",fontSize:n.labels.fontSize,fontFamily:n.labels.fontFamily}).height,u=mu(i,s),l={width:0,height:c};if("left"===n.align||"right"===n.align)l.width=r.width-pu(n)-n.paddingEnd;else if(a)l.width=u*r.width*2;else if(o){var h=Math.abs(n.labels.tiltAngle)*(Math.PI/180);l.width=(r.height-pu(n)-n.paddingEnd-c*Math.cos(h))/Math.sin(h)}else l.width=u*r.width;return l.width=hu({value:l.width,maxValue:n.labels.maxLengthPx,minValue:n.labels.minLengthPx}),l}function bu(t){var e=t.measureText,n=t.settings,r=t.innerRect,i=t.ticks,o=t.tilted,a=t.layered,s=e({text:"M",fontSize:n.labels.fontSize,fontFamily:n.labels.fontFamily}).height,c={width:0,height:s};if("left"===n.align||"right"===n.align)c.width=r.width-pu(n)-n.paddingEnd;else if(a)c.width=r.width/gu(i).length*.75*2;else if(o){var u=Math.abs(n.labels.tiltAngle)*(Math.PI/180);c.width=(r.height-pu(n)-n.paddingEnd-s*Math.cos(u))/Math.sin(u)}else c.width=r.width/gu(i).length*.75;return c.width=hu({value:c.width,maxValue:n.labels.maxLengthPx,minValue:n.labels.minLengthPx}),c}function wu(t){var e,n=!1;function r(){return e=bu,n=!0,r}function i(){return e=xu,i}function o(t){var r,i=t.settings,o=t.scale,a=t.innerRect,s=t.outerRect,c=t.measureText,u=t.ticks,l=t.state,h=t.textBounds,f=[],d=gu(u),y=function(t){return t.filter(function(t){return t.isMinor})}(u),p={innerRect:a,align:i.align,outerRect:s},g="tilted"===l.labels.activeMode,v="layered"===l.labels.activeMode;if(i.line.show&&(p.style=i.line,p.padding=i.paddingStart,f.push(ru(p))),i.ticks.show&&(p.style=i.ticks,p.tickSize=i.ticks.tickSize,p.padding=yu(i),r=vu(d,p)),i.labels.show){var m=pu(i);p.style=i.labels,p.padding=m,p.tilted=g,p.layered=v,p.angle=i.labels.tiltAngle,p.paddingEnd=i.paddingEnd,p.textBounds=h;var x=function(t){var n=e({measureText:c,settings:i,innerRect:a,ticks:u,scale:o,tilted:g,layered:v,tick:t});p.maxWidth=n.width,p.maxHeight=n.height,p.textRect=function(t){var e=t.style;return(0,t.measureText)({text:t.tick.label,fontSize:e.fontSize,fontFamily:e.fontFamily})}({tick:t,measureText:c,style:p.style}),p.stepSize=function(t){var e=t.innerRect,n=t.scale,r=t.settings,i=t.tick;return("top"===r.align||"bottom"===r.align?e.width:e.height)*mu(n,i)}({innerRect:a,scale:o,ticks:u,settings:i,tick:t})},b=[];b=!v||"top"!==i.align&&"bottom"!==i.align?function(t,e,n){return t.map(function(t){n(t);var r=au(t,e);return r.data=t.data,r})}(d,p,x):function(t,e,n,r){var i=e.padding,o=pu(n);return t.map(function(t,a){r(t);var s=o+e.maxHeight+n.labels.margin;e.layer=a%2,e.padding=a%2==0?i:s;var c=au(t,e);return c.data=t.data,c})}(d,p,i,x),n&&!p.tilted&&function(t,e){for(var n=function(t,e){var n=t.boundingRect,r=e.boundingRect;return Cs.testRectRect(n,r)},r=0;r<=t.length-1;r++)for(var i=r+1;i<=Math.min(r+5,r+(t.length-1));i++)t[r]&&t[i]&&n(t[r],t[i])&&(i===t.length-1?(t.splice(r,1),e&&e.splice(r,1)):(t.splice(i,1),e&&e.splice(i,1)),i--,r--)}(b,r),f.push.apply(f,du(b))}return i.minorTicks&&i.minorTicks.show&&y.length>0&&(p.style=i.minorTicks,p.tickSize=i.minorTicks.tickSize,p.padding=function(t){return t.line.strokeWidth+t.minorTicks.margin}(i),f.push.apply(f,du(vu(y,p)))),r&&f.push.apply(f,du(r)),f}return r.build=o,i.build=o,t?i():r()}var _u={labels:{show:!0,tiltAngle:40,maxEdgeBleed:1/0,margin:4,maxLengthPx:150,minLengthPx:0,mode:"auto",maxGlyphCount:NaN,align:.5,offset:0},ticks:{show:!1,margin:0,tickSize:4},line:{show:!1},paddingStart:0,paddingEnd:10,align:"auto"},ku={labels:{show:!0,margin:4,maxLengthPx:150,minLengthPx:0,align:.5,offset:0},ticks:{show:!0,margin:0,tickSize:8},minorTicks:{show:!1,tickSize:3,margin:0},line:{show:!0},paddingStart:0,paddingEnd:10,align:"auto"};function Mu(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Su={require:["chart","renderer","dockConfig"],defaultSettings:{displayOrder:0,prioOrder:0,settings:{},style:{labels:"$label",ticks:"$guide-line",minorTicks:"$guide-line--minor",line:"$guide-line"}},created:function(){this.state={isDiscrete:!!this.scale.bandwidth,isHorizontal:!1,labels:{activeMode:"horizontal"},ticks:[],innerRect:{width:0,height:0,x:0,y:0},outerRect:{width:0,height:0,x:0,y:0},defaultDock:void 0,concreteNodeBuilder:void 0,settings:void 0},this.state.isDiscrete?this.state.defaultDock="bottom":this.state.defaultDock="left",this.setState(this.settings)},setState:function(){this.state.isDiscrete=!!this.scale.bandwidth,this.state.settings=function(t){var e=t.state,n=t.style,r=t.settings,i=d()(!0,{},e.isDiscrete?_u:ku,n),o=d()(!0,{},i,r.settings),a=r.dock||e.defaultDock;return o.dock=a,o.align=function(t,e){var n=["top","bottom"],r=["left","right"];return-1!==n.indexOf(t)&&-1===r.indexOf(e)?t:-1!==r.indexOf(t)&&-1===n.indexOf(e)?t:e}(r.settings.align,a),o.labels.tiltAngle=Math.max(-90,Math.min(o.labels.tiltAngle,90)),o}(this),this.state.concreteNodeBuilder=wu(this.state.isDiscrete),this.dockConfig.dock=this.state.settings.dock,this.state.isHorizontal="top"===this.state.settings.align||"bottom"===this.state.settings.align,this.state.labels.activeMode=function(t,e,n){var r=e.labels.mode;return n&&t.isHorizontal?"auto"===r?t.labels.activeMode:-1!==["layered","tilted"].indexOf(e.labels.mode)&&-1!==["top","bottom"].indexOf(e.dock)?r:"horizontal":"horizontal"}(this.state,this.state.settings,this.state.isDiscrete)},preferredSize:function(t){var e=this.formatter,n=this.state,r=this.scale,i=this.state.isHorizontal?t.inner.width:t.inner.height;return this.state.pxScale=es(r,i),function(t){var e=t.isDiscrete,n=t.rect,r=t.formatter,i=t.measureText,o=t.scale,a=t.settings,s=0,c=fu({isDiscrete:e,rect:n,formatter:r,measureText:i,scale:o,settings:a,state:t.state}),u=c.size,l=c.edgeBleed;if(s+=u,c.isToLarge)return{size:s};if(a.ticks.show&&(s+=a.ticks.margin,s+=a.ticks.tickSize),a.minorTicks&&a.minorTicks.show){var h=a.minorTicks.margin+a.minorTicks.tickSize;h>s&&(s=h)}return a.line.show&&(s+=a.line.strokeWidth),s+=a.paddingStart,{size:s+=a.paddingEnd,edgeBleed:l}}({isDiscrete:this.state.isDiscrete,rect:t.inner,formatter:e,measureText:this.renderer.measureText,scale:this.state.pxScale,settings:this.state.settings,state:n})},beforeUpdate:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).settings;this.setState(t)},resize:function(t){var e=t.inner,n=t.outer,r=d()({},e,function(t){var e=t.align,n=t.inner;return"left"===e?{x:n.width+n.x}:"right"===e||"bottom"===e?n:{y:n.y+n.height}}({align:this.state.settings.align,inner:e})),i=n||r;return d()(this.state.innerRect,r),d()(this.state.outerRect,i),n},beforeRender:function(){var t=this.scale,e=this.formatter,n=this.state.isHorizontal?this.state.innerRect.width:this.state.innerRect.height;this.state.pxScale=es(t,n),this.state.ticks=this.state.pxScale.ticks({distance:n,formatter:e})},render:function(){var t=this.state,e=[];return e.push.apply(e,Mu(this.state.concreteNodeBuilder.build({settings:this.state.settings,scale:this.state.pxScale,innerRect:this.state.innerRect,outerRect:this.state.outerRect,measureText:this.renderer.measureText,textBounds:this.renderer.textBounds,ticks:this.state.ticks,state:t}))),$c.multiple(e),e}},Ru="axis";function Au(t,e,n){var r="";if("function"==typeof t)r=t();else if("string"==typeof t)r=t;else if(n){r=(n.data().fields||[]).map(function(t){return t.title()}).join(e)}return r}var Ou={require:["renderer","chart"],defaultSettings:{dock:"bottom",displayOrder:0,prioOrder:0,settings:{paddingStart:5,paddingEnd:5,paddingLeft:0,paddingRight:0,anchor:"center",join:", ",maxLengthPx:NaN},style:{text:"$title"}},created:function(){this.rect={x:0,y:0,width:0,height:0},this.definitionSettings=this.settings.settings;var t=this.settings.text,e=this.definitionSettings.join;this.title=Au(t,e,this.scale)},preferredSize:function(){return this.renderer.measureText({text:this.title,fontSize:this.style.text.fontSize,fontFamily:this.style.text.fontFamily}).height+this.definitionSettings.paddingStart+this.definitionSettings.paddingEnd},beforeRender:function(t){d()(this.rect,t.size)},render:function(){var t=this.title,e=this.definitionSettings,n=this.rect,r=[];return r.push(function(t){var e=t.title,n=t.definitionSettings,r=t.dock,i=t.rect,o=t.measureText,a=t.style,s={type:"text",text:e,x:0,y:0,dx:0,dy:0,anchor:function(t,e){var n="middle";return"left"===t?"top"===e?n="end":"bottom"===e&&(n="start"):"right"===t?"top"===e?n="start":"bottom"===e&&(n="end"):"left"===e?n="start":"right"===e&&(n="end"),n}(r,n.anchor),baseline:"alphabetical"};d()(s,a.text);var c=o(s);if("top"===r||"bottom"===r){var u=i.width/2;"left"===n.anchor?u=n.paddingLeft||0:"right"===n.anchor&&(u=i.width-(n.paddingRight||0)),s.x=u,s.y="top"===r?i.height-n.paddingStart:n.paddingStart+c.height,s.dy="top"===r?-c.height/6:-c.height/3,s.maxWidth=.8*i.width}else{var l=i.height/2;"top"===n.anchor?l=n.paddingStart:"bottom"===n.anchor&&(l=i.height-n.paddingStart),s.y=l,s.x="left"===r?i.width-n.paddingStart:n.paddingStart,s.dx="left"===r?-c.height/3:c.height/3;var h="left"===r?270:90;s.transform="rotate(".concat(h,", ").concat(s.x+s.dx,", ").concat(s.y+s.dy,")"),s.maxWidth=.8*i.height}return isNaN(n.maxLengthPx)||(s.maxWidth=Math.min(s.maxWidth,n.maxLengthPx)),s}({title:t,dock:this.settings.dock,definitionSettings:e,rect:n,measureText:this.renderer.measureText,style:this.style})),r},beforeUpdate:function(t){t.settings&&(d()(this.settings,t.settings),this.definitionSettings=t.settings.settings);var e=this.settings.text,n=this.definitionSettings.join;this.title=Au(e,n,this.scale)}};function ju(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zu(t,e){var n,r=t.settings.dock,i=t.settings.settings.invert,o="top"===r||"bottom"===r,a=o?"width":"height",s=t.rect[a],c=t.chart.scroll(t.settings.scroll),u=e[o?"x":"y"];i&&(u=s-u);var l=c.getState();n={startOffset:u,startScroll:l.start,swipe:!1};var h=u/s*(l.max-l.min)+l.min;h<l.start?n.startScroll=h:h>l.start+l.viewSize&&(n.startScroll=h-l.viewSize);return{update:function(t){var e=t[o?"x":"y"];if(i&&(e=s-e),!n.swipe){if(Math.abs(n.startOffset-e)<=1)return;n.swipe=!0}var r=c.getState(),a=(e-n.startOffset)/s*(r.max-r.min),u=n.startScroll+a;c.moveTo(u)},end:function(t){var e=t[o?"x":"y"];i&&(e=s-e);var r=c.getState();if(n.swipe){var a=(e-n.startOffset)/s*(r.max-r.min),u=n.startScroll+a;c.moveTo(u)}else{var l=e/s*(r.max-r.min)+r.min-r.viewSize/2;c.moveTo(l)}}}}function Tu(t,e){var n=e.element().getBoundingClientRect();return{x:t.center.x-n.left,y:t.center.y-n.top}}var Eu={require:["chart","renderer"],on:{panStart:function(t){var e=Tu(t,this.renderer),n={x:e.x-t.deltaX,y:e.y-t.deltaY};this.currentMove=zu(this,n),this.currentMove.update(e)},panMove:function(t){if(this.currentMove){var e=Tu(t,this.renderer);this.currentMove.update(e)}},panEnd:function(t){if(this.currentMove){var e=Tu(t,this.renderer);this.currentMove.end(e),this.currentMove=null}},panCancel:function(){this.currentMove=null},tap:function(t){var e=Tu(t,this.renderer);zu(this,e).end(e)}},defaultSettings:{settings:{backgroundColor:"#eee",thumbColor:"#ccc",width:16}},created:function(){this.rect={x:0,y:0,width:0,height:0}},preferredSize:function(t){var e=this.chart.scroll(this.settings.scroll).getState();return e.viewSize>=e.max-e.min?Math.max(t.width,t.height):this.settings.settings.width},resize:function(t){var e=t.inner;return this.rect=e,e},render:function(t){var e,n=this.settings.dock,r=this.settings.settings.invert,i="top"===n||"bottom"===n,o=i?"width":"height",a=this.rect[o],s=this.chart.scroll(this.settings.scroll).getState(),c=a*(s.start-s.min)/(s.max-s.min),u=a*s.viewSize/(s.max-s.min);return r&&(c=a-c-u),t("div",{style:{position:"relative",width:"100%",height:"100%",background:this.settings.settings.backgroundColor,pointerEvents:"auto"}},[].concat(t("div",{class:{scroller:!0},style:(e={position:"absolute"},ju(e,i?"left":"top","".concat(c,"px")),ju(e,i?"top":"left","25%"),ju(e,i?"height":"width","50%"),ju(e,o,"".concat(Math.max(1,u),"px")),ju(e,"background",this.settings.settings.thumbColor),e)})))},renderer:"dom"};var Nu=5,Pu=0;function Cu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fu(t){var e=t.h,n=t.isVertical,r=t.value,i=t.pos,o=t.align,a=t.borderHit,s=t.state,c="end"!==o,u=c?{left:"0",top:"0"}:{right:"0",bottom:"0"},l=0,h="100%",f="100%";return s.targetRect&&"start"===s.settings.bubbles.align?(h="".concat(s.targetRect.x+s.targetRect.width,"px"),f="".concat(s.targetRect.y+s.targetRect.height,"px")):s.targetRect&&"end"===s.settings.bubbles.align&&(l=n?s.targetRect.x:s.targetRect.y,h="".concat(s.rect.width-l,"px"),f="".concat(s.rect.height-l,"px")),c||(i-=a),e("div",{on:{mouseover:function(){this.children[0].elm.style.backgroundColor="#000",this.children[0].elm.style[n?"height":"width"]="2px"},mouseout:function(){this.children[0].elm.style.backgroundColor=s.style.line.stroke,this.children[0].elm.style[n?"height":"width"]="1px"}},attrs:{"data-value":r},style:{cursor:n?"ns-resize":"ew-resize",position:"absolute",left:"".concat(n?l:i,"px"),top:"".concat(n?i:l,"px"),height:n?"".concat(a,"px"):f,width:n?h:"".concat(a,"px"),pointerEvents:"auto"}},[e("div",{style:d()({backgroundColor:s.style.line.stroke,position:"absolute",height:n?"".concat(1,"px"):"100%",width:n?"100%":"".concat(1,"px")},u)})])}function Du(t){var e,n,r=t.h,i=t.isVertical,o=t.label,a=t.otherValue,s=t.idx,c=t.pos,u=t.align,l=t.state,h="end"!==u,f="outside"===l.settings.bubbles.placement,y="none";return i?(n=h?"left":"right",f&&(y=h?"translate(-100%,  0px)":"translate(100%,  0px)")):(n=h?"top":"bottom",f&&(y=h?"translate(0px, -100%)":"translate(0px,  100%)")),r("div",{style:(e={position:"absolute"},Cu(e,n,"0"),Cu(e,i?"top":"left","".concat(c,"px")),Cu(e,"transform",y),e)},[r("div",{attrs:{"data-other-value":a,"data-idx":s},style:d()({position:"relative",borderRadius:"".concat(l.style.bubble.borderRadius,"px"),border:"".concat(l.style.bubble.strokeWidth,"px solid ").concat(l.style.bubble.stroke),backgroundColor:l.style.bubble.fill,color:l.style.bubble.color,fontFamily:l.style.bubble.fontFamily,fontSize:l.style.bubble.fontSize,padding:"4px 8px",textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"150px",minWidth:"50px",minHeight:"1em",pointerEvents:"auto",transform:i?"translate(0,-50%)":"translate(-50%,0)"})},[o])])}function Lu(t){var e=t.borderHit,n=t.els,r=t.isVertical,i=t.state,o=t.vStart,a=t.vEnd,s=t.idx,c=0;i.targetRect&&(c=r?i.targetRect.y:i.targetRect.x);var u=!!i.scale,l=u?i.scale.norm(o)*i.size:o,h=u?i.scale.norm(a)*i.size:a,f=Math.abs(l-h),d=Math.min(l,h)+c,y=d+f;if(i.targetRect){var p=i.targetFillRect||i.targetRect,g=r?p.height:p.width,v=u?i.scale.norm(o)*g:o,m=u?i.scale.norm(a)*g:a,x=Math.abs(v-m),b=Math.min(v,m),w={h:i.h,isVertical:r,top:b,height:x,color:i.style.target.fill,opacity:i.style.target.opacity};i.style.target.opacity<.8&&(w.on={mouseover:function(){this.elm.style.opacity=i.style.target.opacity+.1},mouseout:function(){this.elm.style.opacity=i.style.target.opacity}}),n.push(i.h("div",{style:{position:"absolute",left:"".concat(p.x,"px"),top:"".concat(p.y,"px"),height:"".concat(p.height,"px"),width:"".concat(p.width,"px")}},[function(t){var e=t.h,n=t.isVertical,r=t.top,i=t.height,o=t.color,a=t.on;return e("div",{style:{backgroundColor:o,opacity:t.opacity,position:"absolute",left:n?0:"".concat(r,"px"),top:n?"".concat(r,"px"):0,height:n?"".concat(i,"px"):"100%",width:n?"100%":"".concat(i,"px"),pointerEvents:"auto"},on:a},[])}(w)]))}n.push(Fu({h:i.h,isVertical:r,borderHit:e,value:l<h?o:a,pos:d,align:"start",state:i})),n.push(Fu({h:i.h,isVertical:r,borderHit:e,value:l<h?a:o,pos:y,align:"end",state:i}));var _=i.settings.bubbles;if(_&&_.show){var k={fontSize:_.fontSize,fontFamily:_.fontFamily,color:_.fill},M=[o,a];n.push(Du({h:i.h,isVertical:r,align:_.align,style:k,idx:s,otherValue:l<h?a:o,label:"".concat(i.format(l<h?o:a,M)),pos:d,state:i})),n.push(Du({h:i.h,isVertical:r,align:_.align,style:k,idx:s,otherValue:l<h?o:a,label:"".concat(i.format(l<h?a:o,M)),pos:y,state:i}))}}function Iu(t){var e=t.active.limitHigh-t.active.end,n=t.active.limitLow-t.active.start,r=t.current-t.start;return r=r<0?Math.max(r,n):Math.min(r,e)}function Bu(t){if(!t.active)return[];var e=t.start,n=t.current;if(-1!==t.active.idx)if("foo"===t.active.mode)e=Math.min(t.active.start,t.active.end),n=Math.max(t.active.start,t.active.end);else if("modify"===t.active.mode)e=Math.min(t.start,t.current),n=Math.max(t.start,t.current);else{var r=Iu(t);e=t.active.start+r,n=t.active.end+r}var i=[],o=t.direction===Pu;return t.ranges.forEach(function(e,n){n!==t.active.idx&&Lu({borderHit:Nu,els:i,isVertical:o,state:t,vStart:Math.min(e.min,e.max),vEnd:Math.max(e.min,e.max),idx:n})}),Lu({borderHit:Nu,els:i,isVertical:o,state:t,vStart:e,vEnd:n,idx:t.active.idx}),i}function Wu(t){return{min:t.scale.min(),max:t.scale.max()}}function $u(t){return{min:0,max:t.direction?t.rect.width:t.rect.height}}function qu(t,e,n){var r,i,o=t.ranges,a=-1;for(r=0;r<o.length;r++){if(o[r].min<=e&&e<=o[r].max){a=r,n.min=r?o[r-1].max:n.min,n.max=r+1<o.length?o[r+1].min:n.max;break}if(e<o[r].min){n.max=o[r].min,n.min=r?o[r-1].max:n.min;break}}-1===a&&o.length&&r>=o.length&&(n.min=o[o.length-1].max),-1!==a&&(i={idx:a,start:o[a].min,end:o[a].max,limitLow:n.min,limitHigh:n.max,mode:"foo"}),t.active=i}function Vu(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Yu(t){t.renderer.render(Bu(t))}function Uu(t,e){if(!e||!e.isActive())return[];var n=t.scale.data(),r=(n&&n.fields||[]).map(function(t){return t.id()}),i=e.brushes().filter(function(t){return"range"===t.type&&-1!==r.indexOf(t.id)})[0];return i?i.brush.ranges():[]}function Hu(t,e){for(var n,r=1/0,i=e.domain(),o=e.bandwidth()/2,a=0;a<i.length;++a){var s=Math.abs(t-o-e(i[a]));s<r&&(r=s,n=i[a])}return n}function Xu(t,e){return Math.min.apply(Math,Vu(t))<=Math.max.apply(Math,Vu(e))&&Math.max.apply(Math,Vu(t))>=Math.min.apply(Math,Vu(e))}function Zu(t){return S(t.reduce(function(t,e){return t.push.apply(t,Vu(M(e.bounds))),t},[]))}var Gu={require:["chart","settings","renderer"],defaultSettings:{settings:{bubbles:{show:!0,align:"start"}},style:{bubble:"$label-overlay",line:"$shape-guide--inverted",target:"$selection-area-target"}},renderer:"dom",on:{rangeStart:function(t){this.start(t)},rangeMove:function(t){this.move(t)},rangeEnd:function(t){this.end(t)},rangeClear:function(t){this.clear(t)}},created:function(){this.state={}},beforeRender:function(t){this.state.rect=t.size},render:function(t){var e=this.settings.settings;this.state.direction="vertical"===e.direction?Pu:1;var n=this.renderer.element().getBoundingClientRect(),r=this.state.rect[this.state.direction===Pu?"height":"width"],i=es(this.chart.scale(e.scale),r),o=function(t){var e={targetRect:null,targetFillRect:null,scale:null,size:null},n=t.settings.settings,r=n.target?t.chart.component(n.target.component):null,i=n.target&&n.target.selector?t.chart.findShapes(n.target.selector):[],o=n.target&&n.target.fillSelector?t.chart.findShapes(n.target.fillSelector):[];if(i.length>0){var a=Zu(i);if(e.size=a[t.state.direction===Pu?"height":"width"],e.scale=es(t.chart.scale(n.scale),e.size),e.targetRect=a,o.length>0){var s=Zu(o);e.targetFillRect=s}}else r&&r.rect&&(e.targetRect={x:r.rect.x-t.state.rect.x,y:r.rect.y-t.state.rect.y,width:r.rect.width,height:r.rect.height});return e}(this);if(i=o.scale?o.scale:i,this.state.targetRect=o.targetRect,this.state.targetFillRect=o.targetFillRect,this.state.size=null===o.size?r:o.size,this.state.settings=e,this.state.style=this.style,this.state.offset=n,this.state.brush=e.brush,this.state.brushInstance=this.chart.brush(this.state.brush),this.state.renderer=this.renderer,this.state.multi=!!e.multiple,this.state.h=t,this.state.cssCoord={offset:this.state.direction===Pu?"top":"left",coord:this.state.direction===Pu?"y":"x",pos:this.state.direction===Pu?"deltaY":"deltaX"},{}.hasOwnProperty.call(i,"norm")){this.state.fauxBrushInstance=null,this.state.findValues=null,this.state.scale=i;var a=this.state.scale.data();a&&a.fields&&a.fields[0]&&(this.state.format=a.fields[0].formatter())}else this.state.scale=oa(),this.state.scale.data=i.data,this.state.format=function(t,e){return Xu(i.range(),e)?function(t,e){var n=e.ticks(),r=e.domain().indexOf(Hu(t,e));return-1!==r?n[r].label:"-"}(t,i):"-"},this.state.fauxBrushInstance=$a(),this.state.findValues=function(t){return function(t,e){var n=e.domain(),r=e.range(),i=[];return t.forEach(function(t){if(Xu(r,[t.min,t.max])){var o=n.indexOf(Hu(t.min,e)),a=n.indexOf(Hu(t.max,e));i.push.apply(i,n.slice(Math.min(o,a),Math.max(o,a)+1))}}),i}(t,i)};return[]},start:function(t){!function(t){var e=t.state,n=t.e,r=t.renderer,i=t.ranges,o=t.targetSize;if(!e.started){var a=n.center.x-n.deltaX,s=n.center.y-n.deltaY,c=document.elementFromPoint(a,s);r.element().contains(c)||(c=null);var u={started:!0};e.offset=d()({},r.element().getBoundingClientRect());var l=a-e.offset.left,h=s-e.offset.top;e.offset.left+=e.targetRect?e.targetRect.x:0,e.offset.top+=e.targetRect?e.targetRect.y:0,e.ranges=i(e,e.fauxBrushInstance||e.brushInstance);var f=n.center[e.cssCoord.coord]-n[e.cssCoord.pos]-e.offset[e.cssCoord.offset],y=n.center[e.cssCoord.coord]-e.offset[e.cssCoord.offset];u.current=e.scale.normInvert(y/e.size),u.start=e.scale.normInvert(f/e.size);var p,g,v=e.ranges,m=Wu(e),x=-1;if(c&&c.hasAttribute("data-idx"))x=parseInt(c.getAttribute("data-idx"),10),m.min=x>0?v[x-1].max:m.min,m.max=x+1<v.length?v[x+1].min:m.max;else{for(p=0;p<v.length;p++){if(v[p].min<=u.start&&u.start<=v[p].max){x=p,m.min=p?v[p-1].max:m.min,m.max=p+1<v.length?v[p+1].min:m.max;break}if(u.start<v[p].min){m.max=v[p].min,m.min=p?v[p-1].max:m.min;break}}-1===x&&v.length&&p>=v.length&&(m.min=v[v.length-1].max)}if(-1!==x||e.multi||(u.ranges=[],m.min=e.scale.min(),m.max=e.scale.max()),-1!==x)if(g={idx:x,start:v[x].min,end:v[x].max,limitLow:m.min,limitHigh:m.max,mode:"move"},c&&c.hasAttribute("data-other-value"))u.start=parseFloat(c.getAttribute("data-other-value")),g.mode="modify";else{var b=e.scale.norm(g.start)*e.size,w=e.scale.norm(g.end)*e.size;Math.abs(f-b)<=o?(u.start=g.end,g.mode="modify"):Math.abs(f-w)<=o&&(u.start=g.start,g.mode="modify")}else g={idx:-1,start:u.start,end:u.current,limitLow:m.min,limitHigh:m.max,mode:"current"};u.active=g,"modify"!==g.mode&&e.targetRect&&!Cs.testRectPoint(e.targetRect,{x:l,y:h})||Object.keys(u).forEach(function(t){return e[t]=u[t]})}}({e:t,state:this.state,renderer:this.renderer,ranges:Uu,targetSize:Nu})},end:function(){this.state.started&&(!function(t,e){t.started=!1,t.ranges=e(t,t.fauxBrushInstance||t.brushInstance);var n=Wu(t);qu(t,t.current,n)}(this.state,Uu),Yu(this.state))},move:function(t){this.state.started&&(!function(t,e){var n=(e.center[t.cssCoord.coord]-t.offset[t.cssCoord.offset])/t.size,r=t.scale.normInvert(n);t.current=Math.max(Math.min(r,t.active.limitHigh),t.active.limitLow)}(this.state,t),function(t){var e=t.ranges.map(function(t){return{min:t.min,max:t.max}});if(-1!==t.active.idx)if("modify"===t.active.mode)e[t.active.idx].min=Math.min(t.start,t.current),e[t.active.idx].max=Math.max(t.start,t.current);else{var n=Iu(t);e[t.active.idx].min+=n,e[t.active.idx].max+=n}else e.push({min:Math.min(t.start,t.current),max:Math.max(t.start,t.current)});var r=t.scale.data();r&&r.fields&&r.fields.forEach(function(n){if(t.fauxBrushInstance){var r=Uu(t,t.fauxBrushInstance),i=t.findValues(r),o=t.findValues(e),a=o.filter(function(t){return-1===i.indexOf(t)}),s=i.filter(function(t){return-1===o.indexOf(t)}),c=a.map(function(t){return{key:n.id(),value:t}}),u=s.map(function(t){return{key:n.id(),value:t}});t.brushInstance.addAndRemoveValues(c,u),t.fauxBrushInstance.setRange(n.id(),e)}else t.brushInstance.setRange(n.id(),e)})}(this.state),Yu(this.state))},clear:function(){this.state.fauxBrushInstance&&this.state.fauxBrushInstance.clear(),this.state.renderer.render([])}};function Ju(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Qu(t){t.renderer.render(Bu(t))}function Ku(t){return t.rc.ranges()}var tl={require:["chart","settings","renderer"],defaultSettings:{settings:{bubbles:{show:!0,align:"start"}},style:{bubble:"$label-overlay",line:"$shape-guide--inverted",target:"$selection-area-target"}},renderer:"dom",on:{areaStart:function(t){this.start(t)},areaMove:function(t){this.move(t)},areaEnd:function(t){this.end(t)},areaClear:function(t){this.clear(t)}},created:function(){this.rect={x:0,y:0,width:0,height:0},this.state={}},beforeRender:function(t){this.rect=t.size},render:function(t){this.state.rect=this.rect;var e=this.settings.settings,n="vertical"===e.direction?Pu:1,r=this.state.rect[n===Pu?"height":"width"],i=this.renderer.element().getBoundingClientRect(),o=e.target?this.chart.component(e.target.component):null;return o&&o.rect?this.state.targetRect={x:o.rect.x-this.rect.x,y:o.rect.y-this.rect.y,width:o.rect.width,height:o.rect.height}:this.state.targetRect=null,this.state.style=this.style,this.state.chart=this.chart,this.state.direction=n,this.state.settings=e,this.state.offset=i,this.state.rc=Ea(),this.state.renderer=this.renderer,this.state.multi=!!e.multiple,this.state.h=t,this.state.size=r,this.state.cssCoord={offset:this.state.direction===Pu?"top":"left",coord:this.state.direction===Pu?"y":"x",pos:this.state.direction===Pu?"deltaY":"deltaX",area:this.state.direction===Pu?"height":"width"},this.state.format=function(t,e){return function(t,e,n){var r=Math.min.apply(Math,Ju(n)),i=Math.max.apply(Math,Ju(n)),o={x:t.direction?r+t.rect.x:t.rect.x,y:t.direction?t.rect.y:r+t.rect.y,width:t.direction?i-r:t.rect.width+t.rect.x,height:t.direction?t.rect.height+t.rect.y:i-r},a=t.chart.shapesAt(o,t.settings.brush);if(0===a.length)return"-";var s=a.reduce(function(n,i){var o=n.bounds,a=i.bounds;return e===r?o[t.cssCoord.coord]<=a[t.cssCoord.coord]?n:i:o[t.cssCoord.coord]+o[t.cssCoord.area]>=a[t.cssCoord.coord]+a[t.cssCoord.area]?n:i}),c=t.settings.brush.components.reduce(function(t,e){return t.key===s.key?t:e});return"function"==typeof t.settings.bubbles.label?t.settings.bubbles.label(s.data):Array.isArray(c.data)&&c.data.length?s.data[c.data[0]].label:s.data&&s.data.label?s.data.label:"-"}(this,t,e)},[]},start:function(t){!function(t){var e=t.state,n=t.e,r=t.renderer,i=t.ranges,o=t.targetSize;if(!e.started){var a=n.center.x-n.deltaX,s=n.center.y-n.deltaY,c=document.elementFromPoint(a,s);r.element().contains(c)||(c=null);var u={started:!0};e.offset=r.element().getBoundingClientRect(),e.ranges=i(e);var l=a-e.offset.left,h=s-e.offset.top,f=n.center[e.cssCoord.coord]-n[e.cssCoord.pos]-e.offset[e.cssCoord.offset],d=n.center[e.cssCoord.coord]-e.offset[e.cssCoord.offset],y=d,p=f;u.start=f,u.current=d;var g,v,m=e.ranges,x=$u(e),b=-1;if(c&&c.hasAttribute("data-idx"))b=parseInt(c.getAttribute("data-idx"),10),x.min=b>0?m[b-1].max:x.min,x.max=b+1<m.length?m[b+1].min:x.max;else{for(g=0;g<m.length;g++){if(m[g].min<=p&&p<=m[g].max){b=g,x.min=g?m[g-1].max:x.min,x.max=g+1<m.length?m[g+1].min:x.max;break}if(p<m[g].min){x.max=m[g].min,x.min=g?m[g-1].max:x.min;break}}-1===b&&m.length&&g>=m.length&&(x.min=m[m.length-1].max)}if(-1!==b||e.multi||(u.ranges=[],x.min=0,x.max=e.direction?e.rect.width:e.rect.height),-1!==b)if(v={idx:b,start:m[b].min,end:m[b].max,limitLow:x.min,limitHigh:x.max,mode:"move"},c&&c.hasAttribute("data-other-value"))u.start=parseFloat(c.getAttribute("data-other-value")),v.mode="modify";else{var w=v.start,_=v.end;Math.abs(f-w)<=o?(u.start=v.end,v.mode="modify"):Math.abs(f-_)<=o&&(u.start=v.start,v.mode="modify")}else v={idx:-1,start:p,end:y,limitLow:x.min,limitHigh:x.max,mode:"current"};u.active=v,"modify"!==v.mode&&e.targetRect&&!Cs.testRectPoint(e.targetRect,{x:l,y:h})||Object.keys(u).forEach(function(t){return e[t]=u[t]})}}({e:t,state:this.state,renderer:this.renderer,ranges:Ku,targetSize:Nu})},end:function(){this.state.started&&(!function(t,e){t.started=!1,t.ranges=e(t);var n=$u(t);qu(t,t.current,n)}(this.state,Ku),Qu(this.state))},move:function(t){this.state.started&&(!function(t,e){var n=e.center[t.cssCoord.coord]-t.offset[t.cssCoord.offset];t.current=Math.max(Math.min(n,t.active.limitHigh),t.active.limitLow)}(this.state,t),function(t){var e=t.ranges.map(function(t){return{min:t.min,max:t.max}});if(-1!==t.active.idx)if("modify"===t.active.mode)e[t.active.idx].min=Math.min(t.start,t.current),e[t.active.idx].max=Math.max(t.start,t.current);else{var n=Iu(t);e[t.active.idx].min=t.active.start+n,e[t.active.idx].max=t.active.end+n}else e.push({min:Math.min(t.start,t.current),max:Math.max(t.start,t.current)});t.rc.set(e);var r=[];e.forEach(function(e){r.push.apply(r,Ju(function(t,e){var n={x:t.direction?e.min+t.rect.x:t.rect.x,y:t.direction?t.rect.y:e.min+t.rect.y,width:t.direction?e.max-e.min:t.rect.width+t.rect.x,height:t.direction?t.rect.height+t.rect.y:e.max-e.min};return t.chart.shapesAt(n,t.settings.brush)}(t,e)))}),function(t,e){t.chart.brushFromShapes(e,t.settings.brush)}(t,r)}(this.state),Qu(this.state))},clear:function(){this.state.rc&&this.state.rc.clear(),this.state.renderer.render([])}};function el(t){var e="vertical"===t.direction,n=t.rect[e?"height":"width"],r=t.rect[e?"width":"height"];return function(t){var e=t.brush;if(!e||!e.isActive())return[];var n=t.scale.data(),r=(n&&n.fields||[]).map(function(t){return t.id()}),i=e.brushes().filter(function(t){return"range"===t.type&&-1!==r.indexOf(t.id)})[0];return i?i.brush.ranges():[]}(t).map(function(i){var o=t.scale(i.min)*n,a=t.scale(i.max)*n,s=Math.min(o,a),c=Math.abs(o-a);return{type:"rect",fill:t.fill,opacity:t.opacity,x:e?0:s,width:e?r:c,y:e?s:0,height:e?c:r}})}function nl(t,e,n,r){function i(){!function(t){t.renderer.render(el(t))}(t)}function o(){!function(t){t.renderer.render(el(t))}(t)}function a(){!function(t){t.renderer.render(el(t))}(t)}t.brush=e,e&&(e.on("start",i),e.on("update",o),e.on("end",a),t.start=i,t.update=o,t.end=a,t.brush=e,t.scale=n,t.renderer=r)}function rl(t){t.brush&&(t.brush.removeListener("start",t.start),t.brush.removeListener("update",t.update),t.brush.removeListener("end",t.end)),t.start=void 0,t.update=void 0,t.end=void 0,t.brush=void 0,t.scale=void 0,t.renderer=void 0}var il={require:["chart","settings","renderer"],defaultSettings:{settings:{}},preferredSize:function(){return 50},created:function(){this.rect={x:0,y:0,width:0,height:0},this.state={}},beforeRender:function(t){this.rect=t.size},render:function(){var t=this.settings.settings,e=this.chart.brush(t.brush),n=t.direction||"horizontal",r="horizontal"===n?this.rect.width:this.rect.height,i=es(this.chart.scale(t.scale),r);return rl(this.state),nl(this.state,e,i,this.renderer),this.state.rect=this.rect,this.state.fill=t.fill||"#ccc",this.state.opacity=void 0!==t.opacity?t.opacity:1,this.state.direction=n,el(this.state)},beforeDestroy:function(){rl(this.state)}};function ol(t,e){var n=e.center.x,r=e.center.y;return{x:n-t.left,y:r-t.top}}function al(t,e,n){return ws(t,e.points[0])<Math.pow(n.settings.snapIndicator.threshold,2)}function sl(t,e){null==t.path.d?t.path.d="M".concat(e.x," ").concat(e.y," "):t.path.d+="L".concat(e.x," ").concat(e.y," "),t.points.push(e)}function cl(t){var e=t.state,n=t.start,r=void 0===n?null:n,i=t.end,o=void 0===i?null:i;null!==r&&(e.snapIndicator.x1=r.x,e.snapIndicator.y1=r.y),null!==o&&(e.snapIndicator.x2=o.x,e.snapIndicator.y2=o.y)}function ul(t,e){t.snapIndicator.visible=e}var ll={require:["chart","renderer","settings"],defaultSettings:{displayOrder:0,settings:{brush:{components:[]},snapIndicator:{threshold:75,strokeDasharray:"5, 5",stroke:"black",strokeWidth:2,opacity:.5},lasso:{fill:"transparent",stroke:"black",strokeWidth:2,opacity:.7,strokeDasharray:"20, 10"},startPoint:{r:10,fill:"green",stroke:"black",strokeWidth:1,opacity:1}}},on:{lassoStart:function(t){this.start(t)},lassoEnd:function(t){this.end(t)},lassoMove:function(t){this.move(t)},lassoCancel:function(){this.cancel()}},created:function(){this.state={points:[],active:!1,path:null,snapIndicator:null,startPoint:null,rendererBounds:null,componentDelta:null,brushConfig:null,lineBrushShape:{x1:0,y1:0,x2:0,y2:0}}},start:function(t){this.state.active=!0,this.state.path=function(t){return{visible:!0,type:"path",d:null,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,opacity:t.opacity,strokeDasharray:t.strokeDasharray,collider:{type:null}}}(this.settings.settings.lasso),this.state.snapIndicator=function(t){return{visible:!1,type:"line",x1:0,y1:0,x2:0,y2:0,strokeDasharray:t.strokeDasharray,stroke:t.stroke,strokeWidth:t.strokeWidth,opacity:t.opacity,collider:{type:null}}}(this.settings.settings.snapIndicator),this.state.startPoint=function(t){return{visible:!0,type:"circle",cx:0,cy:0,r:t.r,fill:t.fill,opacity:t.opacity,stroke:t.stroke,strokeWidth:t.strokeWidth,collider:{type:null}}}(this.settings.settings.startPoint),this.state.rendererBounds=this.renderer.element().getBoundingClientRect(),this.state.componentDelta=function(t,e){var n=t.element.getBoundingClientRect();return{x:e.left-n.left,y:e.top-n.top}}(this.chart,this.state.rendererBounds),this.state.brushConfig=function(t){return t.settings.brush.components.map(function(t){return{key:t.key,contexts:t.contexts||["lassoBrush"],data:t.data||[""],action:t.action||"add"}})}(this.settings);var e=ol(this.state.rendererBounds,t);sl(this.state,e),cl({state:this.state,start:e}),function(t,e){t.startPoint.cx=e.x,t.startPoint.cy=e.y}(this.state,e)},move:function(t){if(this.state.active){var e=ol(this.state.rendererBounds,t);al(e,this.state,this.settings)?ul(this.state,!0):ul(this.state,!1),sl(this.state,e),cl({state:this.state,end:e}),function(t,e){var n=[t.startPoint,t.path,t.snapIndicator].filter(function(t){return t.visible});e.render(n)}(this.state,this.renderer),function(t,e){if(t.active){var n=t.points[t.points.length-2],r=t.points[t.points.length-1];t.lineBrushShape.x1=n.x+t.componentDelta.x,t.lineBrushShape.y1=n.y+t.componentDelta.y,t.lineBrushShape.x2=r.x+t.componentDelta.x,t.lineBrushShape.y2=r.y+t.componentDelta.y;var i=e.shapesAt(t.lineBrushShape,{components:t.brushConfig});e.brushFromShapes(i,{components:t.brushConfig})}}(this.state,this.chart)}},end:function(t){this.state.active&&(ul(this.state,!1),al(ol(this.state.rendererBounds,t),this.state,this.settings)&&function(t,e){if(t.active){var n=t.componentDelta.x,r=t.componentDelta.y,i=t.points.map(function(t){return{x:t.x+n,y:t.y+r}}),o=e.shapesAt({vertices:i},{components:t.brushConfig});e.brushFromShapes(o,{components:t.brushConfig})}}(this.state,this.chart),this.state={points:[],active:!1,path:null,snapIndicator:null,startPoint:null,rendererBounds:null,componentDelta:null,brushConfig:null,lineBrushShape:{x1:0,y1:0,x2:0,y2:0}},this.renderer.render([]))},cancel:function(){this.state.active&&(!function(t,e){t.brushConfig.forEach(function(t){t.contexts.forEach(function(t){e.brush(t).end()})})}(this.state,this.chart),this.state={points:[],active:!1,path:null,snapIndicator:null,startPoint:null,rendererBounds:null,componentDelta:null,brushConfig:null,lineBrushShape:{x1:0,y1:0,x2:0,y2:0}},this.renderer.render([]))},render:function(){}};var hl=1.5,fl=4;function dl(t,e){return{node:t,data:t.data,scale:e.scale,formatter:e.formatter,dataset:e.dataset}}function yl(t,e,n){var r={type:"text",text:e,maxWidth:n.rotate?t.height:t.width,x:0,y:t.y,dx:0,dy:0,fill:n.fill,anchor:n.rotate?"end":"start",baseline:"alphabetical",fontSize:"".concat(n.fontSize,"px"),fontFamily:n.fontFamily},i=n.textMetrics;if(t.width<n.fontSize||t.height<i.height)return!1;if(n.rotate){var o=Math.max(0,t.width-i.height/(.8*hl)),a=Math.max(0,t.height-i.width);r.x=t.x+i.height/hl+n.align*o,r.y=t.y+n.justify*a,r.transform="rotate(-90, ".concat(r.x+r.dx,", ").concat(r.y+r.dy,")")}else{var s=Math.max(0,t.width-i.width),c=Math.max(0,t.height-i.height/(.8*hl));r.x=t.x+n.align*s,r.y=t.y+i.height/hl+n.justify*c}return r}function pl(t){var e=t.bar,n=t.view,r=t.direction,i=t.position,o=t.padding,a=void 0===o?fl:o,s={};if(d()(s,e),i&&"inside"!==i)if("up"===r||"down"===r){var c=Math.max(0,Math.min(e.y,n.height)),u=Math.max(0,Math.min(e.y+e.height,n.height));"outside"===i&&"up"===r||"opposite"===i&&"down"===r?(s.y=0,s.height=c):("outside"===i&&"down"===r||"opposite"===i&&"up"===r)&&(s.y=u,s.height=n.height-u)}else{var l=Math.max(0,Math.min(e.x,n.width)),h=Math.max(0,Math.min(e.x+e.width,n.width));"outside"===i&&"left"===r||"opposite"===i&&"right"===r?(s.x=0,s.width=l):("outside"===i&&"right"===r||"opposite"===i&&"left"===r)&&(s.x=h,s.width=n.width-h)}else;return function(t,e){var n=Math.max(0,Math.min(t.y,e.height)),r=Math.max(0,Math.min(t.y+t.height,e.height)),i=Math.max(0,Math.min(t.x,e.width)),o=Math.max(0,Math.min(t.x+t.width,e.width));t.x=i,t.width=o-i,t.y=n,t.height=r-n}(s,n),function(t,e){t.x+=e,t.width-=2*e,t.y+=e,t.height-=2*e}(s,a),s}function gl(t){var e,n,r,i,o,a=t.direction,s=t.fitsHorizontally,c=t.measured,u=t.node,l=t.orientation,h=t.placementSettings,f=t.rect,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pl,y=[];for(o=0;o<h.length;o++){if(r=h[o],i=d({bar:u.localBounds,view:f,direction:a,position:r.position}),y.push(i),e=!o||i.height>e.height?i:e,"v"===l&&(s&&i.height>c.height*hl||!s&&i.height>c.width)){n=i;break}if("h"===l&&i.height>c.height&&i.width>c.width){n=i;break}}return n||(n=e,o=y.indexOf(n)),{bounds:n,placement:r=h[o]}}function vl(t){for(var e,n,r,i,o,a,s,c,u,l,h,f,d,y=t.chart,p=t.targetNodes,g=t.rect,v=t.fitsHorizontally,m=t.collectiveOrientation,x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gl,b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yl,w=[],_=0,k=p.length;_<k;_++){a=null,f=dl(r=(n=p[_]).node,y),d="left"===(u=n.direction)||"right"===u?"h":"v";for(var M=0;M<n.texts.length;M++)if(i=n.texts[M]){var S=x({direction:u,fitsHorizontally:v,lblStngs:l=n.labelSettings[M],measured:c=n.measurements[M],node:r,orientation:d,placements:l.placements,placementSettings:n.placementSettings[M],rect:g});if(a=S.bounds,h=S.placement,a&&h){o=h.justify,s="function"==typeof h.fill?h.fill(f,_):h.fill;var R="function"==typeof l.linkData?l.linkData(f,_):void 0;"up"===u&&(o=1-o),"opposite"===h.position&&(o=1-o),(e=b(a,i,{fill:s,justify:"h"===d?h.align:o,align:"h"===d?o:h.align,fontSize:l.fontSize,fontFamily:l.fontFamily,textMetrics:c,rotate:!("h"===m||v)}))&&(void 0!==R&&(e.data=R),w.push(e))}}}return w}function ml(t){var e=2*Math.PI;return(t%e+e)%e}function xl(t){return{x:t.x,y:t.y-t.height/2,width:t.width,height:t.height}}function bl(t,e,n){var r=e.x,i=e.y;if(r*r+i*i>t*t)return null;var o=Math.sin(n),a=Math.cos(n),s=r*a-i*o,c=t*t-s*s;if(c<0)return null;var u=Math.sqrt(c);return{x:s*a+o*u,y:-s*o+a*u}}function wl(t){var e=t.slice,n=t.padding,r=t.measured,i=e.start,o=e.end,a=e.innerRadius,s=e.outerRadius,c=ml((i+o)/2),u=function(t){var e,n,r=t.radius,i=t.size,o=t.angle,a=i.width,s=i.height,c={x:a/2,y:s/2};switch(Math.floor(o/(Math.PI/2))){case 0:if(!(e=bl(r,c,o)))return null;e.y*=-1,n={x:-a,y:0};break;case 1:if(!(e=bl(r,c,Math.PI-o)))return null;n={x:-a,y:-s};break;case 2:if(!(e=bl(r,c,o-Math.PI)))return null;e.x*=-1,n={x:0,y:-s};break;case 3:if(!(e=bl(r,c,2*Math.PI-o)))return null;e.x*=-1,e.y*=-1,n={x:0,y:0};break;default:throw new Error("invalid angle")}return{x:e.x+n.x,y:e.y+n.y,width:a,height:s}}({radius:s,size:{width:r.width+2*n,height:r.height+2*n},angle:c});if(!u)return null;u.baseline="top";var l={x1:0,y1:0,x2:Math.sin(i)*s,y2:-Math.cos(i)*s};if(Cs.testRectLine(u,l))return null;var h={x1:0,y1:0,x2:Math.sin(o)*s,y2:-Math.cos(o)*s};if(Cs.testRectLine(u,h))return null;var f={cx:0,cy:0,r:a};return Cs.testCircleRect(f,u)?null:(function(t,e){t.x+=e,t.width-=2*e,t.y+=e,t.height-=2*e}(u,n),u)}function _l(t){var e=t.slice,n=t.measured,r=t.padding,i=e.start,o=e.end,a=e.innerRadius,s=e.outerRadius,c=s-a-2*r,u=o-i;if(u<Math.PI){var l=(n.height/2+r)/Math.tan(u/2);l>a&&(c=s-l-2*r)}if(c<0)return null;var h=ml((i+o)/2),f=s-r,d={x:Math.sin(h)*f,y:-Math.cos(h)*f,width:c,height:n.height};return h<Math.PI?(d.angle=h-Math.PI/2,d.anchor="end"):(d.angle=h+Math.PI/2,d.anchor="start"),d}function kl(t){var e=t.context,n=t.node,r=t.bounds,i=n.desc.slice,o=ml((i.start+i.end)/2);switch(Math.floor(o/(Math.PI/2))){case 0:e.q1maxY=r.y-2,void 0===e.q2minY&&(e.q2minY=r.y+r.height+2);break;case 1:e.q2minY=r.y+r.height+2;break;case 2:e.q3minY=r.y+r.height+2;break;case 3:e.q4maxY=r.y-2,void 0===e.q3minY&&(e.q3minY=r.y+r.height+2)}}function Ml(t,e){return{node:t,data:t.data,scale:e.scale,formatter:e.formatter,dataset:e.dataset}}function Sl(t,e,n){var r={type:"text",text:e,maxWidth:t.width,x:t.x,y:t.y+("top"===t.baseline?t.height/2:0),fill:n.fill,anchor:t.anchor||"start",baseline:"middle",fontSize:"".concat(n.fontSize,"px"),fontFamily:n.fontFamily};if(!isNaN(t.angle)){var i=t.angle*(360/(2*Math.PI));r.transform="rotate(".concat(i,", ").concat(r.x,", ").concat(r.y,")")}return r}function Rl(t){var e,n,r=t.slice,i=t.direction,o=t.position,a=t.padding,s=t.measured,c=t.view,u=t.context,l=r.start,h=r.end,f=r.innerRadius,d=r.offset;switch(o){case"into":e="rotate"===i?_l({slice:r,measured:s,padding:a}):wl({slice:r,measured:s,padding:a});break;case"inside":n={start:l,end:h,innerRadius:0,outerRadius:f},e="rotate"===i?_l({slice:n,measured:s,padding:a}):wl({slice:n,measured:s,padding:a});break;case"outside":e="rotate"===i?function(t){var e=t.slice,n=t.measured,r=t.padding,i=t.view,o=e.start,a=e.end,s=e.outerRadius,c=e.offset,u=s+r,l=a-o;if(l<Math.PI&&(n.height/2+r)/Math.tan(l/2)>u)return null;var h=ml((o+a)/2),f=Math.sin(h)*u,d=-Math.cos(h)*u,y=n.width,p=h%Math.PI;if(p>Math.PI/2&&(p=Math.PI-p),Math.cos(p)>.001){var g=d<0?i.y:i.y+i.height,v=Math.abs(g-c.y)/Math.cos(p)-Math.tan(p)*(n.height/2)-2*r-s;v<y&&(y=v)}if(Math.sin(p)>.001){var m=f<0?i.x:i.x+i.width,x=Math.abs(m-c.x)/Math.sin(p)-n.height/2/Math.tan(p)-2*r-s;x<y&&(y=x)}if(y<=0)return 0;var b={x:f,y:d,width:y,height:n.height};return h<Math.PI?(b.angle=h-Math.PI/2,b.anchor="start"):(b.angle=h+Math.PI/2,b.anchor="end"),b}({slice:r,measured:s,padding:a,view:c}):function(t){var e=t.slice,n=t.measured,r=t.padding,i=t.view,o=t.context,a=e.start,s=e.end,c=e.outerRadius,u=e.offset,l=ml((a+s)/2);if(function(t,e,n){switch(e){case 0:return t.q1maxY<0;case 1:return t.q2minY>n.height;case 2:return t.q3minY>n.height;case 3:return t.q4maxY<0;default:return!0}}(o,Math.floor(l/(Math.PI/2)),i))return null;var h=c+r+n.height/2,f=Math.sin(l)*h,d=-Math.cos(l)*h,y=n.width;if(l<Math.PI){var p=Math.abs(i.x+i.width-(f+u.x));p<y&&(y=p)}else{var g=Math.abs(i.x-(f+u.x));g<y&&(y=g)}var v={x:f,y:d,width:y,height:n.height};return l<Math.PI?v.anchor="start":v.anchor="end",v}({slice:r,measured:s,padding:a,view:c,context:u});break;default:throw new Error("not implemented")}return e&&(e.x+=d.x,e.y+=d.y,"outside"===o&&"rotate"!==i&&function(t,e,n){var r=n.start,i=n.end,o=n.offset,a=n.outerRadius,s=ml((r+i)/2);switch(Math.floor(s/(Math.PI/2))){case 0:if(void 0!==e.q1maxY){var c=Math.min(t.y,e.q1maxY-t.height),u=t.y-c;if(t.y=c,u>1){var l=a+2;t.line={type:"line",x1:t.x-2,y1:t.y+2,x2:o.x+Math.sin(s)*l,y2:o.y-Math.cos(s)*l,strokeWidth:1}}}break;case 1:if(void 0!==e.q2minY){var h=Math.max(t.y,e.q2minY),f=h-t.y;if(t.y=h,f>1){var d=a+2;t.line={type:"line",x1:t.x-2,y1:t.y-2,x2:o.x+Math.sin(s)*d,y2:o.y-Math.cos(s)*d,strokeWidth:1}}}break;case 2:if(void 0!==e.q3minY){var y=Math.max(t.y,e.q3minY),p=y-t.y;if(t.y=y,p>1){var g=a+2;t.line={type:"line",x1:t.x+2,y1:t.y-2,x2:o.x+Math.sin(s)*g,y2:o.y-Math.cos(s)*g,strokeWidth:1}}}break;case 3:if(void 0!==e.q4maxY){var v=Math.min(t.y,e.q4maxY-t.height),m=t.y-v;if(t.y=v,m>1){var x=a+2;t.line={type:"line",x1:t.x+2,y1:t.y+2,x2:o.x+Math.sin(s)*x,y2:o.y-Math.cos(s)*x,strokeWidth:1}}}}}(e,u,r)),e}function Al(t){for(var e=t.context,n=t.direction,r=t.measured,i=t.node,o=t.placementSettings,a=t.rect,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rl,c=0;c<o.length;c++){var u=o[c],l=s({context:e,slice:i.desc.slice,view:a,direction:n,position:u.position,measured:r,padding:u.padding});if(l)return{bounds:l,placement:u}}return{bounds:null,placement:null}}var Ol=1.2,jl=.9;function zl(t,e){return{node:t,data:t.data,scale:e.scale,formatter:e.formatter,dataset:e.dataset}}function Tl(t,e,n){var r={type:"text",text:e,maxWidth:t.width,x:0,y:t.y,dx:0,dy:0,fill:n.fill,anchor:"start",baseline:"alphabetical",fontSize:"".concat(n.fontSize,"px"),fontFamily:n.fontFamily},i=n.textMetrics;if(t.width<n.fontSize)return!1;var o=Math.max(0,t.width-i.width);return r.x=t.x+n.align*o,r.y=t.y+i.height/Ol,r}function El(t){return{type:"circle",bounds:{cx:t.cx,cy:t.cy,r:t.r}}}function Nl(t){return t.desc&&t.desc.slice?function(t){var e=t.start,n=t.end,r=t.innerRadius,i=t.outerRadius,o=t.offset;if(Math.abs(e+2*Math.PI-n)>1e-12)return{type:null,bounds:null};var a=0!==r?r:i;return El({cx:o.x,cy:o.y,r:a})}(t.desc.slice):"circle"===t.type?El(t.attrs):"rect"===t.type?{type:"rect",bounds:t.bounds}:{type:null,bounds:null}}var Pl={bar:function(t){var e=t.settings,n=t.chart,r=t.nodes,i=t.rect,o=t.renderer,a=t.style,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vl,c=d()({fontSize:12,fontFamily:"Arial",align:.5,justify:0,fill:"#333"},a.label);c.fontSize=parseInt(c.fontSize,10);var u=e.labels.map(function(t){return d()({},c,e,t)}),l=e.labels.map(function(t){return t.placements.map(function(n){return d()({},c,e,t,n)})}),h=function(t){for(var e,n,r,i,o,a,s,c=t.nodes,u=t.rect,l=t.chart,h=t.labelSettings,f=t.placementSettings,d=t.settings,y=t.renderer,p={},g=[],v=!0,m=!1,x=0;x<c.length;x++)if(i=(n=c[x]).localBounds,Cs.testRectRect(i,u)){var b=dl(n,l);e={node:n,texts:[],measurements:[],labelSettings:[],placementSettings:[]};for(var w=0;w<h.length;w++)(r="function"==typeof(a=h[w]).label?a.label(b,x):"")&&(s="function"==typeof d.direction?d.direction(b,x):d.direction||"up",m=m||"left"===s||"right"===s,p.fontFamily=a.fontFamily,p.fontSize="".concat(a.fontSize,"px"),p.text=r,o=y.measureText(p),e.measurements.push(o),e.texts.push(r),e.labelSettings.push(a),e.placementSettings.push(f[w]),e.direction=s,v=v&&o.width<=i.width-2*fl);g.push(e)}return{targetNodes:g,fitsHorizontally:v,hasHorizontalDirection:m}}({nodes:r,chart:n,renderer:o,settings:e,rect:i,labelSettings:u,placementSettings:l}),f=h.fitsHorizontally,y=h.hasHorizontalDirection;return s({chart:n,targetNodes:h.targetNodes,stngs:e,rect:i,fitsHorizontally:f,collectiveOrientation:y?"h":"v"})},slice:function(t){var e=t.settings,n=t.chart,r=t.nodes,i=t.rect,o=t.renderer,a=t.style,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Al,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sl,u=d()({fontSize:12,fontFamily:"Arial",fill:"#333",padding:4,position:"into"},a.label);u.fontSize=parseInt(u.fontSize,10);var l=e.labels.map(function(t){return d()({},u,e,t)}),h=e.labels.map(function(t){return t.placements.map(function(n){return d()({},u,e,t,n)})}),f={},y=[];r=function(t){for(var e=[],n=[],r=[],i=[],o=0;o<t.length;++o){var a=t[o].desc.slice,s=ml((a.start+a.end)/2);switch(Math.floor(s/(Math.PI/2))){case 0:e.push(t[o]);break;case 1:n.push(t[o]);break;case 2:r.push(t[o]);break;case 3:i.push(t[o])}}var c=function(t,e){return ml((t.desc.slice.start+t.desc.slice.end)/2)-ml((e.desc.slice.start+e.desc.slice.end)/2)},u=function(t,e){return c(e,t)};return e.sort(u),n.sort(c),r.sort(u),i.sort(c),e.concat(n,i,r)}(r);for(var p={},g=0,v=r.length;g<v;g++)for(var m=r[g],x=Ml(m,n),b=0;b<l.length;b++){var w=l[b],_="function"==typeof w.label?w.label(x,g):"";if(_){var k="function"==typeof w.direction?w.direction(x,g):w.direction||"horizontal",M="function"==typeof w.linkData?w.linkData(x,g):void 0;f.fontFamily=w.fontFamily,f.fontSize="".concat(w.fontSize,"px"),f.text=_;var S=o.measureText(f),R=s({context:p,direction:k,lblStngs:w,measured:S,node:m,placementSettings:h[b],rect:i}),A=R.bounds,O=R.placement;if(A&&O){if("outside"===O.position&&"rotate"!==k&&(kl({context:p,node:m,bounds:A}),!Os(xl(A),i)))continue;var j="function"==typeof O.fill?O.fill(x,g):O.fill,z=c(A,_,{fill:j,fontSize:w.fontSize,fontFamily:w.fontFamily,textMetrics:S});z&&(void 0!==M&&(z.data=M),y.push(z),A.line&&(A.line.stroke=j,y.push(A.line)))}}}return y},rows:function(t){var e=t.settings,n=t.chart,r=t.nodes,i=t.renderer,o=t.style,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tl,s=d()({fontSize:12,fontFamily:"Arial",fill:"#333",padding:4,align:.5,justify:.5},o.label);s.fontSize=parseInt(s.fontSize,10);for(var c=d()({},s,e),u=e.labels.map(function(t){return d()({},c,t)}),l={},h=[],f=0,y=r.length;f<y;f++){var p=r[f],g=zl(p,n),v=Nl(p),m=v.type,x=v.bounds;if(x){var b=0,w=[],_=[],k="circle"===m?2*x.r*jl:x.height;b+=c.padding;var M=void 0;for(M=0;M<u.length;M++){var S=u[M],R="function"==typeof S.label?S.label(g,f):"";l.fontFamily=S.fontFamily,l.fontSize="".concat(S.fontSize,"px"),l.text=R;var A=i.measureText(l);if((b+=A.height+S.padding)>k)break;_.push(R),w.push(A)}var O=M,j=Math.max(0,k-b),z=void 0;for(z="circle"===m?x.cy-x.r*jl:x.y,z+=c.justify*j+c.padding,M=0;M<O;M++){var T=u[M],E=void 0;if("circle"===m){var N=Math.max(Math.abs(z-x.cy),Math.abs(z+w[M].height-x.cy)),P=Math.sqrt(x.r*x.r-N*N);E={x:x.cx-P+c.padding,y:z,width:2*P-2*c.padding,height:w[M].height}}else E={x:x.x+c.padding,y:z,width:x.width-2*c.padding,height:w[M].height};z+=w[M].height+c.padding;var C="function"==typeof T.fill?T.fill(g,f):T.fill,F="function"==typeof T.linkData?T.linkData(g,f):void 0,D=a(E,_[M],{fill:C,align:T.align,fontSize:T.fontSize,fontFamily:T.fontFamily,textMetrics:w[M]});D&&(void 0!==F&&(D.data=F),h.push(D))}}}return h}};function Cl(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Fl={require:["chart","renderer","settings"],defaultSettings:{settings:{},style:{label:"$label"}},created:function(){this.rect={x:0,y:0,width:0,height:0}},beforeRender:function(t){this.rect=t.size},render:function(){var t=this,e=[];return(this.settings.settings.sources||[]).forEach(function(n){n.strategy&&Pl[n.strategy.type]&&n.component&&e.push.apply(e,Cl(function(t,e){var n=t.chart,r=t.source,i=t.rect,o=t.renderer,a=t.style;if(!n.component(r.component))return[];var s=n.findShapes(r.selector).filter(function(t){return t.key===r.component});return e({chart:n,settings:r.strategy.settings,nodes:s,rect:{x:0,y:0,width:i.width,height:i.height},renderer:o,style:a})}({chart:t.chart,rect:t.rect,renderer:t.renderer,source:n,style:t.style},Pl[n.strategy.type])))}),e}};var Dl={layout:{size:1,direction:"ltr",scrollOffset:0},item:{show:!0,justify:.5,align:.5,label:{fontSize:"12px",fontFamily:"Arial",fill:"#595959",wordBreak:"none",maxLines:2,maxWidth:136,lineHeight:1.2},shape:{type:"square",size:12}},title:{show:!0,text:void 0,anchor:"start",fontSize:"16px",fontFamily:"Arial",fill:"#595959",wordBreak:"none",maxLines:2,maxWidth:156,lineHeight:1.25},navigation:{button:{class:void 0,content:void 0}}};function Ll(t){var e=t.x,n=void 0===e?0:e,r=t.y,i=t.item,o=t.globalMetrics,a=t.symbolFn,s=void 0===a?zc:a,c=t.direction,u=void 0===c?"ltr":c,l=i.label.displayObject,h=i.label.bounds,f=i.symbol.meta,y="rtl"===u,p={x:y?n+o.maxLabelBounds.width:n+o.maxSymbolSize+o.spacing,y:r,width:o.maxLabelBounds.width,height:Math.max(o.maxSymbolSize,o.maxLabelBounds.height)},g=function(t,e,n){var r=Math.max(0,t.width-e),i=Math.max(0,t.height-e);return{x:t.x+e/2+n.align*r,y:t.y+e/2+n.justify*i}}({x:y?n+o.maxLabelBounds.width+o.spacing:n,y:r,width:o.maxSymbolSize,height:p.height},f.size,{align:void 0===f.align?.5:f.align,justify:void 0===f.justify?.5:f.justify}),v=s(d()({},f,g));return delete v.collider,l.anchor=y?"end":"start",function(t,e,n){var r=n.textMetrics;if(t.height<r.height)return!1;var i=Math.max(0,t.width-r.width);e.baseline="hanging";var o=Math.max(0,t.height-r.height);e.x=t.x+n.align*i,e.y=t.y+n.justify*o}(p,l,{textMetrics:h,fontSize:parseInt(l.fontSize,10),align:0,justify:.5}),{item:{type:"container",data:i.label.displayObject.data,children:[v,l],collider:{type:"rect",x:n,y:r,width:o.maxItemBounds.width,height:o.maxItemBounds.height}},metrics:p}}function Il(t,e){var n=t.items.length,r=Math.ceil(n/e),i="horizontal"===t.layout.orientation?"width":"height",o="width"===i?"horizontal":"vertical";return t.globalMetrics.maxItemBounds[i]*r+(r-1)*t.layout.margin[o]}var Bl=function(t,e){var n,r,i,o,a=e.onScroll,s=void 0===a?function(){}:a,c=null,u=0,l={itemize:function(e){n=function(t,e){for(var n,r,i=t.resolved,o=t.dock,a=[],s=i.items.items,c=i.symbols.items,u=i.labels.items,l=0,h=0,f=0,y=0;y<s.length;y++)!1!==s[y].show&&(n=d()({},u[y],{type:"text",fontSize:"".concat(parseInt(u[y].fontSize,10),"px"),text:void 0!==u[y].text?u[y].text:u[y].data.label||""}),r={symbol:{meta:c[y]},label:{displayObject:n,bounds:e.textBounds(n)}},a.push(r),l=Math.max(c[y].size,l),h=Math.max(r.label.bounds.width,h),f=Math.max(r.label.bounds.height,f));return{items:a,globalMetrics:{spacing:8,maxSymbolSize:l,maxItemBounds:{height:Math.max(l,f),width:l+8+h},maxLabelBounds:{width:h,height:f}},layout:{margin:{vertical:void 0!==i.layout.item.vertical?i.layout.item.vertical:8,horizontal:void 0!==i.layout.item.horizontal?i.layout.item.horizontal:8},mode:i.layout.item.mode,size:i.layout.item.size,orientation:"top"===o||"bottom"===o?"horizontal":"vertical",direction:i.layout.item.direction,scrollOffset:i.layout.item.scrollOffset}}}(e,t.renderer),c=null!==c||isNaN(n.layout.scrollOffset)?c:n.layout.scrollOffset},getItemsToRender:function(t){i=t.viewRect,u=l.getContentOverflow(i);var e=l.extent();c=Math.max(0,Math.min(c,u)),o=d()({},i);var a="horizontal"===l.orientation()?"x":"y";return o[a]-=c,o["x"===a?"width":"height"]=e,function(t,e,n){for(var r=t.viewRect,i=n.itemized,o=n.create,a=void 0===o?Ll:o,s=n.parallels,c=i.layout.direction,u=i.globalMetrics,l=i.items,h="horizontal"===i.layout.orientation,f=0,d=[],y=u.maxItemBounds.height,p=u.maxItemBounds.width,g=i.layout.margin.vertical+y,v=i.layout.margin.horizontal+p,m=e.x,x=e.y,b=r.x-e.x,w=0;w<l.length;w++){var _=a({y:x,x:"rtl"===c?r.x+b+r.width-p-(m-e.x):m,item:l[w],globalMetrics:u,direction:c});if((h&&m>=r.x-p||!h&&x>=r.y-y)&&d.push(_.item),++f>=s?(f=0,h?(m+=v,x=e.y):(x+=g,m=e.x)):h?x+=g:m+=v,!h&&x>r.y+r.height)break;if(h&&m>r.x+r.width)break}return d}(t,o,{itemized:n,parallels:r})},parallelize:function(t,e){return r=function(t,e,n){var r=n.items.length,i="horizontal"===n.layout.orientation?"width":"height",o="width"===i?"horizontal":"vertical",a=n.globalMetrics.maxItemBounds[i]*r+(r-1)*n.layout.margin[o],s=Math.ceil(a/t);if(null!=e){var c="horizontal"===n.layout.orientation?"height":"width",u=Math.floor(e/(4+n.globalMetrics.maxItemBounds[c]));s=Math.min(s,u)}var l=isNaN(n.layout.size)?1:n.layout.size;return Math.max(1,Math.min(s,l))}(t,e,n)},hasContentOverflow:function(){var t="horizontal"===n.layout.orientation?"width":"height";return Il(n,r)>i[t]},getContentOverflow:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,e="horizontal"===n.layout.orientation?"width":"height";return Math.max(0,Il(n,r)-t[e])},getNextSize:function(){var t="horizontal"===n.layout.orientation?"width":"height",e="width"===t?"horizontal":"vertical";return n.globalMetrics.maxItemBounds[t]+n.layout.margin[e]},getPrevSize:function(){var t="horizontal"===n.layout.orientation?"width":"height",e="width"===t?"horizontal":"vertical";return n.globalMetrics.maxItemBounds[t]+n.layout.margin[e]},hasNext:function(){return"horizontal"===l.orientation()?i.x+i.width<o.x+o.width:i.y+i.height<o.y+o.height},hasPrev:function(){return"horizontal"===l.orientation()?o.x<i.x:o.y<i.y},next:function(){l.scroll(-l.getNextSize())},prev:function(){l.scroll(l.getPrevSize())},scroll:function(t){var e=Math.max(0,Math.min(u,c-t));e!==c&&(c=e,s())},offset:function(){return c},orientation:function(){return n.layout.orientation},direction:function(){return n.layout.direction},extent:function(){return Il(n,r)},spread:function(){return function(t,e){var n=e,r="horizontal"===t.layout.orientation?"height":"width",i="width"===r?"horizontal":"vertical";return t.globalMetrics.maxItemBounds[r]*n+(n-1)*t.layout.margin[i]}(n,r)}};return l},Wl={up:"▲",right:"▶",down:"▼",left:"◀"};function $l(t,e){var n=e.size,r=e.isActive,i=e.direction,o=e.nav,a=e.attrs,s={},c="";o&&o.button&&("function"==typeof o.button.class?s=o.button.class({direction:i}):o.button.class&&(s=o.button.class),"function"==typeof o.button.content&&(c=o.button.content(t,{direction:i})));var u={width:"".concat(n,"px"),minWidth:"".concat(n,"px"),height:"".concat(n,"px")};Object.keys(s).length||(u.border="0",u.background="none");var l=a;return r||(l.disabled="disabled"),t("button",{class:s,style:u,attrs:l},[c||t("span",{style:{pointerEvents:"none"}},[Wl[i]])])}var ql=function(t){var e,n={itemize:function(t){e=function(t){var e=t.dock,n=t.navigation;return{layout:{orientation:"top"===e||"bottom"===e?"vertical":"horizontal"},navigation:n}}(t)},render:function(r){return function(t,e,n,r){var i=e.rect,o=e.itemRenderer;if(t&&t.renderArgs){t.size(i);var a=t.renderArgs[0],s="vertical"===n.layout.orientation,c="rtl"===o.direction(),u=o.hasNext(),l=o.hasPrev();if(l||u){var h=s?["right","left"]:["down","up"];c&&s&&h.reverse();var f=[a("div",{style:{position:"relative",display:"flex","flex-direction":s?"column":"row","justify-content":"center",height:"100%",pointerEvents:"auto"},attrs:{dir:c&&!s?"rtl":"ltr"}},[$l(a,{size:32,isActive:u,direction:h[0],attrs:{"data-action":"next","data-component-key":r.settings.key},nav:n.navigation}),$l(a,{size:32,isActive:l,direction:h[1],attrs:{"data-action":"prev","data-component-key":r.settings.key},nav:n.navigation})])];t.render(f)}else t.render([])}}(n.renderer,r,e,t)},extent:function(){return 32},spread:function(){return 64}};return n};var Vl=function(t){var e,n={itemize:function(n){e=function(t,e){var n=t.resolved;if(!1===n.title.item.show)return null;var r=d()({},n.title.item,{type:"text"});if("rtl"===n.layout.item.direction&&(r.anchor&&"start"!==r.anchor?"end"===r.anchor&&(r.anchor="start"):r.anchor="end"),void 0===n.title.settings.text){var i=e.scale.data().fields;r.text=i&&i[0]?i[0].title():""}return{displayObject:r,bounds:e.renderer.textBounds(r)}}(n,t)},render:function(t){!function(t,e,n){var r=t.rect;if(e){var i=[];if(e.size(r),n){var o={start:0,end:r.width,middle:r.width/2};i.push(d()({},n.displayObject,{x:o[n.displayObject.anchor]||0,y:0,baseline:"hanging"}))}e.render(i)}}(t,n.renderer,e)},spread:function(){return e?1.25*e.bounds.height:0},extent:function(){return e?e.bounds.width:0}};return n};function Yl(t,e,n,r){var i,o,a,s=r.itemRenderer,c=r.navigationRenderer,u=r.titleRenderer,l=r.isPreliminary,h=void 0!==l&&l,f=0,y={x:e.spacing,y:e.spacing,width:t.width-2*e.spacing,height:t.height-2*e.spacing};if(i={x:y.x,y:y.y,width:y.width,height:u.spread()},"horizontal"===n){i={x:y.x,y:y.y,width:u.extent(),height:u.spread()};var p=y.width-i.width-(i.width?e.spacing:0),g=y.height;s.parallelize(p,h?void 0:g);var v=s.extent()>p?c.extent():0,m=s.spread(),x=v?c.spread():0;a={x:(o={x:i.x+i.width+(i.width?e.spacing:0),y:y.y+Math.max(0,(x-m)/2),width:y.width-v-i.width-(v?e.spacing:0)-(i.width?e.spacing:0),height:g}).x+o.width+(v?e.spacing:0),y:y.y,width:v,height:y.height},i.y=o.y,"rtl"===s.direction()&&(a.x=y.x,o.x=a.x+a.width+(a.width?e.spacing:0),i.x=o.x+o.width+(i.width?e.spacing:0)),f=Math.max(i.height,x,s.spread())}else{var b=y.height-i.height-(i.height?e.spacing:0),w=y.width;s.parallelize(b,h?void 0:w);var _=s.extent()>b?c.extent():0;a={x:y.x,y:y.y+y.height-_,width:y.width,height:_},o={x:y.x,y:i.y+i.height+(i.height?e.spacing:0),width:y.width,height:y.height-i.height-(i.height?e.spacing:0)-a.height-(a.height?e.spacing:0)},f=Math.max(u.extent(),_?c.spread():0,s.spread())}return o=d()({},t,{x:t.x+o.x,y:t.y+o.y,width:o.width,height:o.height}),a.x+=t.x,a.y+=t.y,i.x+=t.x,i.y+=t.y,{title:d()({},t,i),content:d()({},t,o),navigation:d()({},t,a),orientation:n,preferredSize:f}}function Ul(t){t.state.resolved=function(t){var e=t.scale.domain(),n={items:[]};if("threshold-color"===t.scale.type){var r=t.scale.data().fields[0],i=function(t){return String(t)};t.settings.formatter?i=t.chart.formatter(t.settings.formatter):r&&(i=r.formatter());for(var o=0;o<e.length-1;o++){var a={value:e[o],label:"".concat(i(e[o])," - < ").concat(i(e[o+1]))};r&&(a.source={field:r.id()}),n.items.push(a)}"vertical"==("top"===t.settings.dock||"bottom"===t.settings.dock?"horizontal":"vertical")&&n.items.reverse()}else{var s=t.scale.labels?t.scale.labels():null;n.items=e.map(function(e,n){var r=t.scale.datum?d()({},t.scale.datum(e)):{value:e};return t.scale.datum&&((r=d()({},t.scale.datum(e))).value=e),t.scale.label?r.label=t.scale.label(e):s&&(r.label=s[n]),r})}var c=t.resolver.resolve({data:{fields:t.scale.data().fields},defaults:d()(!0,{},Dl.title,t.style.title),settings:t.settings.settings.title}),u=t.resolver.resolve({data:{fields:t.scale.data().fields},defaults:Dl.layout,settings:t.settings.settings.layout}),l=t.resolver.resolve({data:n,defaults:d()(!0,{},Dl.item.label,t.style.item.label),settings:(t.settings.settings.item||{}).label}),h=d()(!0,{},(t.settings.settings.item||{}).shape);void 0===h.fill&&t.settings.scale&&(h.fill={scale:t.settings.scale});var f=t.resolver.resolve({data:n,defaults:d()(!0,{},Dl.item.shape,t.style.item.shape),settings:h}),y=t.resolver.resolve({data:n,defaults:d()(!0,{},{show:Dl.item.show}),settings:{show:(t.settings.settings.item||{}).show}});function p(t,n){var r=t.data.value,i=e[n+1];t.data.value=[r,i]}return"threshold-color"===t.scale.type&&("vertical"==("top"===t.settings.dock||"bottom"===t.settings.dock?"horizontal":"vertical")?(y.items.reverse().forEach(p),y.items.reverse()):y.items.forEach(p)),{title:c,labels:l,symbols:f,items:y,layout:u}}(t),t.titleRenderer.itemize({resolved:t.state.resolved,dock:t.settings.dock||"center"}),t.itemRenderer.itemize({resolved:t.state.resolved,dock:t.settings.dock||"center"}),t.navigationRenderer.itemize({resolved:t.state.resolved,dock:t.settings.dock||"center",navigation:t.settings.settings.navigation}),t.state.display={spacing:8}}function Hl(t){var e=t.rect,n=t.settings,r=t.state,i=t.itemRenderer,o=t.navigationRenderer,a=t.titleRenderer,s="top"===n.dock||"bottom"===n.dock?"horizontal":"vertical",c=Yl(e,r.display,s,{itemRenderer:i,navigationRenderer:o,titleRenderer:a});t.renderer.size(c.content);var u=i.getItemsToRender({viewRect:d()({},c.content,{x:0,y:0})});return o.render({rect:c.navigation,itemRenderer:i}),a.render({rect:c.title}),t.state.views={layout:c},u}var Xl={require:["chart","settings","renderer","update","resolver","registries"],defaultSettings:{settings:{},style:{item:{label:"$label",shape:"$shape"},title:"$title"}},mounted:function(t){t&&t.parentElement&&(this.navigationRenderer.renderer.appendTo(t.parentElement),this.titleRenderer.renderer.appendTo(t.parentElement)),this.navigationRenderer.render({rect:this.state.views.layout.navigation,itemRenderer:this.itemRenderer}),this.titleRenderer.render({rect:this.state.views.layout.title})},beforeUnmount:function(){this.navigationRenderer.renderer.clear(),this.titleRenderer.renderer.clear()},on:{panstart:function(){this.state.interaction.started||this.itemRenderer.getContentOverflow()&&(this.state.interaction.started=!0,this.state.interaction.delta=0)},panmove:function(t){if(this.state.interaction.started){var e="horizontal"===this.itemRenderer.orientation()?("rtl"===this.itemRenderer.direction()?-1:1)*t.deltaX:t.deltaY;this.itemRenderer.scroll(e-this.state.interaction.delta),this.state.interaction.delta=e}},panend:function(){this.state.interaction.started=!1},scroll:function(t){this.itemRenderer.scroll(-t)},next:function(){this.itemRenderer.next()},prev:function(){this.itemRenderer.prev()}},created:function(){var t=this;this.rect={x:0,y:0,width:0,height:0},this.state={interaction:{}},this.onScroll=function(){var e=Hl(t);t.update(e)},this.itemRenderer=Bl(this,{onScroll:this.onScroll}),this.navigationRenderer=ql(this),this.titleRenderer=Vl(this),this.navigationRenderer.renderer=this.registries.renderer("dom")(),this.titleRenderer.renderer=this.registries.renderer()(),Ul(this)},preferredSize:function(t){return function(t,e){var n=0,r=t.settings.dock||"center",i="top"===r||"bottom"===r?"horizontal":"vertical",o=t.state.display,a=Yl(e.inner,o,i,{itemRenderer:t.itemRenderer,navigationRenderer:t.navigationRenderer,titleRenderer:t.titleRenderer,isPreliminary:!0});return n+=o.spacing,n+=a.preferredSize,n+=o.spacing}(this,t)},beforeUpdate:function(){Ul(this)},beforeRender:function(t){this.rect=t.size},render:function(){return Hl(this)},beforeDestroy:function(){this.navigationRenderer.renderer.destroy(),this.titleRenderer.renderer.destroy()},_DO_NOT_USE_getInfo:function(){return{offset:this.itemRenderer.offset()}}},Zl="legend-cat";function Gl(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Jl(t,e){var n=0,r=t.state.isVertical?"justify":"align",i=t.state.isVertical?"y":"x",o=t.state.isVertical?"height":"width",a=t.state.isVertical?"requiredHeight":"requiredWidth";n=t.state.rect[o]-t.state.legend.length()-t.state.title[a](),n*=Math.min(1,Math.max(t.stgns[r],0)),e[i]+=n}function Ql(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Kl(t){return(Kl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function th(t,e,n){var r=n[t];return"object"===Kl(r)?-1!==r.valid.indexOf(e)?e:r.default:n.default}function eh(t,e){var n={x:0,y:0,width:0,height:0},r=t.stgns.padding;return n.x=r.left,n.y=r.top,n.width=e.width-r.left-r.right,n.height=e.height-r.top-r.bottom,n}function nh(t){var e="top"!==t.settings.dock&&"bottom"!==t.settings.dock,n=t.stgns.title,r=t.chart.scale(t.stgns.fill),i=t.chart.scale(t.stgns.major),o=function(t,e){var n=e.domain(),r=n,i=t.stgns.tick.label;return!i&&t.formatter?i=t.formatter:!i&&e.data().fields&&(i=e.data().fields[0].formatter()),"function"==typeof i&&(r=n.map(i).map(String)),n.map(function(n,i){var o=r[i];return{value:n,label:o,pos:e.norm(parseFloat(n,10)),textMetrics:t.renderer.measureText({text:o,fontSize:t.stgns.tick.fontSize,fontFamily:t.stgns.tick.fontFamily})}})}(t,i),a=function(t){return th(t.dock,t.settings.tick.anchor,{left:{valid:["left","right"],default:"left"},right:{valid:["left","right"],default:"right"},top:{valid:["top","bottom"],default:"top"},bottom:{valid:["top","bottom"],default:"bottom"},default:"right"})}(t.settings);if(void 0===n.text){var s=i.data().fields;n.text=s&&s[0]?s[0].title():""}var c=t.renderer.measureText({text:n.text,fontSize:n.fontSize,fontFamily:n.fontFamily}),u=t.renderer.textBounds({text:n.text,fontSize:n.fontSize,fontFamily:n.fontFamily,maxLines:n.maxLines,maxWidth:n.maxLengthPx,wordBreak:n.wordBreak,hyphens:n.hyphens,lineHeight:n.lineHeight}),l={isVertical:e,nodes:[],title:{anchor:function(t){return th(t.dock,t.settings.title.anchor,{left:{valid:["top"],default:"top"},right:{valid:["top"],default:"top"},top:{valid:["left","right"],default:"left"},bottom:{valid:["left","right"],default:"left"},default:"top"})}(t.settings),textMetrics:c,textBounds:u,requiredWidth:function(){if(!n.show)return 0;var t=u.width,r=n.maxLengthPx;return e||(t+=n.padding,r+=n.padding),Math.min(t,r,l.rect.width)},requiredHeight:function(){if(!n.show)return 0;var t=u.height;return e&&(t+=n.padding),Math.min(t,l.rect.height)}},ticks:{values:o,anchor:a,length:Math.min(Math.max.apply(Math,Ql(o.map(function(t){return t.textMetrics.width}))),t.stgns.tick.maxLengthPx),requiredHeight:function(){return"top"===a?Math.max.apply(Math,Ql(l.ticks.values.map(function(t){return t.textMetrics.height})))+t.stgns.tick.padding:0},height:Math.max.apply(Math,Ql(o.map(function(t){return t.textMetrics.height})))},legend:{fillScale:r,majorScale:i,length:function(){var n=e?"height":"width",r=e?"requiredHeight":"requiredWidth",i=Math.min(l.rect[n],l.rect[n]*t.stgns.length)-l.title[r]();return Math.max(0,Math.min(i,t.stgns.maxLengthPx))}}};return l}var rh={require:["chart","settings","renderer"],defaultSettings:{displayOrder:0,dock:"right",settings:{size:15,length:.5,maxLengthPx:250,align:.5,justify:0,padding:{left:5,right:5,top:5,bottom:5},tick:{label:null,fill:"#595959",fontSize:"12px",fontFamily:"Arial",maxLengthPx:100,anchor:null,padding:5},title:{show:!0,text:void 0,fill:"#595959",fontSize:"12px",fontFamily:"Arial",maxLengthPx:100,padding:5,maxLines:2,wordBreak:"none",lineHeight:1.2,hyphens:"auto",anchor:null}}},preferredSize:function(t){var e=this.state;e.rect=eh(this,t.inner);var n=this.stgns.size,r=e.isVertical?this.stgns.padding.left+this.stgns.padding.right:this.stgns.padding.top+this.stgns.padding.bottom;n+=r;var i=Math.max(t.inner.width,t.inner.height);if("left"===e.ticks.anchor||"right"===e.ticks.anchor){if(e.ticks.values.reduce(function(t,e){return t+e.textMetrics.height},0)>this.state.legend.length())return i;n+=e.ticks.length}else{if(e.ticks.length>this.state.legend.length())return i;n+=Math.max.apply(Math,Ql(e.ticks.values.map(function(t){return t.textMetrics.height})))}return n+=this.stgns.tick.padding,this.stgns.title.show&&(n="left"===e.title.anchor||"right"===e.title.anchor?Math.max(e.title.textBounds.height+r,n):Math.max(n,e.title.requiredWidth()+r)),this.state.preferredSize=n,n},created:function(){this.stgns=this.settings.settings,this.state=nh(this)},beforeUpdate:function(t){this.stgns=t.settings.settings,this.state=nh(this)},beforeRender:function(t){if(this.state.nodes=[],this.state.rect=eh(this,t.size),this.stgns.title.show){var e=function(t){var e=t.state,n=t.stgns,r="left"===e.ticks.anchor,i="top"===e.ticks.anchor,o=e.rect.x,a=e.rect.y,s="start";"left"===e.title.anchor?(o+=e.title.requiredWidth()-n.title.padding,a+=e.title.textMetrics.height,a+=i?e.rect.height-e.title.textBounds.height:0,s="end"):"right"===e.title.anchor?(o+=e.legend.length(),o+=n.title.padding,a+=e.title.textMetrics.height,a+=i?e.rect.height-e.title.textBounds.height:0):"top"===e.title.anchor&&(o+=r?e.rect.width:0,a+=e.title.textMetrics.height,s=r?"end":"start");var c={tag:"legend-title",type:"text",x:o,y:Math.min(a,e.rect.y+e.rect.height),text:n.title.text,fill:n.title.fill,fontSize:n.title.fontSize,fontFamily:n.title.fontFamily,maxWidth:n.title.maxLengthPx,maxLines:n.title.maxLines,wordBreak:n.title.wordBreak,hyphens:n.title.hyphens,lineHeight:n.title.lineHeight,anchor:s};return Jl(t,c),c}(this);this.state.nodes.push(e)}var n=function(t,e){var n=t.state,r=t.stgns,i=n.rect,o=i.x,a=i.y,s=n.isVertical?r.size:n.legend.length(),c=n.isVertical?n.legend.length():r.size;"left"===n.ticks.anchor?o+=n.rect.width-r.size:"top"===n.ticks.anchor&&(a+=n.rect.height-r.size),"top"===n.title.anchor?a+=n.title.requiredHeight():"left"===n.title.anchor&&(o+=n.title.requiredWidth());var u={type:"rect",x:o,y:a,width:s,height:c,fill:{type:"gradient",stops:e,degree:n.isVertical?90:180}};return Jl(t,u),u}(this,function(t){var e=t.state.legend.fillScale,n=t.state.legend.majorScale;return e.domain().map(function(t){return{type:"stop",color:e(t),offset:Math.min(1,Math.max(0,n.norm(t)))}}).sort(function(t,e){return t.offset-e.offset})}(this)),r={id:"legend-seq-target",type:"container",children:[n,function(t,e){var n=t.state,r=t.stgns,i="start",o={type:"rect",x:e.x,y:e.y,width:n.isVertical?0:e.width,height:n.isVertical?e.height:0,fill:"transparent"};return{type:"container",id:"legend-seq-ticks",children:Gl(n.ticks.values.map(function(a){var s=0,c=0,u=0;return n.isVertical?(c=e.y+e.height*a.pos,u=1===a.pos?-a.textMetrics.height/5:a.textMetrics.height):s=e.x+e.width*a.pos,"right"===n.ticks.anchor?(s=e.x+r.size+r.tick.padding,o.x=e.x+e.width):"left"===n.ticks.anchor?(s=e.x-r.tick.padding,i="end"):"top"===n.ticks.anchor?(c=e.y-r.tick.padding,u-=.25*a.textMetrics.height,i=0===a.pos?"start":"end"):"bottom"===n.ticks.anchor&&(c=e.y+e.height+r.tick.padding,u=.8*a.textMetrics.height,i=0===a.pos?"start":"end",o.y=e.y+e.height),{type:"text",x:s,y:c,dx:0,dy:u,text:a.label,fontSize:r.tick.fontSize,fontFamily:r.tick.fontFamily,fill:r.tick.fill,maxWidth:n.isVertical?r.tick.maxLengthPx:Math.min(r.tick.maxLengthPx,n.legend.length()/2),anchor:i,textBoundsFn:t.renderer.textBounds}})).concat([o])}}(this,n)]};this.state.nodes.push(r)},render:function(){return this.state.nodes}};var ih={step:function(t){return new Jt(t,.5)},stepAfter:function(t){return new Jt(t,1)},stepBefore:function(t){return new Jt(t,0)},linear:yt,basis:function(t){return new At(t)},cardinal:Nt.tension(0),catmullRom:Lt,monotonex:function(t){return new Ut(t)},monotoney:function(t){return new Ht(t)},natural:function(t){return new Zt(t)}},oh={coordinates:{minor:.5,major:.5,layerId:0},orientation:"horizontal",layers:{curve:"linear",show:!0,line:{stroke:"#ccc",strokeWidth:1,strokeDasharray:void 0,opacity:1,show:!0},area:{fill:"#ccc",opacity:.8,show:!0}}};function ah(t,e){var n=e.generator,r=e.item,i=e.data,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a={type:"path",d:n(t),opacity:r.opacity,stroke:r.stroke,strokeWidth:r.strokeWidth,fill:o||r.fill,data:i};return r.strokeDasharray&&(a.strokeDasharray=r.strokeDasharray),a}function sh(t){var e=function(t){for(var e=t.data,n=t.stngs,r=t.rect,i=t.resolver,o=t.style,a=r.width,s=r.height,c=i.resolve({data:e,defaults:oh.coordinates,settings:n.coordinates||{},scaled:{major:"vertical"===n.orientation?s:a,minor:"vertical"===n.orientation?a:s}}),u={},l=0,h=0;h<c.items.length;h++){var f=c.items[h],y=f.layerId;u[y]=u[y]||{order:l++,id:y,items:[],firstPoint:f.data},u[y].items.push(f)}var p=Object.keys(u).map(function(t){return u[t]}),g={items:p.map(function(t){return t.firstPoint})},v=n.layers||{};return{coordinates:c,metaLayers:p,layers:i.resolve({data:g,defaults:{curve:oh.layers.curve,show:oh.layers.show},settings:{curve:v.curve,show:v.show}}),lines:i.resolve({data:g,defaults:d()({},oh.layers.line,o.line),settings:v.line}),areas:i.resolve({data:g,defaults:d()({},oh.layers.area,o.area),settings:v.area})}}(t),n=e.metaLayers,r=e.coordinates,i=e.layers,o=e.lines,a=e.areas,s=[];return n.forEach(function(e,n){var c=i.items[n];if(!1!==c.show){for(var u,l,h=[],f=[],d=0;d<e.items.length;d++)l=(u=e.items[d]).data,isNaN(u.major)||(t.missingMinor0&&(u.minor0=r.settings.minor.scale?r.settings.minor.scale(l.minor0?l.minor0.value:0):0),isNaN(u.minor)||h.push(u.minor),f.push(u));var y=h.sort(function(t,e){return t-e})[Math.floor((h.length-1)/2)];s.push({layerObj:c,lineObj:o.items[n],areaObj:a.items[n],median:y,points:f,firstPoint:e.firstPoint})}}),s}var ch={require:["chart","resolver"],defaultSettings:{style:{area:"$shape",line:"$shape-outline"}},created:function(){this.stngs=this.settings.settings||{}},beforeRender:function(t){var e=t.size;this.rect=e},render:function(t){var e=t.data,n=this.rect,r=n.width,i=n.height,o=!this.stngs.coordinates||void 0===this.stngs.coordinates.minor0,a=sh({data:e,stngs:this.stngs,rect:this.rect,resolver:this.resolver,style:this.style,missingMinor0:o});return a.sort(function(t,e){return t.median-e.median}),function(t,e){var n=e.width,r=e.height,i=e.missingMinor0,o=e.stngs,a=[],s=o.layers||{};return t.forEach(function(t){var e,c,u=t.lineObj,l=t.layerObj,h=t.areaObj,f=t.points,y=mt(),p={size:r,p:"y"},g={size:n,p:"x"};if("vertical"===o.orientation){var v=d()(!0,{},g);g=d()(!0,{},p),p=d()(!0,{},v)}y[g.p](function(t){return t.major*g.size})["".concat(p.p,"1")](function(t){return t.minor*p.size})["".concat(p.p,"0")](function(t){return t.minor0*p.size}).defined(function(t){return"number"==typeof t.minor&&!isNaN(t.minor)}).curve(ih["monotone"===l.curve?"monotone".concat(g.p):l.curve]),e=y["line".concat(p.p.toUpperCase(),"1")](),c=y["line".concat(p.p.toUpperCase(),"0")](),s.area&&!1!==h.show&&a.push(ah(f,{data:t.firstPoint,item:h,generator:y})),u&&!1!==u.show&&(a.push(ah(f,{data:t.firstPoint,item:u,generator:e},"none")),!i&&s.area&&!1!==h.show&&a.push(ah(f,{data:t.firstPoint,item:u,generator:c},"none")))}),a}(a,{width:r,height:i,missingMinor0:o,stngs:this.stngs})}},uh="line";function lh(t){return(lh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hh(t,e){var n,r,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];"object"===lh(e.center)?(n=e.center.x,r=e.center.y):(n=e.clientX,r=e.clientY);var o=n-t.state.boundingRect.left,a=r-t.state.boundingRect.top;return{x:i?Math.max(0,Math.min(o,t.rect.width)):o,y:i?Math.max(0,Math.min(a,t.rect.height)):a}}function fh(t,e){return{x:e.x+t.rect.x,y:e.y+t.rect.y}}function dh(t,e){var n=Math.min(t.x,e.x),r=Math.min(t.y,e.y);return{x:n,y:r,width:Math.max(t.x,e.x)-n,height:Math.max(t.y,e.y)-r}}var yh={require:["chart","renderer"],defaultSettings:{displayOrder:99,settings:{brush:{components:[]}},style:{area:"$selection-area-target"}},on:{areaStart:function(t){this.start(t)},areaMove:function(t){this.move(t)},areaEnd:function(t){this.end(t)},areaCancel:function(){this.cancel()}},created:function(){this.state={start:{x:0,y:0},end:{x:0,y:0},active:!1}},preferredSize:function(){return 0},render:function(){},beforeRender:function(t){var e=t.size;this.rect=e},start:function(t){this.state.boundingRect=this.renderer.element().getBoundingClientRect();var e=hh(this,t,!1);Cs.testRectPoint({x:0,y:0,width:this.rect.width,height:this.rect.height},e)&&(this.state.brushConfig=function(t){return t.settings.brush.components.map(function(t){return{key:t.key,contexts:t.contexts,data:t.data,action:t.action||"set"}})}(this.settings),this.state.start=hh(this,t),this.state.active=!0)},move:function(t){this.state.active&&(this.state.end=hh(this,t),function(t){if(t.state.active){var e=fh(t,t.state.start),n=fh(t,t.state.end),r=t.chart.shapesAt(dh(e,n),{components:t.state.brushConfig});t.chart.brushFromShapes(r,{components:t.state.brushConfig})}}(this),function(t){t.renderer.render([d()({type:"rect"},dh(t.state.start,t.state.end),t.style.area)])}(this))},end:function(){this.state.active&&(this.state={start:{x:0,y:0},end:{x:0,y:0},active:!1},this.renderer.render([]))},cancel:function(){this.state.active&&(!function(t,e){t.brushConfig.forEach(function(t){Array.isArray(t.contexts)&&t.contexts.forEach(function(t){e.brush(t).end()})})}(this.state,this.chart),this.state={start:{x:0,y:0},end:{x:0,y:0},active:!1},this.renderer.render([]))}};var ph=[function(t){t.component("box",_c),t.component("box-marker",_c)},function(t){t.component(Fc,Cc),t.component("point-marker",Cc)},function(t){t.component("pie",Wc)},function(t){t.component("grid-line",Gc)},function(t){t.component("ref-line",nu)},function(t){t.component(Ru,Su)},function(t){t.component("text",Ou)},function(t){t.component("scrollbar",Eu)},function(t){t.component("brush-range",Gu),t.component("brush-area-dir",tl)},function(t){t.component("range",il)},function(t){t.component("brush-lasso",ll)},function(t){t.component("labels",Fl)},function(t){t.component(Zl,Xl)},function(t){t.component("legend-seq",rh)},function(t){t.component(uh,ch)},function(t){t.component("brush-area",yh)}];function gh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var vh=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._parent=null,this._children=[],this._ancestors=null,this.type=e,this.data=null}return function(t,e,n){e&&gh(t.prototype,e),n&&gh(t,n)}(t,[{key:"detach",value:function(){return this._parent&&this._parent.removeChild(this),this}},{key:"equals",value:function(t){var e=this.children,n=t.children;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(!e[r].equals(n[r]))return!1;return!0}},{key:"toJSON",value:function(){return{type:this.type,children:this.children.map(function(t){return t.toJSON()})}}},{key:"parent",get:function(){return this._parent}},{key:"isBranch",get:function(){return this._children&&this._children.length}},{key:"children",get:function(){return this._children}},{key:"ancestors",get:function(){if(!this._ancestors){var t=this._parent;this._ancestors=t?[t].concat(t.ancestors):[]}return this._ancestors}},{key:"descendants",get:function(){var t,e,n,r=[];for(t=0,e=this._children.length;t<e;t++)n=this._children[t],r.push(n),n._children.length&&(r=r.concat(n.descendants));return r}}]),t}();function mh(t,e,n){return(mh=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&xh(i,n.prototype),i}).apply(null,arguments)}function xh(t,e){return(xh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var wh=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.x,r=void 0===n?0:n,i=e.y,o=void 0===i?0:i,a=e.width,s=void 0===a?0:a,c=e.height,u=void 0===c?0:c,l=e.minWidth,h=void 0===l?0:l,f=e.minHeight,d=void 0===f?0:f;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.set({x:r,y:o,width:s,height:u,minWidth:h,minHeight:d})}return function(t,e,n){e&&bh(t.prototype,e),n&&bh(t,n)}(t,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.x,n=void 0===e?0:e,r=t.y,i=void 0===r?0:r,o=t.width,a=void 0===o?0:o,s=t.height,c=void 0===s?0:s,u=t.minWidth,l=void 0===u?0:u,h=t.minHeight,f=void 0===h?0:h;this.type="rect",a>=0?(this.x=n,this.width=Math.max(a,l)):(this.x=n+Math.min(a,-l),this.width=-Math.min(a,-l)),c>=0?(this.y=i,this.height=Math.max(c,f)):(this.y=i+Math.min(c,-f),this.height=-Math.min(c,-f))}},{key:"containsPoint",value:function(t){return Cs.testRectPoint(this,t)}},{key:"intersectsLine",value:function(t){var e=R(t);return Cs.testRectLine(this,e)}},{key:"intersectsRect",value:function(t){var e=S(t);return Cs.testRectRect(this,e)}},{key:"intersectsCircle",value:function(t){return Cs.testCircleRect(t,this)}},{key:"intersectsPolygon",value:function(t){return Cs.testPolygonRect(t,this)}},{key:"points",value:function(){return[{x:this.x,y:this.y},{x:this.x+this.width,y:this.y},{x:this.x+this.width,y:this.y+this.height},{x:this.x,y:this.y+this.height}]}}]),t}();function _h(t,e,n){return(_h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&kh(i,n.prototype),i}).apply(null,arguments)}function kh(t,e){return(kh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Sh=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.cx,r=void 0===n?0:n,i=e.cy,o=void 0===i?0:i,a=e.r,s=void 0===a?0:a,c=e.minRadius,u=void 0===c?0:c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.set({cx:r,cy:o,r:s,minRadius:u})}return function(t,e,n){e&&Mh(t.prototype,e),n&&Mh(t,n)}(t,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.cx,n=void 0===e?0:e,r=t.cy,i=void 0===r?0:r,o=t.r,a=void 0===o?0:o,s=t.minRadius,c=void 0===s?0:s;this.type="circle",this.cx=n,this.cy=i,this.r=Math.max(a,c),this.vector={x:this.cx,y:this.cy}}},{key:"containsPoint",value:function(t){return Cs.testCirclePoint(this,t)}},{key:"intersectsLine",value:function(t){var e=R(t);return Cs.testCircleLine(this,e)}},{key:"intersectsRect",value:function(t){var e=S(t);return Cs.testCircleRect(this,e)}},{key:"intersectsCircle",value:function(t){return Cs.testCircleCircle(this,t)}},{key:"intersectsPolygon",value:function(t){return Cs.testCirclePolygon(this,t)}},{key:"points",value:function(){return[{x:this.cx,y:this.cy}]}}]),t}();function Rh(t,e,n){return(Rh=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&Ah(i,n.prototype),i}).apply(null,arguments)}function Ah(t,e){return(Ah=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Oh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var jh=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.x1,r=void 0===n?0:n,i=e.y1,o=void 0===i?0:i,a=e.x2,s=void 0===a?0:a,c=e.y2,u=void 0===c?0:c,l=e.tolerance,h=void 0===l?0:l;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.set({x1:r,y1:o,x2:s,y2:u,tolerance:h})}return function(t,e,n){e&&Oh(t.prototype,e),n&&Oh(t,n)}(t,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.x1,n=void 0===e?0:e,r=t.y1,i=void 0===r?0:r,o=t.x2,a=void 0===o?0:o,s=t.y2,c=void 0===s?0:s,u=t.tolerance,l=void 0===u?0:u;this.type="line",this.x1=n,this.y1=i,this.x2=a,this.y2=c,this.tolerance=Math.max(0,Math.round(l)),this.vectors=this.points(),this.zeroSize=n===a&&i===c}},{key:"containsPoint",value:function(t){if(this.tolerance>0){var e={cx:t.x,cy:t.y,r:this.tolerance};return Cs.testCircleLine(e,this)}return Cs.testLinePoint(this,t)}},{key:"intersectsLine",value:function(t){var e=R(t);return Cs.testLineLine(this,e)}},{key:"intersectsRect",value:function(t){var e=S(t);return Cs.testRectLine(e,this)}},{key:"intersectsCircle",value:function(t){return Cs.testCircleLine(t,this)}},{key:"intersectsPolygon",value:function(t){return Cs.testPolygonLine(t,this)}},{key:"points",value:function(){return[{x:this.x1,y:this.y1},{x:this.x2,y:this.y2}]}}]),t}();function zh(t,e,n){return(zh=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&Th(i,n.prototype),i}).apply(null,arguments)}function Th(t,e){return(Th=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Eh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Nh=function(){function t(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).vertices,n=void 0===e?[]:e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.set({vertices:n})}return function(t,e,n){e&&Eh(t.prototype,e),n&&Eh(t,n)}(t,[{key:"set",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).vertices,e=void 0===t?[]:t;if(this.type="polygon",this.vertices=e.slice(),this.edges=[],function(t){for(var e=0;e<t.length-1;e++){var n=t[e],r=t[e+1];n.x===r.x&&n.y===r.y&&(t.splice(e,1),e--)}}(this.vertices),!(this.vertices.length<=2)){!function(t){var e=t[0],n=t[t.length-1];e.x===n.x&&e.y===n.y||t.push(e)}(this.vertices),this.xMin=NaN,this.yMin=NaN,this.xMax=NaN,this.yMax=NaN;for(var n=0;n<this.vertices.length;n++)n<this.vertices.length-1&&this.edges.push([this.vertices[n],this.vertices[n+1]]),this.xMin=isNaN(this.xMin)?this.vertices[n].x:Math.min(this.xMin,this.vertices[n].x),this.xMax=isNaN(this.xMax)?this.vertices[n].x:Math.max(this.xMax,this.vertices[n].x),this.yMin=isNaN(this.yMin)?this.vertices[n].y:Math.min(this.yMin,this.vertices[n].y),this.yMax=isNaN(this.yMax)?this.vertices[n].y:Math.max(this.yMax,this.vertices[n].y);this._bounds=null,this._boundingRect=null}}},{key:"containsPoint",value:function(t){return Cs.testPolygonPoint(this,t)}},{key:"intersectsCircle",value:function(t){return Cs.testCirclePolygon(t,this)}},{key:"intersectsLine",value:function(t){return Cs.testPolygonLine(this,R(t))}},{key:"intersectsRect",value:function(t){return Cs.testPolygonRect(this,S(t))}},{key:"intersectsPolygon",value:function(t){if(!Cs.testRectRect(this.boundingRect(),t.boundingRect()))return!1;for(var e=!1,n=0,r=this.edges.length;n<r&&!0!==(e=Cs.testPolygonLine(t,R(this.edges[n])));n++);return e}},{key:"points",value:function(){return this.vertices}},{key:"bounds",value:function(){return this._bounds||(this._bounds=[{x:this.xMin,y:this.yMin},{x:this.xMax,y:this.yMin},{x:this.xMax,y:this.yMax},{x:this.xMin,y:this.yMax}]),this._bounds}},{key:"boundingRect",value:function(){return this._boundingRect||(this._boundingRect={x:this.xMin,y:this.yMin,width:this.xMax-this.xMin,height:this.yMax-this.yMin}),this._boundingRect}}]),t}();function Ph(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return zh(Nh,e)}function Ch(t,e,n){return(Ch=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&Fh(i,n.prototype),i}).apply(null,arguments)}function Fh(t,e){return(Fh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Dh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lh(t,e){return t.x!==e.x||t.y!==e.y}var Ih=function(){function t(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).points,n=void 0===e?[]:e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.set({points:n})}return function(t,e,n){e&&Dh(t.prototype,e),n&&Dh(t,n)}(t,[{key:"set",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).points,e=void 0===t?[]:t;if(this.type="polyline",this.segments=[],this._points=e.slice(),this._points.length>1)for(var n=0,r=this._points.length-1;n<r;n++)Lh(this._points[n],this._points[n+1])&&this.segments.push({x1:this._points[n].x,y1:this._points[n].y,x2:this._points[n+1].x,y2:this._points[n+1].y})}},{key:"containsPoint",value:function(t){return this.segments.some(function(e){return Cs.testLinePoint(e,t)})}},{key:"intersectsCircle",value:function(t){return this.segments.some(function(e){return Cs.testCircleLine(t,e)})}},{key:"intersectsLine",value:function(t){var e=R(t);return this.segments.some(function(t){return Cs.testLineLine(t,e)})}},{key:"intersectsRect",value:function(t){var e=S(t);return this.segments.some(function(t){return Cs.testRectLine(e,t)})}},{key:"intersectsPolygon",value:function(t){return this.segments.some(function(e){return Cs.testPolygonLine(t,e)})}},{key:"points",value:function(){return this._points}}]),t}();var Bh=ie();function Wh(t,e){return Bh.get(t)(e)}function $h(t,e,n){return($h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&qh(i,n.prototype),i}).apply(null,arguments)}function qh(t,e){return(qh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Bh.add("rect",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return mh(wh,e)}),Bh.add("circle",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return _h(Sh,e)}),Bh.add("line",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Rh(jh,e)}),Bh.add("polygon",Ph),Bh.add("polyline",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Ch(Ih,e)});var Yh=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.set(e)}return function(t,e,n){e&&Vh(t.prototype,e),n&&Vh(t,n)}(t,[{key:"set",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.geometries=[],e.forEach(function(e){var n=Wh(e.type,e);n&&t.geometries.push(n)})}},{key:"containsPoint",value:function(t){return this.geometries.some(function(e){return e.containsPoint(t)})}},{key:"intersectsLine",value:function(t){return this.geometries.some(function(e){return e.intersectsLine(t)})}},{key:"intersectsRect",value:function(t){return this.geometries.some(function(e){return e.intersectsRect(t)})}},{key:"intersectsCircle",value:function(t){return this.geometries.some(function(e){return e.intersectsCircle(t)})}},{key:"intersectsPolygon",value:function(t){return this.geometries.some(function(e){return e.intersectsPolygon(t)})}}]),t}();function Uh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Hh=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._elements=[[1,0,0],[0,1,0],[0,0,1]],this._stack=[]}return function(t,e,n){e&&Uh(t.prototype,e),n&&Uh(t,n)}(t,[{key:"clone",value:function(){return(new t).multiply(this)}},{key:"set",value:function(t){return this._elements=t,this}},{key:"save",value:function(){return this._stack.push(this.elements),this}},{key:"restore",value:function(){return this._stack.length&&(this._elements=this._stack.pop()),this}},{key:"add",value:function(t){var e,n;for(e=0;e<this._elements.length;e++)for(n=0;n<this._elements[e].length;n++)this._elements[e][n]+=t;return this}},{key:"translate",value:function(t,e){return this.multiply([[1,0,t],[0,1,e],[0,0,1]]),this}},{key:"rotate",value:function(t){var e=Math.cos(-t),n=Math.sin(-t);return this.multiply([[e,n,0],[-n,e,0],[0,0,1]]),this}},{key:"multiply",value:function(e){var n,r,i,o;if(e instanceof t&&(e=e._elements),Array.isArray(e)){for(i=[[0,0,0],[0,0,0],[0,0,0]],n=0;n<this._elements.length;n++)for(r=0;r<this._elements[n].length;r++)for(o=0;o<3;o++)i[n][r]+=this._elements[n][o]*e[o][r];this._elements=i}else for(n=0;n<this._elements.length;n++)for(r=0;r<this._elements[n].length;r++)this._elements[n][r]*=e;return this}},{key:"scale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return this.multiply([[t,0,0],[0,e,0],[0,0,1]]),this}},{key:"transform",value:function(t,e,n,r,i,o){return this.multiply([[t,n,i],[e,r,o],[0,0,1]]),this}},{key:"determinant",value:function(){var t=this._elements[0][0],e=this._elements[0][1],n=this._elements[0][2],r=this._elements[1][0],i=this._elements[1][1],o=this._elements[1][2],a=this._elements[2][0],s=this._elements[2][1],c=this._elements[2][2];return t*i*c+e*o*a+n*r*s-n*i*a-e*r*c-t*o*s}},{key:"invert",value:function(){var t=this.determinant(),e=this._elements[0][0],n=this._elements[0][1],r=this._elements[0][2],i=this._elements[1][0],o=this._elements[1][1],a=this._elements[1][2],s=this._elements[2][0],c=this._elements[2][1],u=this._elements[2][2];return this._elements=[[o*u-a*c,r*c-n*u,n*a-r*o],[a*s-i*u,e*u-r*s,r*i-e*a],[i*c-o*s,s*n-e*c,e*o-n*i]],this.multiply(1/t),this}},{key:"transpose",value:function(){var t=Object.create(this._elements);return this._elements=[[t[0][0],t[1][0],t[2][0]],[t[0][1],t[1][1],t[2][1]],[t[0][2],t[1][2],t[2][2]]],this}},{key:"identity",value:function(){return this._elements=[[1,0,0],[0,1,0],[0,0,1]],this}},{key:"toString",value:function(){return"".concat(this._elements.map(function(t){return t.join("\t")}).join("\n"))}},{key:"isIdentity",value:function(){var t=this._elements;return 1===t[0][0]&&0===t[0][1]&&0===t[0][2]&&0===t[1][0]&&1===t[1][1]&&0===t[1][2]&&0===t[2][0]&&0===t[2][1]&&1===t[2][2]}},{key:"transformPoint",value:function(t){var e,n,r=[t.x,t.y,1],i=this._elements,o=[0,0,0];for(e=0;e<this._elements.length;e++)for(n=0;n<this._elements[e].length;n++)o[e]+=r[n]*i[e][n];return{x:o[0],y:o[1]}}},{key:"transformPoints",value:function(t){var e,n,r,i,o,a=this._elements,s=[];for(i=0;i<t.length;i++){for(e=[t[i].x,t[i].y,1],o=[0,0,0],n=0;n<this._elements.length;n++)for(r=0;r<this._elements[n].length;r++)o[n]+=e[r]*a[n][r];s.push({x:o[0],y:o[1]})}return s}},{key:"elements",get:function(){var t=this._elements;return[[t[0][0],t[0][1],t[0][2]],[t[1][0],t[1][1],t[1][2]],[t[2][0],t[2][1],t[2][2]]]}}]),t}();function Xh(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Zh=/(translate|scale|rotate|matrix)\(([0-9,.eE+-\s]+)(?:,|\s?)+\)/g;function Gh(t,e){var n=e.args[0]*(Math.PI/180);if(e.args.length>2){var r=e.args[1],i=e.args[2];t.translate(r,i),t.rotate(n),t.translate(-r,-i)}else 1===e.args.length&&t.rotate(n)}function Jh(t,e){var n=e.args[0],r=isNaN(e.args[1])?e.args[0]:e.args[1];t.scale(n,r)}function Qh(t,e){var n=e.args[0],r=isNaN(e.args[1])?0:e.args[1];t.translate(n,r)}function Kh(t,e){e.args.length>=6&&t.transform.apply(t,Xh(e.args))}function tf(t,e){for(var n,r=function(t){for(var e,n=[];null!==(e=Zh.exec(t));){var r=e[2].trim(),i=-1===r.indexOf(",")?r.split(" "):r.split(",");n.push({cmd:e[1],args:i.filter(function(t){return t.trim().length>0}).map(function(t){return Number(t)})})}return n}(t),i=0,o=r.length;i<o;i++)"rotate"===(n=r[i]).cmd?Gh(e,n):"scale"===n.cmd?Jh(e,n):"matrix"===n.cmd?Kh(e,n):"translate"===n.cmd&&Qh(e,n)}var ef={type:/^\w[\w-]+/,attr:/^\[\w(?:[\w\._-]+)?(?:[!]?=['\"][\w\s*#_-]*['\"])?\]/,universal:/^(\*)/,tag:/^\.(\w+)/},nf={type:function(t,e){return e.filter(function(e){var n=e.type;return!!n&&n.toLowerCase()===t.toLowerCase()})},attr:function(t,e,n,r){return r.filter(function(r){var i=r.attrs[t];if(!e)return void 0!==i;if(void 0===i)return!1;switch(e){case"=":return n===String(i);case"!=":return n!==String(i);default:return!1}})},universal:function(t){return t},tag:function(t,e){return e.filter(function(e){var n=e.tag;return!!n&&-1!==n.indexOf(t.replace(".",""))})}};var rf={find:function(t,e){var n,r,i=[],o=[];if(e.isBranch){var a;n=function(t){var e,n,r,i,o=[];return t.split(/\s*,\s*/).forEach(function(t){t=t.trim(),e=[];for(var a=function(o){(r=t.match(ef[o]))&&(i=!0,t=t.slice(r[0].length),n={type:o,value:r[0]},"attr"===o&&(r=r[0].match(/\[(\w[\w\._-]+)?(?:([!]?=)['\"]([\w\s#_-]*)['\"])?\]/),n.attribute=r[1],n.operator=r[2],n.attributeValue=r[3]),e.push(n))};t&&(i=!1,(r=t.match(/^\s*([>+~]|\s)\s*/))&&(i=!0,e.push({type:" ",value:r[0]}),t=t.slice(r[0].length)),Object.keys(ef).forEach(a),e&&e.length&&o.indexOf(e)<0&&o.push(e),i););}),o}(t),r=e.descendants;for(var s=function(t,e){a=n[t];var i=[],s=r.slice(),c=!1;a.reverse().forEach(function(t){if(" "===t.type)return i.push(s),s=r.slice(),void(c=!1);s=function(t,e){if(!e||!e.length||!t||"function"!=typeof nf[t.type])return[];switch(t.type){case"type":return nf[t.type](t.value,e);case"attr":return nf[t.type](t.attribute,t.operator,t.attributeValue,e);case"universal":return nf[t.type](e);case"tag":return nf[t.type](t.value,e);default:return[]}}(t,s),c=!0}),c&&i.push(s);var u=i[0].filter(function(t){for(var e,n=t.parent,r=1;r<i.length;r++){for(e=i[r].indexOf(n);n&&e<0;)n=n.parent,e=i[r].indexOf(n);if(e<0)return!1}return!0});o.push(u)},c=0,u=n.length;c<u;c++)s(c);for(var l=0,h=o.length;l<h;l++)for(var f=0,d=o[l].length;f<d;f++)i.indexOf(o[l][f])<0&&i.push(o[l][f])}return i||[]}};function of(t,e,n){return(of=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&af(i,n.prototype),i}).apply(null,arguments)}function af(t,e){return(af=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function sf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cf(t,e,n){var r=t.type,i=n?n.transformPoints(t.points()):t.points();!function(t,e){for(var n=0,r=t.length;n<r;n++)t[n].x/=e,t[n].y/=e}(i,e);var o=null;if("rect"===r||"bounds"===r)(o=S(i)).type=r;else if("circle"===r)(o=function(t,e){return{cx:t[0].x,cy:t[0].y,r:e}}(i,t.r)).type=r;else if("line"===r)(o=R(i)).type=r;else if("polygon"===r||"polyline"===r){o={type:"path",d:Mc(i,"polygon"===r)}}return o}var uf=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._bounds=e.boundingRect?function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e.boundingRect(t)}:function(){return{x:0,y:0,width:0,height:0}},this._attrs=e.attrs,this._type=e.type,this._data=e.data,this._dpi=e.stage?e.stage.dpi:1,this._collider=function(){return function(t,e){var n=t.collider();if(n&&n.fn){var r=t.modelViewMatrix;return"collection"===n.type?{type:"container",children:n.fn.geometries.map(function(t){return cf(t,e,r)})}:cf(n.fn,e,r)}return null}(e,n._dpi)},this._desc=e.desc,this._tag=e.tag}return function(t,e,n){e&&sf(t.prototype,e),n&&sf(t,n)}(t,[{key:"type",get:function(){return this._type}},{key:"data",get:function(){return this._data}},{key:"attrs",get:function(){return this._attrs}},{key:"element",set:function(t){this._element=t},get:function(){return this._element}},{key:"key",set:function(t){this._key=t},get:function(){return this._key}},{key:"bounds",get:function(){var t=this._bounds();return t.x/=this._dpi,t.y/=this._dpi,t.width/=this._dpi,t.height/=this._dpi,t}},{key:"localBounds",get:function(){return this._bounds(!1)}},{key:"collider",get:function(){return this._collider()}},{key:"desc",get:function(){return this._desc}},{key:"tag",get:function(){return this._tag}}]),t}();function lf(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return of(uf,e)}function hf(t,e,n){return(hf=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&ff(i,n.prototype),i}).apply(null,arguments)}function ff(t,e){return(ff=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function df(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var yf=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._node=lf(e),this._parent=null,this._input=null}return function(t,e,n){e&&df(t.prototype,e),n&&df(t,n)}(t,[{key:"node",get:function(){return this._node}},{key:"parent",set:function(t){this._parent=t},get:function(){return this._parent}},{key:"input",set:function(t){this._input=t},get:function(){return this._input}}]),t}();function pf(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return hf(yf,e)}function gf(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function vf(t,e){var n=t.parent;if(n&&"stage"!==n.type){e.parent=pf(n);var r=n.parent;r&&"stage"!==r.type&&vf(r,e.parent)}}function mf(t,e,n){var r=t._collider;if(null===r)return null;var i=function(t,e){var n={};if(t.modelViewMatrix)if(Array.isArray(e))n=t.inverseModelViewMatrix.transformPoints(e);else if(isNaN(e.r))Array.isArray(e.vertices)?n.vertices=t.inverseModelViewMatrix.transformPoints(e.vertices):n=t.inverseModelViewMatrix.transformPoint(e);else{var r={x:e.cx,y:e.cy},i=t.inverseModelViewMatrix.transformPoint(r);n.cx=i.x,n.cy=i.y,n.r=e.r}else n=e;return Array.isArray(n.vertices)&&(n=Ph(n)),n}(t,n);return"frontChild"===r.type?function(t,e,n){for(var r=t.descendants.length-1;r>=0;r--){var i=t.descendants[r],o=i._collider;if(o&&o.fn[e](n)){var a=pf(i);return vf(i,a),a}}return null}(t,e,i):function(t,e,n){if(t._collider.fn[e](n)){var r=pf(t);return vf(t,r),r}return null}(t,e,i)}function xf(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n={};switch(A(t)){case"circle":return n.cx=t.cx*e,n.cy=t.cy*e,n.r=t.r,["intersectsCircle",n];case"rect":return["intersectsRect",n=M(t).map(function(t){return ms(t,e)})];case"line":return["intersectsLine",n=k(t).map(function(t){return ms(t,e)})];case"point":return["containsPoint",n=ms(t,e)];case"polygon":return n.vertices=t.vertices.map(function(t){return ms(t,e)}),["intersectsPolygon",n];default:return[]}}function bf(t,e){var n=gf(xf(e,t.dpi),2),r=n[0],i=n[1],o=[];return r&&(function t(e,n,r,i){for(var o=e.length,a=0;a<o;a++){var s=e[a],c=mf(s,n,i);c&&r.push(c),!s.children||c||s._collider||t(s.children,n,r,i)}}([t],r,o,i),function(t,e){for(var n=0,r=e.length;n<r;n++)e[n].input=t}(e,o)),o}function wf(t,e){var n=gf(xf(e,t.dpi),2);return function t(e,n,r){for(var i=e.length,o=0;o<i;o++){var a=e[o];if(null!==mf(a,n,r))return!0;if(a.children&&!a._collider)return t(a.children,n,r)}return!1}([t],n[0],n[1])}function _f(t){return(_f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mf(t,e){return!e||"object"!==_f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Sf(t,e,n){return(Sf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Rf(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Rf(t){return(Rf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Af(t,e){return(Af=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Of=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Mf(this,Rf(e).call(this,t)))._stage=null,n._collider=null,n._attrs={},n._node=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Af(t,e)}(e,vh),function(t,e,n){e&&kf(t.prototype,e),n&&kf(t,n)}(e,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.node=t;var e=t.data,n=t.desc,r=t.tag;!function(t,e){Object.keys(kc).forEach(function(n){var r=e[n];if(void 0!==r){var i=kc[n];t[i]=r}})}(this.attrs,t),void 0!==e&&(this.data=e),"object"===_f(n)&&(this.desc=d()(!0,{},n)),"string"==typeof r&&(this.tag=r)}},{key:"collider",value:function(t){if(void 0===t)return this._collider;if(Array.isArray(t))return this._collider={fn:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return $h(Yh,e)}(t),type:"collection"},this._collider;var e=t.type,n=void 0===e?null:e,r={type:n};return n?this._collider&&this._collider.type===n?this._collider.fn.set(t):"frontChild"===n?this._collider=r:"bounds"===n?(r.fn=Wh("rect",this.boundingRect()),this._collider=r):-1!==["line","rect","circle","polygon","polyline"].indexOf(n)&&(r.fn=Wh(n,t),this._collider=r):this._collider=null,this._collider}},{key:"findShapes",value:function(t){return rf.find(t,this).map(function(t){return lf(t)})}},{key:"getItemsFrom",value:function(t){return bf(this,t)}},{key:"containsPoint",value:function(t){return wf(this,t)}},{key:"intersectsLine",value:function(t){return wf(this,t)}},{key:"intersectsRect",value:function(t){return wf(this,t)}},{key:"intersectsCircle",value:function(t){return wf(this,t)}},{key:"intersectsPolygon",value:function(t){return wf(this,t)}},{key:"resolveLocalTransform",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Hh;void 0!==this.attrs.transform&&tf(this.attrs.transform,t),this.modelViewMatrix=t.clone()}},{key:"resolveGlobalTransform",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Hh,e=this.ancestors;if(e.length>0)for(var n=e.length-1;n>=0;n--)e[n].resolveLocalTransform(t),t=e[n].modelViewMatrix;this.resolveLocalTransform(t)}},{key:"attr",value:function(t){return this.attrs[t]}},{key:"equals",value:function(t){var n=this.attrs,r=Object.keys(n),i=t.attrs,o=Object.keys(i);if(r.length!==o.length)return!1;for(var a=0;a<r.length;a++){var s=r[a];if(!Object.hasOwnProperty.call(i,s))return!1;if(n[s]!==i[s])return!1}return Sf(Rf(e.prototype),"equals",this).call(this,t)}},{key:"toJSON",value:function(){var t=Sf(Rf(e.prototype),"toJSON",this).call(this);return t.attrs=this.attrs,t}},{key:"attrs",get:function(){return this._attrs}},{key:"stage",get:function(){return this._parent&&!this._stage?this._stage=this._parent.stage:this._parent||this._stage===this||(this._stage=null),this._stage}},{key:"modelViewMatrix",set:function(t){this._mvm=t,this._imvm=null},get:function(){return this._mvm}},{key:"inverseModelViewMatrix",get:function(){return this._imvm=this._imvm?this._imvm:this._mvm.clone().invert(),this._imvm}},{key:"node",set:function(t){this._node=t},get:function(){return this._node}}]),e}();function jf(t){return(jf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tf(t,e){return!e||"object"!==jf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ef(t){return(Ef=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nf(t,e){return(Nf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pf=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Tf(this,Ef(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nf(t,e)}(e,vh),function(t,e,n){e&&zf(t.prototype,e),n&&zf(t,n)}(e,[{key:"addChild",value:function(t){if(!(t&&t instanceof vh))throw new TypeError("Expecting a Node as argument, but got ".concat(t));if(t===this)throw new Error("Can not add itself as child!");if(t._children&&t._children.length&&this.ancestors.indexOf(t)>=0)throw new Error("Can not add an ancestor as child!");t._parent&&t._parent!==this&&t._parent.removeChild(t);var e=this._children.indexOf(t);return e>=0&&this._children.splice(e,1),this._children.push(t),t._parent=this,t._ancestors=null,this}},{key:"addChildren",value:function(t){var e,n=t?t.length:0;for(e=0;e<n;e++)this.addChild(t[e]);return this}},{key:"removeChild",value:function(t){var e=this._children.indexOf(t);return e>=0&&(this._children.splice(e,1),t._parent=null,t._ancestors=null),this}},{key:"removeChildren",value:function(t){var e,n;if(!this._children)return this;if(t)for(n=t.length,e=0;e<n;e++)this.removeChild(t[e]);else for(;this._children.length;)this.removeChild(this._children[0]);return this}}]),e}();function Cf(t,e,n){return(Cf=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&Wf(i,n.prototype),i}).apply(null,arguments)}function Ff(t){return(Ff="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Df(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lf(t,e){return!e||"object"!==Ff(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function If(t,e,n){return(If="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Bf(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Bf(t){return(Bf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wf(t,e){return(Wf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var qf=Pf.prototype;function Vf(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0!==e.bounds){var r=$f(e.bounds(n),3),i=r[0],o=r[2],a=i.x,s=i.y,c=o.x,u=o.y,l=isNaN(t._boundingRect.width)?c:Math.max(c,t._boundingRect.width+t._boundingRect.x),h=isNaN(t._boundingRect.height)?u:Math.max(u,t._boundingRect.height+t._boundingRect.y);t._boundingRect.x=isNaN(t._boundingRect.x)?a:Math.min(a,t._boundingRect.x),t._boundingRect.y=isNaN(t._boundingRect.y)?s:Math.min(s,t._boundingRect.y),t._boundingRect.width=l-t._boundingRect.x,t._boundingRect.height=h-t._boundingRect.y}}var Yf=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=n.type,i=void 0===r?"container":r;return(t=Lf(this,Bf(e).call(this,i))).set(n),t._boundingRect={},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wf(t,e)}(e,Of),function(t,e,n){e&&Df(t.prototype,e),n&&Df(t,n)}(e,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};If(Bf(e.prototype),"set",this).call(this,t);var n=t.collider,r=d()({type:null},n);If(Bf(e.prototype),"collider",this).call(this,r)}},{key:"boundingRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.children.length;this._boundingRect={};for(var n=0;n<e;n++)Vf(this,this.children[n],t);return d()({x:0,y:0,width:0,height:0},this._boundingRect)}},{key:"bounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.boundingRect(t);return[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}]}},{key:"addChild",value:function(t){var n=qf.addChild.call(this,t);if(this._collider&&"bounds"===this._collider.type){Vf(this,t,!0);var r=d()({type:"bounds",x:0,y:0,width:0,height:0},this._boundingRect);If(Bf(e.prototype),"collider",this).call(this,r)}return n}},{key:"addChildren",value:function(t){var n=qf.addChildren.call(this,t),r=t.length;if(this._collider&&"bounds"===this._collider.type&&r>0){for(var i=0;i<r;i++)Vf(this,t[i],!0);var o=d()({type:"bounds",x:0,y:0,width:0,height:0},this._boundingRect);If(Bf(e.prototype),"collider",this).call(this,o)}return n}},{key:"removeChild",value:function(t){t._stage=null;var n,r=t.descendants,i=r?r.length:0;for(n=0;n<i;n++)r[n]._stage=null;if(qf.removeChild.call(this,t),this._collider&&"bounds"===this._collider.type){var o=d()(this.boundingRect(!0),{type:"bounds"});If(Bf(e.prototype),"collider",this).call(this,o)}return this}},{key:"removeChildren",value:function(t){if(qf.removeChildren.call(this,t),this._collider&&"bounds"===this._collider.type){var n=d()(this.boundingRect(!0),{type:"bounds"});If(Bf(e.prototype),"collider",this).call(this,n)}return this}}]),e}();function Uf(t,e,n){return(Uf=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&Gf(i,n.prototype),i}).apply(null,arguments)}function Hf(t){return(Hf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zf(t){return(Zf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gf(t,e){return(Gf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Jf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Qf=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==Hf(e)&&"function"!=typeof e?Jf(t):e}(this,Zf(e).call(this,"stage")))._stage=Jf(Jf(n)),n._dpiRatio=t||1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gf(t,e)}(e,Yf),function(t,e,n){e&&Xf(t.prototype,e),n&&Xf(t,n)}(e,[{key:"dpi",get:function(){return this._dpiRatio}}]),e}();function Kf(t,e,n){return(Kf=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&od(i,n.prototype),i}).apply(null,arguments)}function td(t){return(td="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ed(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nd(t,e){return!e||"object"!==td(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rd(t,e,n){return(rd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=id(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function id(t){return(id=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function od(t,e){return(od=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ad=Pf.prototype,sd=["x1","x2","y1","y2","id","offset","style"],cd=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=n.type,i=void 0===r?"container":r;return(t=nd(this,id(e).call(this,i))).set(n),t._boundingRect={},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&od(t,e)}(e,Of),function(t,e,n){e&&ed(t.prototype,e),n&&ed(t,n)}(e,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};rd(id(e.prototype),"set",this).call(this,t);for(var n=this.attrs,r="",i=0,o=sd.length;i!==o;i++)t[r=sd[i]]&&(n[r]=t[r])}},{key:"addChild",value:function(t){return ad.addChild.call(this,t)}},{key:"addChildren",value:function(t){return ad.addChildren.call(this,t)}},{key:"removeChild",value:function(t){t._stage=null;var e,n=t.descendants,r=n?n.length:0;for(e=0;e<r;e++)n[e]._stage=null;return ad.removeChild.call(this,t),this}},{key:"removeChildren",value:function(t){return ad.removeChildren.call(this,t),this}}]),e}();function ud(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Kf(cd,e)}function ld(t,e,n){return(ld=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&vd(i,n.prototype),i}).apply(null,arguments)}function hd(t){return(hd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fd(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function dd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yd(t,e){return!e||"object"!==hd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pd(t,e,n){return(pd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gd(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function gd(t){return(gd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vd(t,e){return(vd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var md=function(t){function e(){var t,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=n=yd(this,gd(e).call(this,"rect"))).set.apply(t,arguments),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vd(t,e)}(e,Of),function(t,e,n){e&&dd(t.prototype,e),n&&dd(t,n)}(e,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.x,r=void 0===n?0:n,i=t.y,o=void 0===i?0:i,a=t.width,s=void 0===a?0:a,c=t.height,u=void 0===c?0:c,l=t.collider,h=d()({type:"rect",x:r,y:o,width:s,height:u},l);pd(gd(e.prototype),"set",this).call(this,t),s>=0?(this.attrs.x=r,this.attrs.width=s):(this.attrs.x=r+s,this.attrs.width=-s),u>=0?(this.attrs.y=o,this.attrs.height=u):(this.attrs.y=o+u,this.attrs.height=-u),pd(gd(e.prototype),"collider",this).call(this,h)}},{key:"boundingRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=M(this.attrs),n=fd(_(t&&this.modelViewMatrix?this.modelViewMatrix.transformPoints(e):e),4),r=n[0],i=n[1];return{x:r,y:i,width:n[2]-r,height:n[3]-i}}},{key:"bounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.boundingRect(t);return[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}]}}]),e}();function xd(t,e,n){return(xd=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&Rd(i,n.prototype),i}).apply(null,arguments)}function bd(t){return(bd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wd(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function kd(t,e){return!e||"object"!==bd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Md(t,e,n){return(Md="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Sd(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Sd(t){return(Sd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rd(t,e){return(Rd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ad=function(t){function e(){var t,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=n=kd(this,Sd(e).call(this,"circle"))).set.apply(t,arguments),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rd(t,e)}(e,Of),function(t,e,n){e&&_d(t.prototype,e),n&&_d(t,n)}(e,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.cx,r=void 0===n?0:n,i=t.cy,o=void 0===i?0:i,a=t.r,s=void 0===a?0:a,c=t.collider,u=d()({type:"circle",cx:r,cy:o,r:s},c);Md(Sd(e.prototype),"set",this).call(this,t),this.attrs.cx=r,this.attrs.cy=o,this.attrs.r=s,Md(Sd(e.prototype),"collider",this).call(this,u)}},{key:"boundingRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.bounds(t);return{x:e[0].x,y:e[0].y,width:e[2].x-e[0].x,height:e[2].y-e[0].y}}},{key:"bounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.attrs,n=e.cx,r=e.cy,i=e.r,o=e.r,a=n-i,s=r-o,c=2*i,u=2*o,l=[{x:a,y:s},{x:a+c,y:s},{x:a+c,y:s+u},{x:a,y:s+u}];if(t&&this.modelViewMatrix){var h=wd(_(l=this.modelViewMatrix.transformPoints(l)),4),f=h[0],d=h[1],y=h[2],p=h[3];return[{x:f,y:d},{x:f+(c=y-f),y:d},{x:f+c,y:d+(u=p-d)},{x:f,y:d+u}]}return l}}]),e}();function Od(t,e,n){return(Od=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&Cd(i,n.prototype),i}).apply(null,arguments)}function jd(t){return(jd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zd(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Td(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ed(t,e){return!e||"object"!==jd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nd(t,e,n){return(Nd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Pd(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Pd(t){return(Pd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cd(t,e){return(Cd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Fd=function(t){function e(){var t,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=n=Ed(this,Pd(e).call(this,"line"))).set.apply(t,arguments),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cd(t,e)}(e,Of),function(t,e,n){e&&Td(t.prototype,e),n&&Td(t,n)}(e,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.x1,r=void 0===n?0:n,i=t.y1,o=void 0===i?0:i,a=t.x2,s=void 0===a?0:a,c=t.y2,u=void 0===c?0:c,l=t.collider;Nd(Pd(e.prototype),"set",this).call(this,t),this.attrs.x1=r,this.attrs.y1=o,this.attrs.x2=s,this.attrs.y2=u;var h={type:"line",x1:r,y1:o,x2:s,y2:u};Nd(Pd(e.prototype),"collider",this).call(this,d()(h,l))}},{key:"boundingRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=k(this.attrs);t&&this.modelViewMatrix&&(e=this.modelViewMatrix.transformPoints(e));var n=zd(_(e),4),r=n[0],i=n[1],o=n[2],a=n[3],s=r!==o||i!==a;return{x:r,y:i,width:s?Math.max(1,o-r):0,height:s?Math.max(1,a-i):0}}},{key:"bounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.boundingRect(t);return[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}]}}]),e}();var Dd=2*Math.PI;function Ld(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function Id(t,e,n,r,i){var o=1-t;return Math.pow(o,3)*e+3*Math.pow(o,2)*t*n+3*o*Math.pow(t,2)*r+Math.pow(t,3)*i}function Bd(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(function(t,e,n,r){return Math.abs(t.x+n.x-(e.x+e.x))+Math.abs(t.y+n.y-(e.y+e.y))+Math.abs(e.x+r.x-(n.x+n.x))+Math.abs(e.y+r.y-(n.y+n.y))}(t,e,n,r)<=10)return-1===i.indexOf(t)&&i.push(t),-1===i.indexOf(r)&&i.push(r),i;var o=Ld(t,e),a=Ld(e,n),s=Ld(n,r),c={x:Id(.5,t.x,e.x,n.x,r.x),y:Id(.5,t.y,e.y,n.y,r.y)},u=Ld(o,a),l=Ld(a,s);return Bd(t,o,u,c,i),Bd(c,l,s,r,i),i}function Wd(t,e,n){var r=function(t,e,n){return{cp1:{x:t.x+2/3*(e.x-t.x),y:t.y+2/3*(e.y-t.y)},cp2:{x:n.x+2/3*(e.x-n.x),y:n.y+2/3*(e.y-n.y)}}}(t,e,n);return Bd(t,r.cp1,r.cp2,n)}function $d(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function qd(t,e,n){var r,i,o,a,s=[],c=!!t[4],u=!!t[5],l=t[3],h=t[6],f=t[7],d=t[1],y=t[2];if("a"===t[0]&&(h+=e,f+=n),e===f&&n===f)return s;if(!d||!y)return s.push({x:h,y:f}),s;var p=function(t,e,n,r,i,o,a,s,c){var u,l,h,f,d,y,p=Rc(n%360),g=Math.cos(p),v=Math.sin(p),m=(s-o)/2,x=(c-a)/2,b=g*m+v*x,w=g*x-v*m;t=Math.abs(t),e=Math.abs(e),(y=Math.pow(b,2)/Math.pow(t,2)+Math.pow(w,2)/Math.pow(e,2))>1&&(t*=y=Math.sqrt(y),e*=y);var _=t*e,k=t*w,M=e*b,S=Math.pow(k,2)+Math.pow(M,2),R=Math.pow(_,2)-S,A=Math.sqrt(Math.max(R/S,0));r===i&&(A=-A);var O=A*(k/e),j=A*(-M/t);f=g*O-v*j+(s+o)/2,d=v*O+g*j+(c+a)/2;var z=(b-O)/t,T=(w-j)/e,E=(-b-O)/t,N=(-w-j)/e;return u=Math.atan2(T,z),u+=u<0?Dd:0,l=Math.atan2(N,E),h=(l+=l<0?Dd:0)-u,!i&&u<l?h-=Dd:i&&l<u&&(h+=Dd),{startAngle:u,sweepAngle:h%=Dd,cx:f,cy:d,rx:t,ry:e}}(d,y,l,c,u,h,f,e,n);r=p.cx,i=p.cy,d=p.rx,y=p.ry,o=p.sweepAngle,a=p.startAngle;for(var g=Math.abs(o*Math.sqrt((Math.pow(d,2)+Math.pow(y,2))/2)),v=Math.ceil(g/10),m=o/v,x=1;x<=v;x++){var b=(a+m*x)%Dd,w=Math.cos(b),_=Math.sin(b);s.push({x:r+w*d+-_*w,y:i+_*y+w*_})}return s}function Vd(t){for(var e=a(t),n=[],r=[],i=0,o=0,s=null,c=null,u=null,l=null,h=0;h<e.length;++h){var f=e[h],d=f[0];switch("S"!==d&&"s"!==d&&"C"!==d&&"c"!==d&&(s=null,c=null),"T"!==d&&"t"!==d&&"Q"!==d&&"q"!==d&&(u=null,l=null),d){case"m":r.length&&n.push(r.splice(0));case"l":i+=f[1],o+=f[2],r.push({x:i,y:o});break;case"M":r.length&&n.push(r.splice(0));case"L":i=f[1],o=f[2],r.push({x:i,y:o});break;case"H":i=f[1],r.push({x:i,y:o});break;case"h":i+=f[1],r.push({x:i,y:o});break;case"V":o=f[1],r.push({x:i,y:o});break;case"v":o+=f[1],r.push({x:i,y:o});break;case"a":r.push.apply(r,$d(qd(f,i,o))),i+=f[6],o+=f[7];break;case"A":r.push.apply(r,$d(qd(f,i,o))),i=f[6],o=f[7];break;case"c":r.push.apply(r,$d(Bd({x:i,y:o},{x:f[1]+i,y:f[2]+o},{x:f[3]+i,y:f[4]+o},{x:f[5]+i,y:f[6]+o}))),s=f[3]+i,c=f[4]+o,i+=f[5],o+=f[6];break;case"C":r.push.apply(r,$d(Bd({x:i,y:o},{x:f[1],y:f[2]},{x:f[3],y:f[4]},{x:f[5],y:f[6]}))),s=f[3],c=f[4],i=f[5],o=f[6];break;case"s":null!==s&&null!==s||(s=i,c=o),r.push.apply(r,$d(Bd({x:i,y:o},{x:2*i-s,y:2*o-c},{x:f[1]+i,y:f[2]+o},{x:f[3]+i,y:f[4]+o}))),s=f[1]+i,c=f[2]+o,i+=f[3],o+=f[4];break;case"S":null!==s&&null!==s||(s=i,c=o),r.push.apply(r,$d(Bd({x:i,y:o},{x:2*i-s,y:2*o-c},{x:f[1],y:f[2]},{x:f[3],y:f[4]}))),s=f[1],c=f[2],i=f[3],o=f[4];break;case"Q":r.push.apply(r,$d(Wd({x:i,y:o},{x:f[1],y:f[2]},{x:f[3],y:f[4]}))),u=f[1],l=f[2],i=f[3],o=f[4];break;case"q":r.push.apply(r,$d(Wd({x:i,y:o},{x:f[1]+i,y:f[2]+o},{x:f[3]+i,y:f[4]+o}))),u=f[1]+i,l=f[2]+o,i+=f[3],o+=f[4];break;case"T":null!==u&&null!==u||(u=i,l=o),u=2*i-u,l=2*o-l,r.push.apply(r,$d(Wd({x:i,y:o},{x:u,y:l},{x:f[1],y:f[2]}))),i=f[1],o=f[2];break;case"t":null!==u&&null!==u||(u=i,l=o),u=2*i-u,l=2*o-l,r.push.apply(r,$d(Wd({x:i,y:o},{x:u,y:l},{x:f[1]+i,y:f[2]+o}))),i+=f[1],o+=f[2];break;case"z":case"Z":r.push({x:r[0].x,y:r[0].y})}}return n.push(r.splice(0)),n}function Yd(t,e,n){return(Yd=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&Qd(i,n.prototype),i}).apply(null,arguments)}function Ud(t){return(Ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hd(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Xd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zd(t,e){return!e||"object"!==Ud(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gd(t,e,n){return(Gd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Jd(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Jd(t){return(Jd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qd(t,e){return(Qd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Kd=1e-12;var ty=function(t){function e(){var t,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=n=Zd(this,Jd(e).call(this,"path"))).set.apply(t,arguments),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qd(t,e)}(e,Of),function(t,e,n){e&&Xd(t.prototype,e),n&&Xd(t,n)}(e,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Gd(Jd(e.prototype),"set",this).call(this,t),this.segments=[],this.points=[],this.attrs.d=t.d,t.collider)Gd(Jd(e.prototype),"collider",this).call(this,t.collider);else if(t.d){var n=[];this.segments=Vd(t.d),this.segments.forEach(function(t){t.length<=1||(!function(t){if(t.length<2)return!1;var e=t[0],n=t[t.length-1];return Math.abs(e.x-n.x)<Kd&&Math.abs(e.y-n.y)<Kd}(t)?n.push({type:"polyline",points:t}):n.push({type:"polygon",vertices:t}))}),Gd(Jd(e.prototype),"collider",this).call(this,n)}}},{key:"boundingRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.points.length||(this.segments=this.segments.length?this.segments:Vd(this.attrs.d),this.points=function(t){for(var e,n=[],r=t.length,i=0;i<r;i++){e=t[i];for(var o=0;o<e.length;o++)n.push(e[o])}return n}(this.segments));var e=Hd(_(t&&this.modelViewMatrix?this.modelViewMatrix.transformPoints(this.points):this.points),4),n=e[0],r=e[1],i=e[2],o=e[3];return{x:n||0,y:r||0,width:i-n||0,height:o-r||0}}},{key:"bounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.boundingRect(t);return[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}]}}]),e}();function ey(t,e,n){return(ey=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&cy(i,n.prototype),i}).apply(null,arguments)}function ny(t){return(ny="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ry(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function iy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function oy(t,e){return!e||"object"!==ny(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ay(t,e,n){return(ay="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=sy(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function sy(t){return(sy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cy(t,e){return(cy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var uy=function(t){function e(){var t,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=n=oy(this,sy(e).call(this,"text"))).set.apply(t,arguments),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cy(t,e)}(e,Of),function(t,e,n){e&&iy(t.prototype,e),n&&iy(t,n)}(e,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.x,r=void 0===n?0:n,i=t.y,o=void 0===i?0:i,a=t.dx,s=void 0===a?0:a,c=t.dy,u=void 0===c?0:c,l=t.textBoundsFn,h=t.text,f=t.collider,y=t.boundingRect;ay(sy(e.prototype),"set",this).call(this,t),this.attrs.x=r,this.attrs.y=o,this.attrs.dx=s,this.attrs.dy=u,this.attrs.text=h,this._boundingRect=null,y?this._boundingRect=y:"function"==typeof l&&(this._textBoundsFn=l),ay(sy(e.prototype),"collider",this).call(this,d()({type:function(t){var e=t.data,n=t._boundingRect,r=t._textBoundsFn;return void 0!==e&&null!==e&&(n||r)}(this)?"bounds":null},f))}},{key:"boundingRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._boundingRect&&!this._textBoundsFn)return{x:0,y:0,width:0,height:0};!this._boundingRect&&this._textBoundsFn&&(this._boundingRect=this._textBoundsFn(this.attrs));var e=M(this._boundingRect),n=ry(_(t&&this.modelViewMatrix?this.modelViewMatrix.transformPoints(e):e),4),r=n[0],i=n[1];return{x:r,y:i,width:n[2]-r,height:n[3]-i}}},{key:"bounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.boundingRect(t);return[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}]}}]),e}();var ly=ie();function hy(t,e){return ly.get(t)(e)}ly.add("rect",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return ld(md,e)}),ly.add("circle",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return xd(Ad,e)}),ly.add("text",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return ey(uy,e)}),ly.add("line",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Od(Fd,e)}),ly.add("path",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Yd(ty,e)}),ly.add("stage",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Uf(Qf,e)}),ly.add("container",function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Cf(Yf,e)}),ly.add("defs",ud),ly.add("linearGradient",ud),ly.add("radialGradient",ud),ly.add("stop",ud);var fy=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[{}];function n(){return e[e.length-1]}return n.save=function(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n(),o={},a="",s=0;s<t.length;s++)void 0!==i[a=t[s]]&&(o[a]=i[a]);return d()(o,r),e.push(o),n()},n.restore=function(){e.splice(e.length-1,1)},n}(["stroke","fill","strokeWidth","opacity","fontFamily","fontSize","baseline"]);function dy(t,e){if(Array.isArray(e))for(var n=0,r=e.length;n<r;n++)e[n](t)}function yy(t,e,n){t.node=n[e],t.index=e}function py(t){var e=t.items,n=t.stage,r=t.dpi,i=t.on,o=void 0===i?{}:i;return n||(n=hy("stage",r)),function t(e,n,r,i){for(var o={siblings:e,node:null,index:0},a=0,s=e.length;a<s;a++)if(yy(o,a,e),dy(o,i.create),!("function"==typeof o.node.disabled?o.node.disabled():o.node.disabled)){o.node=fy.save(o.node);var c=hy(o.node.type,o.node);c&&(o.node.transform&&(r.save(),tf(o.node.transform,r)),r.isIdentity()||(c.modelViewMatrix=r.clone()),n.addChild(c),o.node.children&&t(o.node.children,c,r,i),o.node.transform&&r.restore()),fy.restore()}}(e,n,new Hh,o),n}var gy=/\n+|\r+|\r\n/,vy=/\s/,my=/[a-zA-Z\u00C0-\u00F6\u00F8-\u00FF\u00AD]/,xy=0,by=1,wy=2;function _y(t){return"string"==typeof t?-1!==t.search(gy):-1!==String(t).search(gy)}function ky(t){return-1!==t.search(vy)}function My(t){return-1!==t.search(my)}function Sy(t,e,n){return Math.max(e,Math.min(n,t))}function Ry(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.string,n=t.separator,r=void 0===n?"":n,i=t.reverse,o=void 0!==i&&i,a=t.measureText,s=void 0===a?function(t){return{width:t.length,height:1}}:a,c=t.mandatoryBreakIdentifiers,u=void 0===c?[_y]:c,l=t.noBreakAllowedIdentifiers,h=void 0===l?[]:l,f=t.suppressIdentifier,d=void 0===f?[ky,_y,function(t){return""===t}]:f,y=t.hyphenationIdentifiers,p=void 0===y?[My]:y,g=String(e).split(r);!function(t){""===t[0]&&t.shift(),""===t[t.length-1]&&t.pop()}(g);var v=g.length,m=o?v:-1;function x(t){var e=Sy(t,0,v-1),n=g[e],r=s(n),i=function(t,e,n,r,i){return r.some(function(r){return r(t,e,n)})?by:i.some(function(r){return r(t,e,n)})?xy:wy}(n,e,g,u,h);return{index:e,value:n,breakOpportunity:i,suppress:d.some(function(t){return t(n,e,g)}),hyphenation:p.some(function(t){return t(n,e,g)}),width:r.width,height:r.height,done:!1}}return{next:function(t){return isNaN(t)?o?m--:m++:m=Sy(t,0,v-1),function(t,e,n){return t?e>=0:e<n}(o,m,v)?x(m):{done:!0}},peek:x,length:v}}var Ay=1.2,Oy="‐",jy="…";function zy(t,e){return{lines:[],line:"",width:0,maxLines:function(t,e){var n=t.maxHeight,r=Math.max(t.maxLines,1)||1/0;if(isNaN(n))return r;var i=e*(t.lineHeight||Ay);return Math.max(1,Math.min(Math.floor(n/i),r))}(t,e(t.text).height),maxWidth:t.maxWidth,hyphens:{enabled:"auto"===t.hyphens,char:Oy,metrics:e(Oy)}}}function Ty(t){t.lines.push(t.line),t.line="",t.width=0}function Ey(t,e){t.line+=e.value,t.width+=e.width}function Ny(t,e,n){if(e.width>t.maxWidth)return e;for(var r=e.index,i=1;i<5;i++){var o=n.peek(e.index-1);if(!e.hyphenation||!o.hyphenation||0===e.index)return e;if(t.width+t.hyphens.metrics.width<=t.maxWidth)return t.line+=t.hyphens.char,e;if(1===t.line.length)return e;e=n.next(r-i),t.line=t.line.slice(0,-1),t.width-=e.width}return e}function Py(t,e,n){for(var r=Ry({string:e.value,measureText:n});t.lines.length<t.maxLines;){var i=r.next();if(i.done)break;t.width+i.width>t.maxWidth&&i.breakOpportunity===wy&&t.line.length>0?(i=t.hyphens.enabled?Ny(t,i,r):i,Ty(t),Ey(t,i)):Ey(t,i)}}function Cy(t,e){for(var n=Ry({string:t.text,separator:"",measureText:e,noBreakAllowedIdentifiers:[function(t,e){return 0===e}]}),r=zy(t,e),i=!0;r.lines.length<r.maxLines;){var o=n.next();if(o.done){Ty(r),i=!1;break}o.breakOpportunity===by?Ty(r):r.width+o.width>r.maxWidth&&o.breakOpportunity===wy?o.suppress?r.width+=o.width:(o=r.hyphens.enabled?Ny(r,o,n):o,Ty(r),Ey(r,o)):Ey(r,o)}return{lines:r.lines,reduced:i}}function Fy(t,e){for(var n=Ry({string:t.text,separator:/(\s|-|\u2010)/,measureText:e}),r=zy(t,e),i=!0;r.lines.length<r.maxLines;){var o=n.next();if(o.done){Ty(r),i=!1;break}o.breakOpportunity===by?Ty(r):r.width+o.width>r.maxWidth&&o.breakOpportunity===wy?o.suppress?Ty(r):o.width>r.maxWidth?Py(r,o,e):(Ty(r),Ey(r,o)):Ey(r,o)}return{lines:r.lines,reduced:i}}function Dy(t){return{"break-all":Cy,"break-word":Fy}[t.wordBreak]}function Ly(t){return function(e){var n=e.node;if(function(t){return"text"===t.type&&!t._lineBreak}(n)){var r=Dy(n);if(!r)return;var i=t(n);if(i.width<=n.maxWidth&&!_y(n.text))return;var o=i.height*(n.lineHeight||Ay),a=r(n,function(t,e){return function(n){return e({text:n,fontSize:t.fontSize,fontFamily:t.fontFamily})}}(n,t));e.node=function(t,e,n){var r={type:"container",children:[]};void 0!==e.id&&(r.id=e.id);var i=0;return t.lines.forEach(function(o,a){var s=d()({},e);s.text=o,s._lineBreak=!0,t.reduced&&a===t.lines.length-1?s.text+=jy:delete s.maxWidth,s.dy=isNaN(s.dy)?i:s.dy+i,i+=n,r.children.push(s)}),r}(a,n,o)}}}function Iy(t,e){var n=t.text,r=t["font-size"],i=t["font-family"],o=t.maxWidth;if(n="string"==typeof n?n:"".concat(n),void 0===o)return n;var a=e({text:n,fontSize:r,fontFamily:i}).width;if(a<=o)return n;for(var s=0,c=n.length-1;s<=c;){var u=Math.floor((s+c)/2);(a=e({text:n.substr(0,u)+jy,fontSize:r,fontFamily:i}).width)<=o?s=u+1:c=u-1}return n.substr(0,c)+jy}function By(t){var e=t.baseline||t["dominant-baseline"],n=0,r=parseInt(t.fontSize||t["font-size"],10)||0;switch(e){case"hanging":n=.75*r;break;case"text-before-edge":n=.85*r;break;case"middle":n=.25*r;break;case"central":n=.35*r;break;case"mathemetical":n=r/2;break;case"text-after-edge":case"ideographic":n=.2*-r;break;default:n=0}return n}var Wy,$y={},qy={};function Vy(t){var e=t.text,n=t.fontSize,r=t.fontFamily,i=qy[e+n+r];if(void 0!==i)return i;var o=(Wy=Wy||document.createElement("canvas")).getContext("2d");o.font="".concat(n," ").concat(r);var a=o.measureText(e).width;return qy[e+n+r]=a,a}function Yy(t){var e=t.text,n=t.fontSize,r=t.fontFamily;return{width:Vy({text:e,fontSize:n,fontFamily:r}),height:function(t){var e=t.fontSize,n=t.fontFamily,r=$y[e+n];if(void 0!==r)return r;var i=1.2*Vy({text:"M",fontSize:e,fontFamily:n});return $y[e+n]=i,i}({fontSize:n,fontFamily:r})}}function Uy(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Yy,n=t["font-size"]||t.fontSize,r=t["font-family"]||t.fontFamily,i=e({text:t.text,fontFamily:r,fontSize:n}),o=Math.min(t.maxWidth||i.width,i.width),a=t.x||0,s=t.y||0,c=t.dx||0,u={x:0,y:s+((t.dy||0)+By(t))-.75*i.height,width:o,height:i.height},l=t["text-anchor"]||t.anchor;return u.x="middle"===l?a+c-o/2:"end"===l?a+c-o:a+c,u}function Hy(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Yy,n=Dy(t);if(n){for(var r=t["font-size"]||t.fontSize,i=t["font-family"]||t.fontFamily,o=n(t,function(t){return e({text:t,fontFamily:i,fontSize:r})}),a=d()({},t),s=0,c="",u=0,l=o.lines.length;u<l;u++){var h=o.lines[u];h+=u===l-1&&o.reduced?jy:"";var f=e({text:h,fontSize:r,fontFamily:i}).width;f>=s&&(s=f,c=h)}a.text=c;var y=Uy(a,e),p=t.lineHeight||Ay;return y.height=y.height*o.lines.length*p,y}return Uy(t,e)}function Xy(t,e,n){var r=n.orientation,i=n.degree,o=n.stops,a=void 0===o?[]:o,s=null;if("radial"===r){var c=e.width||0,u=e.height||0,l=void 0!==e.x?e.x:e.cx,h=void 0!==e.y?e.y:e.cy;s=t.createRadialGradient(l+c/2,h+u/2,1,l+c/2,h+u/2,e.r||Math.max(e.width,e.height)/2)}else{var f=Ac(i),d=e.width||2*e.r,y=e.height||2*e.r,p=void 0!==e.x?e.x:e.cx-e.r,g=void 0!==e.y?e.y:e.cy-e.r;s=t.createLinearGradient(p+f.x1*d,g+f.y1*y,p+f.x2*d,g+f.y2*y)}for(var v=0,m=a.length;v<m;v++){var x=a[v];s.addColorStop(x.offset,x.color)}return s}function Zy(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.x,n=t.y,r=t.width,i=t.height,o=t.scaleRatio,a=t.margin,s={x:0,y:0,width:0,height:0,scaleRatio:{x:1,y:1},margin:{left:0,top:0}};return s.x=isNaN(e)?s.x:e,s.y=isNaN(n)?s.y:n,s.width=isNaN(r)?s.width:r,s.height=isNaN(i)?s.height:i,void 0!==o&&(s.scaleRatio.x=isNaN(o.x)?s.scaleRatio.x:o.x,s.scaleRatio.y=isNaN(o.y)?s.scaleRatio.y:o.y),void 0!==a&&(s.margin.left=isNaN(a.left)?0:a.left,s.margin.top=isNaN(a.top)?0:a.top),s}function Gy(){return{element:function(){},root:function(){},appendTo:function(){},render:function(){return!1},itemsAt:function(){return[]},findShapes:function(){return[]},clear:function(){},destory:function(){},size:function(){},measureText:Yy,textBounds:Hy}}function Jy(t){return function(e){var n=e.node;"text"===n.type&&function(t){return void 0!==t&&null!==t}(n.data)&&!n.textBoundsFn&&(n.textBoundsFn=t.textBounds)}}function Qy(t){return(Qy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Ky=ie();function tp(t){return Array.isArray(t)?t:"string"==typeof t?-1!==t.indexOf(",")?t.split(","):t.split(" "):[]}function ep(t,e){e.setTransform(t[0][0],t[1][0],t[0][1],t[1][1],t[0][2],t[1][2])}function np(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=Object.keys(r),o=0,a=n.length;o<a;o++){var s=n[o],c=s[0],u=s[1],l=s[2];if(c in e.attrs&&!(u in r)&&t[u]!==e.attrs[c]){var h=l?l(e.attrs[c]):e.attrs[c];"function"==typeof t[u]?t[u](h):t[u]=h}}for(var f=0,d=i.length;f<d;f++){var y=i[f];t[y]=r[y]}}function rp(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:py,r=!1,i=Zy(),o=[["fill","fillStyle"],["stroke","strokeStyle"],["opacity","globalAlpha"],["globalAlpha","globalAlpha"],["stroke-width","lineWidth"],["stroke-dasharray","setLineDash",tp]],a=Gy();return a.element=function(){return t},a.root=function(){return t},a.appendTo=function(e){return t||((t=e.ownerDocument.createElement("canvas")).style.position="absolute",t.style["-webkit-font-smoothing"]="antialiased",t.style["-moz-osx-font-smoothing"]="antialiased",t.style.pointerEvents="none"),e.appendChild(t),t},a.render=function(s){if(!t)return!1;var c=t.getContext("2d"),u=function(t){return("undefined"==typeof window?1:window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}(c),l=i.scaleRatio.x,h=i.scaleRatio.y;r&&(t.style.left="".concat(Math.round(i.margin.left+i.x*l),"px"),t.style.top="".concat(Math.round(i.margin.top+i.y*h),"px"),t.style.width="".concat(Math.round(i.width*l),"px"),t.style.height="".concat(Math.round(i.height*h),"px"),t.width=Math.round(i.width*u*l),t.height=Math.round(i.height*u*h));var f={type:"container",children:s};1===u&&1===l&&1===h||(f.transform="scale(".concat(u*l,", ").concat(u*h,")"));var d=n({items:[f],dpi:u,on:{create:[Ly(a.measureText),Jy(a)]}}),y=!e||!d.equals(e),p=r||y;return p&&(a.clear(),function t(e,n,r){for(var i=0,o=e.length;i<o;i++){var a=e[i],s={};n.save(),a.attrs&&(a.attrs.fill||a.attrs.stroke)&&(a.attrs.fill&&"object"===Qy(a.attrs.fill)&&"gradient"===a.attrs.fill.type&&(s.fillStyle=Xy(n,a.attrs,a.attrs.fill)),a.attrs.stroke&&"object"===Qy(a.attrs.stroke)&&"gradient"===a.attrs.stroke.type&&(s.strokeStyle=Xy(n,a.attrs,a.attrs.stroke))),np(n,a,r,s),a.modelViewMatrix&&ep(a.modelViewMatrix.elements,n),Ky.has(a.type)&&Ky.get(a.type)(a.attrs,{g:n,doFill:"fill"in a.attrs&&"none"!==a.attrs.fill,doStroke:"stroke"in a.attrs&&0!==a.attrs["stroke-width"]}),a.children&&t(a.children,n,r),n.restore()}}(d.children,c,o)),r=!1,e=d,p},a.itemsAt=function(t){return e?e.getItemsFrom(t):[]},a.findShapes=function(t){return e?e.findShapes(t):[]},a.clear=function(){return t&&(t.width=t.width),e=null,a},a.size=function(t){if(t){var e=Zy(t);JSON.stringify(i)!==JSON.stringify(e)&&(r=!0,i=e)}return i},a.destroy=function(){t&&(t.parentElement&&t.parentElement.removeChild(t),t=null),e=null},a}function ip(t,e){Ky.add(t,e)}var op=new RegExp("[A-Za-zªµºÀ-ÖØ-öø-ʸʻ-ˁː-ˑˠ-ˤˮͰ-ͳͶ-ͽΆΈ-ϵϷ-҂Ҋ-։ः-हऻऽ-ीॉ-ौॎ-ॐक़-ॡ।-ॿং-হঽ-ীে-ৌৎ-ৡ০-ৱ৴-৺ਃ-ਹਾ-ੀਖ਼-੯ੲ-ੴઃ-હઽ-ીૉ-ૌૐ-ૡ૦-૯ଂ-ହଽ-ାୀେ-ୌୗ-ୡ୦-୷ஃ-ிு-ௌௐ-௲ఁ-ఽు-ౄౘ-ౡ౦-౯౿-ಹಽ-ೋೕ-ೡ೦-ീെ-ൌൎ-ൡ൦-ෆා-ෑෘ-ะา-ำเ-ๆ๏-ະາ-ຳຽ-ໆ໐-༗༚-༴༶༸༾-ཬཿ྅ྈ-ྌ྾-࿅࿇-ာေးျ-ြဿ-ၗၚ-ၝၡ-ၰၵ-ႁႃ-ႄႇ-ႌႎ-ႜ႞-ፚ፠-ᎏᎠ-Ᏼᐁ-ᙿᚁ-ᚚᚠ-ᜑᜠ-ᜱ᜵-ᝑᝠ-ᝰក-ាើ-ៅះ-ៈ។-៚ៜ០-៩᠐-ᢨᢪ-ᤜᤣ-ᤦᤩ-ᤱᤳ-ᤸ᥆-᧚ᨀ-ᨖᨙ-ᩕᩗᩡᩣ-ᩤᩭ-ᩲ᪀-᪭ᬄ-ᬳᬵᬻᬽ-ᭁᭃ-᭪᭴-᭼ᮂ-ᮡᮦ-ᮧ᮪-ᯥᯧᯪ-ᯬᯮ᯲-ᰫᰴ-ᰵ᰻-᱿᳓᳡ᳩ-ᳬᳮ-ᶿḀ-ᾼιῂ-ῌῐ-Ίῠ-Ῥῲ-ῼ‎ⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎ-⅏Ⅰ-ↈ⌶-⍺⎕⒜-ⓩ⚬⠀-⣿Ⰰ-ⳤⳫ-ⳮⴀ-⵰ⶀ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ㆺㇰ-㈜㈠-㉏㉠-㉻㉿-㊰㋀-㋋㋐-㍶㍻-㏝㏠-㏾㐀-䶵一-ꒌꓐ-ꘌꘐ-ꙮꚀ-ꛯ꛲-꛷Ꜣ-ꞇ꞉-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠤꠧ꠰-꠷ꡀ-ꡳꢀ-ꣃ꣎-꣙ꣲ-ꤥ꤮-ꥆꥒ-ꥼꦃ-ꦲꦴ-ꦵꦺ-ꦻꦽ-ꨨꨯ-ꨰꨳ-ꨴꩀ-ꩂꩄ-ꩋꩍ-ꪯꪱꪵ-ꪶꪹ-ꪽꫀꫂ-ꯤꯦ-ꯧꯩ-꯬꯰-ﬗＡ-Ｚａ-ｚｦ-ￜ]"),ap=new RegExp("[־׀׃׆א-״߀-ߪߴ-ߵߺ-ࠕࠚࠤࠨ࠰-ࡘ࡞‏יִײַ-ﬨשׁ-ﭏ]"),sp=new RegExp("[؈؋؍؛-ي٭-ٯٱ-ەۥ-ۦۮ-ۯۺ-܍ܐܒ-ܯݍ-ޥޱﭐ-ﴽﵐ-﷼ﹰ-ﻼ]");function cp(t){return op.test(t)}function up(t){return ap.test(t)||sp.test(t)}function lp(t){var e,n,r=t?t.length:0;for(e=0;e<r;e++){if(cp(n=t[e]))return"ltr";if(up(n))return"rtl"}return"ltr"}var hp={start:"end",end:"start",center:"center",middle:"middle"};function fp(t,e){return"rtl"===e?hp[t]:t}ip("rect",function(t,e){var n=e.g,r=e.doFill,i=e.doStroke;n.beginPath(),n.rect(t.x,t.y,t.width,t.height),r&&n.fill(),i&&n.stroke()}),ip("circle",function(t,e){var n=e.g,r=e.doFill,i=e.doStroke;n.beginPath(),n.moveTo(t.cx+t.r,t.cy),n.arc(t.cx,t.cy,t.r,0,2*Math.PI,!1),r&&n.fill(),i&&n.stroke()}),ip("line",function(t,e){var n=e.g,r=e.doStroke;n.beginPath(),n.moveTo(t.x1,t.y1),n.lineTo(t.x2,t.y2),r&&n.stroke()}),ip("path",function(t,e){var n=e.g,r=e.doStroke,i=e.doFill,o=new Path2D(t.d);i&&n.fill(o),r&&n.stroke(o)}),ip("text",function(t,e){var n=e.g,r=Iy(t,Yy);n.font="".concat(t["font-size"]," ").concat(t["font-family"]),n.canvas.dir=lp(t.text);var i="middle"===t["text-anchor"]?"center":t["text-anchor"];n.textAlign=fp(i,n.canvas.dir);var o=By(t);n.fillText(r,t.x+t.dx,t.y+t.dy+o)});function dp(t){return(dp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yp(t,e,n){for(var r=0,i=t.length;r<i;r++)t[r].object=n(t[r].content.type,e)}function pp(t,e){for(var n=0,r=t.length;n<r;n++)null!==t[n].object&&void 0!==t[n].object&&(e(t[n].object),t[n].object=null)}function gp(t,e,n,r,i,o){var a=function t(e,n){var r,i,o,a=[],s=[],c=[],u=[],l=function(t){return t.id},h=function(t,e){var n;return n="object"===dp(t)?"id"in t?t.id:e:t,{content:t,id:"".concat(n,"__").concat(t.type||"")}};e.isTree||(e=e.map(h)),n=n.map(h),i=e.map(l),o=n.map(l);for(var f=0,d=n.length;f<d;f++)-1===i.indexOf(n[f].id)?a.push(n[f]):c.push(n[f]);for(var y=0,p=e.length;y<p;y++)-1===o.indexOf(e[y].id)?s.push(e[y]):u.push(e[y]);for(var g=0,v=a.length;g<v;g++)a[g].content.children&&(a[g].diff=t([],a[g].content.children),a[g].children=a[g].diff.updatedNew.concat(a[g].diff.added),a[g].children.isTree=!0);for(var m=0,x=c.length;m<x;m++)c[m].diff=t(u[m].children||[],c[m].content.children||[]),c[m].object=u[m].object,c[m].children=c[m].diff.items;return r=c.concat(a),a.isTree=!0,s.isTree=!0,c.isTree=!0,u.isTree=!0,r.isTree=!0,{added:a,updatedNew:c,updatedOld:u,removed:s,items:r}}(t,e);return yp(a.added,n,r),pp(a.removed,o),function t(e,n,r,i){for(var o,a=0,s=e.length;a<s;a++)null!==(o=e[a]).object&&void 0!==o.object&&(r(o.object,o.content),o.diff&&(yp(o.diff.added,o.object,n),pp(o.diff.removed,i),t(o.diff.items,n,r,i)))}(a.items,r,i,o),a.items}function vp(t){return(vp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var mp="http://www.w3.org/2000/svg",xp=function(t,e){if(!t||"string"!=typeof t)throw new Error("Invalid type: ".concat(t));var n=e.ownerDocument.createElementNS(mp,"container"===t?"g":t);return e.appendChild(n),n},bp=function(t){t.parentNode&&t.parentNode.removeChild(t)},wp=function(t,e){for(var n in e.attrs)if("text"===n){t.setAttribute("style","white-space: pre"),t.textContent=Iy(e.attrs,Yy);var r=lp(e.attrs.text);"rtl"===r&&(t.setAttribute("direction","rtl"),t.setAttribute("dir","rtl"),t.setAttribute("text-anchor",fp(t.getAttribute("text-anchor"),r)))}else if("text"!==e.type||"dy"!==n&&"dominant-baseline"!==n)t.setAttribute(n,e.attrs[n]);else{var i=+t.getAttribute(n)||0,o=0;o="dominant-baseline"===n?By(e.attrs):e.attrs[n],t.setAttribute("dy",o+i)}if("string"==typeof e.data||"number"==typeof e.data||"boolean"==typeof e.data)t.setAttribute("data",e.data);else if("object"===vp(e.data)&&null!==e.data)for(var a in e.data)"string"!=typeof e.data[a]&&"number"!=typeof e.data[a]&&"boolean"!=typeof e.data[a]||t.setAttribute("data-".concat(a),e.data[a])};function _p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var kp=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.create=e,this.nodeCreator=n,this.nodeMaintainer=r,this.nodeDestroyer=i}return function(t,e,n){e&&_p(t.prototype,e),n&&_p(t,n)}(t,[{key:"render",value:function(t,e){return this.create([],t,e,this.nodeCreator,this.nodeMaintainer,this.nodeDestroyer)}}]),t}();function Mp(){return new kp(gp,xp,wp,bp)}function Sp(t){return(Sp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Rp=[],Ap={};function Op(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fill",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=function(t){var e,n,r=0;if(0===(t=JSON.stringify(t)).length)return r;for(e=0,n=t.length;e<n;e++)r=(r<<5)-r+t.charCodeAt(e),r&=r;return r}(t[e]),i="";if(void 0!==Ap[r])i=Ap[r];else{var o=t[e],a=o.orientation,s=o.degree,c=o.stops,u=void 0===c?[]:c,l={};void 0===s&&(s=90),"radial"===a?l.type="radialGradient":(l=Ac(s)).type="linearGradient",l.id="picasso-gradient-".concat(r),l.children=u.map(function(t){var e=t.offset,n=t.color,r=t.opacity;return{type:"stop",offset:"".concat(100*e,"%"),style:"stop-color:".concat(n,";stop-opacity:").concat(r||1)}}),Rp.push(l),Ap[r]=l.id,i=l.id}return"url('".concat(n,"#").concat(i,"')")}function jp(t){var e="";"undefined"!=typeof window&&(e=window.location.href.split("#")[0]);var n=t.node;n.fill&&"object"===Sp(n.fill)&&"gradient"===n.fill.type&&(n.fill=Op(n,"fill",e)),n.stroke&&"object"===Sp(n.stroke)&&"gradient"===n.stroke.type&&(n.stroke=Op(n,"stroke",e))}function zp(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Tp(){var t,e,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mp,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mp,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:py,a=r(),s=!1,c=Zy(),u=Gy();return u.element=function(){return t},u.root=function(){return e},u.appendTo=function(n){return t||((t=n.ownerDocument.createElementNS(i,"svg")).style.position="absolute",t.style["-webkit-font-smoothing"]="antialiased",t.style["-moz-osx-font-smoothing"]="antialiased",t.style.pointerEvents="none",t.setAttribute("xmlns",i),(e=n.ownerDocument.createElementNS(i,"g")).style.pointerEvents="auto",t.appendChild(e)),n.appendChild(t),t},u.render=function(r){if(!t)return!1;var i=c.scaleRatio.x,l=c.scaleRatio.y;s&&(t.style.left="".concat(Math.round(c.margin.left+c.x*i),"px"),t.style.top="".concat(Math.round(c.margin.top+c.y*l),"px"),t.setAttribute("width",Math.round(c.width*i)),t.setAttribute("height",Math.round(c.height*l))),Rp=[],Ap={};var h={type:"container",children:Array.isArray(r)?zp(r).concat([{type:"defs",children:Rp,disabled:function(){return 0===Rp.length}}]):r};1===i&&1===l||(h.transform="scale(".concat(i,", ").concat(l,")"));var f=o({items:[h],on:{create:[jp,Ly(u.measureText),Jy(u)]}}),d=!n||!f.equals(n),y=s||d;return y&&(u.clear(),a.render(f.children,e)),s=!1,n=f,y},u.itemsAt=function(t){return n?n.getItemsFrom(t):[]},u.findShapes=function(t){return n?n.findShapes(t):[]},u.clear=function(){if(!e)return u;n=null;var r=e.cloneNode(!1);return t.replaceChild(r,e),e=r,u},u.destroy=function(){t&&t.parentElement&&t.parentElement.removeChild(t),t=null,e=null},u.size=function(t){if(t){var e=Zy(t);JSON.stringify(c)!==JSON.stringify(e)&&(s=!0,c=e)}return c},u}function Ep(t,e,n,r,i){return{sel:t,data:e,children:n,text:r,elm:i,key:void 0===e?void 0:e.key}}var Np=Ep,Pp=Array.isArray;function Cp(t){return"string"==typeof t||"number"==typeof t}var Fp={createElement:function(t){return document.createElement(t)},createElementNS:function(t,e){return document.createElementNS(t,e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,n){t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},getTextContent:function(t){return t.textContent},isElement:function(t){return 1===t.nodeType},isText:function(t){return 3===t.nodeType},isComment:function(t){return 8===t.nodeType}};function Dp(t){return void 0===t}function Lp(t){return void 0!==t}var Ip=Np("",{},[],void 0,void 0);function Bp(t,e){return t.key===e.key&&t.sel===e.sel}function Wp(t,e,n){var r,i,o,a={};for(r=e;r<=n;++r)null!=(o=t[r])&&void 0!==(i=o.key)&&(a[i]=r);return a}var $p=["create","update","remove","destroy","pre","post"];var qp=n(6),Vp=n.n(qp),Yp=n(5),Up=n.n(Yp),Hp=n(4),Xp=n.n(Hp),Zp=n(3),Gp=n.n(Zp),Jp=n(2),Qp=n.n(Jp),Kp=function(t,e){var n,r,i={},o=void 0!==e?e:Fp;for(n=0;n<$p.length;++n)for(i[$p[n]]=[],r=0;r<t.length;++r){var a=t[r][$p[n]];void 0!==a&&i[$p[n]].push(a)}function s(t,e){return function(){if(0==--e){var n=o.parentNode(t);o.removeChild(n,t)}}}function c(t,e){var n,r=t.data;void 0!==r&&Lp(n=r.hook)&&Lp(n=n.init)&&(n(t),r=t.data);var a=t.children,s=t.sel;if("!"===s)Dp(t.text)&&(t.text=""),t.elm=o.createComment(t.text);else if(void 0!==s){var u=s.indexOf("#"),l=s.indexOf(".",u),h=u>0?u:s.length,f=l>0?l:s.length,d=-1!==u||-1!==l?s.slice(0,Math.min(h,f)):s,y=t.elm=Lp(r)&&Lp(n=r.ns)?o.createElementNS(n,d):o.createElement(d);for(h<f&&y.setAttribute("id",s.slice(h+1,f)),l>0&&y.setAttribute("class",s.slice(f+1).replace(/\./g," ")),n=0;n<i.create.length;++n)i.create[n](Ip,t);if(Pp(a))for(n=0;n<a.length;++n){var p=a[n];null!=p&&o.appendChild(y,c(p,e))}else Cp(t.text)&&o.appendChild(y,o.createTextNode(t.text));Lp(n=t.data.hook)&&(n.create&&n.create(Ip,t),n.insert&&e.push(t))}else t.elm=o.createTextNode(t.text);return t.elm}function u(t,e,n,r,i,a){for(;r<=i;++r){var s=n[r];null!=s&&o.insertBefore(t,c(s,a),e)}}function l(t){var e,n,r=t.data;if(void 0!==r){for(Lp(e=r.hook)&&Lp(e=e.destroy)&&e(t),e=0;e<i.destroy.length;++e)i.destroy[e](t);if(void 0!==t.children)for(n=0;n<t.children.length;++n)null!=(e=t.children[n])&&"string"!=typeof e&&l(e)}}function h(t,e,n,r){for(;n<=r;++n){var a=void 0,c=void 0,u=void 0,h=e[n];if(null!=h)if(Lp(h.sel)){for(l(h),c=i.remove.length+1,u=s(h.elm,c),a=0;a<i.remove.length;++a)i.remove[a](h,u);Lp(a=h.data)&&Lp(a=a.hook)&&Lp(a=a.remove)?a(h,u):u()}else o.removeChild(t,h.elm)}}function f(t,e,n){var r,a;Lp(r=e.data)&&Lp(a=r.hook)&&Lp(r=a.prepatch)&&r(t,e);var s=e.elm=t.elm,l=t.children,d=e.children;if(t!==e){if(void 0!==e.data){for(r=0;r<i.update.length;++r)i.update[r](t,e);Lp(r=e.data.hook)&&Lp(r=r.update)&&r(t,e)}Dp(e.text)?Lp(l)&&Lp(d)?l!==d&&function(t,e,n,r){for(var i,a,s,l=0,d=0,y=e.length-1,p=e[0],g=e[y],v=n.length-1,m=n[0],x=n[v];l<=y&&d<=v;)null==p?p=e[++l]:null==g?g=e[--y]:null==m?m=n[++d]:null==x?x=n[--v]:Bp(p,m)?(f(p,m,r),p=e[++l],m=n[++d]):Bp(g,x)?(f(g,x,r),g=e[--y],x=n[--v]):Bp(p,x)?(f(p,x,r),o.insertBefore(t,p.elm,o.nextSibling(g.elm)),p=e[++l],x=n[--v]):Bp(g,m)?(f(g,m,r),o.insertBefore(t,g.elm,p.elm),g=e[--y],m=n[++d]):(void 0===i&&(i=Wp(e,l,y)),Dp(a=i[m.key])?(o.insertBefore(t,c(m,r),p.elm),m=n[++d]):((s=e[a]).sel!==m.sel?o.insertBefore(t,c(m,r),p.elm):(f(s,m,r),e[a]=void 0,o.insertBefore(t,s.elm,p.elm)),m=n[++d]));(l<=y||d<=v)&&(l>y?u(t,null==n[v+1]?null:n[v+1].elm,n,d,v,r):h(t,e,l,y))}(s,l,d,n):Lp(d)?(Lp(t.text)&&o.setTextContent(s,""),u(s,null,d,0,d.length-1,n)):Lp(l)?h(s,l,0,l.length-1):Lp(t.text)&&o.setTextContent(s,""):t.text!==e.text&&o.setTextContent(s,e.text),Lp(a)&&Lp(r=a.postpatch)&&r(t,e)}}return function(t,e){var n,r,a,s=[];for(n=0;n<i.pre.length;++n)i.pre[n]();for(function(t){return void 0!==t.sel}(t)||(t=function(t){var e=t.id?"#"+t.id:"",n=t.className?"."+t.className.split(" ").join("."):"";return Np(o.tagName(t).toLowerCase()+e+n,{},[],void 0,t)}(t)),Bp(t,e)?f(t,e,s):(r=t.elm,a=o.parentNode(r),c(e,s),null!==a&&(o.insertBefore(a,e.elm,o.nextSibling(r)),h(a,[t],0,0))),n=0;n<s.length;++n)s[n].data.hook.insert(s[n]);for(n=0;n<i.post.length;++n)i.post[n]();return e}}([Vp.a,Up.a,Xp.a,Gp.a]);function tg(){var t,e,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).createElement,r=void 0===n?document.createElement.bind(document):n,i=Zy(),o=Gy();return o.element=function(){return t},o.root=function(){return t},o.appendTo=function(e){return t||((t=r("div")).style.position="absolute",t.style["-webkit-font-smoothing"]="antialiased",t.style["-moz-osx-font-smoothing"]="antialiased",t.style.pointerEvents="none"),e.appendChild(t),t},o.render=function(n){if(!t)return!1;var r=i.scaleRatio.x,o=i.scaleRatio.y;t.style.left="".concat(Math.round(i.margin.left+i.x*r),"px"),t.style.top="".concat(Math.round(i.margin.left+i.y*o),"px"),t.style.width="".concat(Math.round(i.width*r),"px"),t.style.height="".concat(Math.round(i.height*o),"px");var a=Qp()("div",{},Array.isArray(n)?n:[n]);return Kp(e||t,a),e=a,!0},o.renderArgs=[Qp.a],o.clear=function(){if(t){for(var n=t.firstChild;n;)t.removeChild(n),n=t.firstChild;e=null}return o},o.destroy=function(){t&&t.parentElement&&t.parentElement.removeChild(t),t=null,e=null},o.size=function(t){return t&&(i=Zy(t)),i},o}var eg=[function(t){t.renderer("svg",Tp)},function(t){t.renderer("canvas",rp)},function(t){t.renderer("dom",tg)}];function ng(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var rg={OFF:0,ERROR:1,WARN:2,INFO:3,DEBUG:4},ig=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.level,r=void 0===n?rg.OFF:n,i=e.pipe,o=void 0===i?console:i,a=r,s=(ng(t={},rg.OFF,function(){}),ng(t,rg.ERROR,function(){return o.error.apply(o,arguments)}),ng(t,rg.WARN,function(){return o.warn.apply(o,arguments)}),ng(t,rg.INFO,function(){return o.info.apply(o,arguments)}),ng(t,rg.DEBUG,function(){return o.log.apply(o,arguments)}),t),c=function(t){if(t&&!(a<t)){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];(s[t]||s[rg.DEBUG]).apply(void 0,n)}};return{log:c,error:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return c.apply(void 0,[rg.ERROR].concat(e))},warn:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return c.apply(void 0,[rg.WARN].concat(e))},info:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return c.apply(void 0,[rg.INFO].concat(e))},debug:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return c.apply(void 0,[rg.DEBUG].concat(e))},level:function(t){return"number"==typeof t&&(a=t),a},LOG_LEVEL:rg}};n.d(e,"default",function(){return og});var og=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=ig(e.logger),i={component:ie(n.component),data:ie(n.data),formatter:ie(n.formatter),interaction:ie(n.interaction),renderer:Hs(n.renderer),scale:ie(n.scale),symbol:ie(n.symbol),logger:r};function o(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t({palettes:e.palettes.concat(n.palettes||[]),style:d()({},e.style,n.style),logger:n.logger||e.logger,renderer:n.renderer||e.renderer},i)}return e.renderer&&e.renderer.prio&&i.renderer.default(e.renderer.prio[0]),o.use=function(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(arguments.length>2?arguments[2]:void 0,e)}(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i)},o.chart=function(t){return Us(t,{registries:i,logger:r,style:e.style,palettes:e.palettes})},o.config=function(){return e},Object.keys(i).forEach(function(t){o[t]=i[t]}),o.version=y.version,o}({renderer:{prio:["svg","canvas"]},logger:{level:0},style:{"$font-family":"'Source Sans Pro', Arial, sans-serif","$font-size":"12px","$line-height":"16px","$font-size--l":"16px","$gray-100":"#ffffff","$gray-98":"#f9f9f9","$gray-95":"#f2f2f2","$gray-90":"#e6e6e6","$gray-35":"#595959","$gray-30":"#4d4d4d","$gray-25":"#404040","$gray-20":"#333333","$border-95":"rgba(255, 255, 255, 0.05)","$border-90":"rgba(255, 255, 255, 0.1)","$border-80":"rgba(255, 255, 255, 0.2)","$border-20":"rgba(0, 0, 0, 0.2)","$border-10":"rgba(0, 0, 0, 0.1)","$border-5":"rgba(0, 0, 0, 0.05)","$primary-blue":"#3F8AB3","$primary-green":"#6CB33F","$primary-red":"#DC423F","$primary-orange":"#EF960F","$spacing--s":4,$spacing:8,"$spacing--l":12,"$font-color":"$gray-35","$font-color--inverted":"$gray-90","$guide-color":"$gray-90","$guide-color--inverted":"$gray-35",$border:"$border-80","$border--inverted":"$border-10",$shape:{fill:"$primary-blue",strokeWidth:1,stroke:"$border"},"$shape-outline":{stroke:"$primary-blue",strokeWidth:2},"$shape-guide":{stroke:"$guide-color",strokeWidth:1},"$shape-guide--inverted":{"@extend":"$shape-guide",stroke:"$guide-color--inverted"},$label:{fontSize:"$font-size",fontFamily:"$font-family",fill:"$font-color"},"$label--inverted":{$extend:"$label",fill:"$font-color--inverted"},"$label-overlay":{fontSize:"$font-size--l",fontFamily:"$font-family",fill:"$gray-100",color:"$font-color",stroke:"$guide-color--inverted",strokeWidth:1,borderRadius:4},$title:{"@extend":"$label",fontSize:"$font-size--l"},"$guide-line":{strokeWidth:1,stroke:"$guide-color"},"$guide-line--minor":{strokeWidth:1,stroke:"$gray-95"},"$padding--s":{left:"$spacing--s",right:"$spacing--s",top:"$spacing--s",bottom:"$spacing--s"},$padding:{left:"$spacing",right:"$spacing",top:"$spacing",bottom:"$spacing"},"$selection-area-target":{fill:"$primary-green",strokeWidth:0,opacity:.2}},palettes:[{key:"categorical",colors:[["#a54343","#d76c6c","#ec983d","#ecc43d","#f9ec86","#cbe989","#70ba6e","#578b60","#79d69f","#26a0a7","#138185","#65d3da"]]},{key:"diverging",colors:[["#3d52a1","#3a89c9","#77b7e5","#b4ddf7","#e6f5fe","#ffe3aa","#f9bd7e","#ed875e","#d24d3e","#ae1c3e"]]},{key:"sequential",colors:[["rgb(180,221,212)","rgb(34, 83, 90)"]]}]},{component:Xs,data:hc,formatter:wr,interaction:dc,renderer:Hs(),scale:Ma});ph.forEach(og.use),eg.forEach(og.use),[].forEach(og.use)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.array=Array.isArray,e.primitive=function(t){return"string"==typeof t||"number"==typeof t}},function(t,e,n){"use strict";function r(t,e,n,r,i){return{sel:t,data:e,children:n,text:r,elm:i,key:void 0===e?void 0:e.key}}Object.defineProperty(e,"__esModule",{value:!0}),e.vnode=r,e.default=r}]).default});
//# sourceMappingURL=picasso.js.map